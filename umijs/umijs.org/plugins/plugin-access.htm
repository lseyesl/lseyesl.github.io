<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8"utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg"
    />
    <link rel="stylesheet" href="../umi.css" tppabs="https://umijs.org/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.3
    </script>
    <title>@umijs/plugin-access</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="../index.htm" tppabs="https://umijs.org/">UmiJS</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="../docs.htm" tppabs="https://umijs.org/docs">Docs</a><a href="../config.htm" tppabs="https://umijs.org/config">Config</a><a href="../api.htm" tppabs="https://umijs.org/api">API</a><a href="../guide.htm" tppabs="https://umijs.org/guide">Guide</a><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/plugins">Plugins</a><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><div class="__dumi-default-locale-select" data-locale-count="2"><span>ä¸­æ–‡</span></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="../index.htm" tppabs="https://umijs.org/"></a><h1>UmiJS</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="../docs.htm" tppabs="https://umijs.org/docs">Docs</a></li><li><a href="../config.htm" tppabs="https://umijs.org/config">Config</a></li><li><a href="../api.htm" tppabs="https://umijs.org/api">API</a></li><li><a href="../guide.htm" tppabs="https://umijs.org/guide">Guide</a></li><li><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/plugins">Plugins</a></li><li><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><span>ä¸­æ–‡</span></div></div><ul class="__dumi-default-menu-list"><li><a>Presets</a><ul><li><a href="preset-react.htm" tppabs="https://umijs.org/plugins/preset-react"><span>@umijs/preset-react</span></a></li></ul></li><li><a>Plugins</a><ul><li><a aria-current="page" class="active" href="plugin-access.htm" tppabs="https://umijs.org/plugins/plugin-access"><span>@umijs/plugin-access</span></a></li><li><a href="plugin-analytics.htm" tppabs="https://umijs.org/plugins/plugin-analytics"><span>@umijs/plugin-analytics</span></a></li><li><a href="plugin-antd.htm" tppabs="https://umijs.org/plugins/plugin-antd"><span>@umijs/plugin-antd</span></a></li><li><a href="plugin-crossorigin.htm" tppabs="https://umijs.org/plugins/plugin-crossorigin"><span>@umijs/plugin-crossorigin</span></a></li><li><a href="plugin-dva.htm" tppabs="https://umijs.org/plugins/plugin-dva"><span>@umijs/plugin-dva</span></a></li><li><a href="plugin-esbuild.htm" tppabs="https://umijs.org/plugins/plugin-esbuild"><span>@umijs/plugin-esbuild</span></a></li><li><a href="plugin-helmet.htm" tppabs="https://umijs.org/plugins/plugin-helmet"><span>@umijs/plugin-helmet</span></a></li><li><a href="plugin-initial-state.htm" tppabs="https://umijs.org/plugins/plugin-initial-state"><span>@umijs/plugin-initial-state</span></a></li><li><a href="plugin-layout.htm" tppabs="https://umijs.org/plugins/plugin-layout"><span>@umijs/plugin-layout</span></a></li><li><a href="plugin-locale.htm" tppabs="https://umijs.org/plugins/plugin-locale"><span>@umijs/plugin-locale</span></a></li><li><a href="plugin-model.htm" tppabs="https://umijs.org/plugins/plugin-model"><span>@umijs/plugin-model</span></a></li><li><a href="plugin-preact.htm" tppabs="https://umijs.org/plugins/plugin-preact"><span>@umijs/plugin-preact</span></a></li><li><a href="plugin-qiankun.htm" tppabs="https://umijs.org/plugins/plugin-qiankun"><span>@umijs/plugin-qiankun</span></a></li><li><a href="plugin-request.htm" tppabs="https://umijs.org/plugins/plugin-request"><span>@umijs/plugin-request</span></a></li><li><a href="plugin-sass.htm" tppabs="https://umijs.org/plugins/plugin-sass"><span>@umijs/plugin-sass</span></a></li><li><a href="plugin-webpack-5.htm" tppabs="https://umijs.org/plugins/plugin-webpack-5"><span>@umijs/plugin-webpack-5</span></a></li></ul></li><li><a>Plugin Develop</a><ul><li><a href="api.htm" tppabs="https://umijs.org/plugins/api"><span>Plugin API</span></a></li><li><a href="test.htm" tppabs="https://umijs.org/plugins/test"><span>Plugin Test</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="å¯ç”¨æ–¹å¼" data-depth="2" class=""><a href="plugin-access.htm#å¯ç”¨æ–¹å¼" tppabs="https://umijs.org/plugins/plugin-access#å¯ç”¨æ–¹å¼"><span>å¯ç”¨æ–¹å¼</span></a></li><li title="ä»‹ç»" data-depth="2" class=""><a href="plugin-access.htm#ä»‹ç»" tppabs="https://umijs.org/plugins/plugin-access#ä»‹ç»"><span>ä»‹ç»</span></a></li><li title="é…ç½®" data-depth="2" class=""><a href="plugin-access.htm#é…ç½®" tppabs="https://umijs.org/plugins/plugin-access#é…ç½®"><span>é…ç½®</span></a></li><li title="æ‰©å±•çš„è·¯ç”±é…ç½®" data-depth="3" class=""><a href="plugin-access.htm#æ‰©å±•çš„è·¯ç”±é…ç½®" tppabs="https://umijs.org/plugins/plugin-access#æ‰©å±•çš„è·¯ç”±é…ç½®"><span>æ‰©å±•çš„è·¯ç”±é…ç½®</span></a></li><li title="API" data-depth="2" class=""><a href="plugin-access.htm#api" tppabs="https://umijs.org/plugins/plugin-access#api"><span>API</span></a></li><li title="useAccess" data-depth="3" class=""><a href="plugin-access.htm#useaccess" tppabs="https://umijs.org/plugins/plugin-access#useaccess"><span>useAccess</span></a></li><li title="Access" data-depth="3" class=""><a href="plugin-access.htm#access-1" tppabs="https://umijs.org/plugins/plugin-access#access-1"><span>Access</span></a></li><li title="children" data-depth="3" class=""><a href="plugin-access.htm#children" tppabs="https://umijs.org/plugins/plugin-access#children"><span>children</span></a></li></ul><div class="__dumi-default-layout-content"><div class="__dumi-default-alert">This article has not been translated yet. Want to help us out? Click the Edit this doc on GitHub at the end of the page.</div><div class="markdown"><h1 id="umijsplugin-access"><a aria-hidden="true" href="#umijsplugin-access"><span class="icon icon-link"></span></a>@umijs/plugin-access</h1><h2 id="å¯ç”¨æ–¹å¼"><a aria-hidden="true" href="#å¯ç”¨æ–¹å¼"><span class="icon icon-link"></span></a>å¯ç”¨æ–¹å¼</h2><p>æœ‰ <code>src/access.ts</code> æ—¶å¯ç”¨ã€‚</p><h2 id="ä»‹ç»"><a aria-hidden="true" href="#ä»‹ç»"><span class="icon icon-link"></span></a>ä»‹ç»</h2><p>æˆ‘ä»¬çº¦å®šäº† <code>src/access.ts</code> ä¸ºæˆ‘ä»¬çš„æƒé™å®šä¹‰æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶éœ€è¦é»˜è®¤å¯¼å‡ºä¸€ä¸ªæ–¹æ³•ï¼Œå¯¼å‡ºçš„æ–¹æ³•ä¼šåœ¨é¡¹ç›®åˆå§‹åŒ–æ—¶è¢«æ‰§è¡Œã€‚è¯¥æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„æ¯ä¸€ä¸ªå€¼å°±å¯¹åº”å®šä¹‰äº†ä¸€æ¡æƒé™ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// src/access.ts
export default function(initialState) {
  const { userId, role } = initialState;
 
  return {
    canReadFoo: true,
    canUpdateFoo: role === &#x27;admin&#x27;,
    canDeleteFoo: foo =&gt; {
      return foo.ownerId === userId;
    },
  };
}
" data-status="copy"></button><div class="token-line"><span class="token comment">// src/access.ts</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">initialState</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> userId</span><span class="token punctuation">,</span><span class="token plain"> role </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> initialState</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    canReadFoo</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    canUpdateFoo</span><span class="token punctuation">:</span><span class="token plain"> role </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;admin&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">canDeleteFoo</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token parameter">foo</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> foo</span><span class="token punctuation">.</span><span class="token property-access">ownerId</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> userId</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>å…¶ä¸­ <code>initialState</code> æ˜¯é€šè¿‡åˆå§‹åŒ–çŠ¶æ€æ’ä»¶ <code>@umijs/plugin-initial-state</code> æä¾›çš„æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨è¯¥æ•°æ®æ¥åˆå§‹åŒ–ä½ çš„ç”¨æˆ·æƒé™ã€‚</p><h2 id="é…ç½®"><a aria-hidden="true" href="#é…ç½®"><span class="icon icon-link"></span></a>é…ç½®</h2><h3 id="æ‰©å±•çš„è·¯ç”±é…ç½®"><a aria-hidden="true" href="#æ‰©å±•çš„è·¯ç”±é…ç½®"><span class="icon icon-link"></span></a>æ‰©å±•çš„è·¯ç”±é…ç½®</h3><p>é…åˆ Layout æ’ä»¶ä½ å¯ä»¥å¾ˆç®€å•æ˜¯å®ç°é’ˆå¯¹æŸäº›é¡µç çš„æƒé™æ§åˆ¶ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œåªæœ‰æ‹¥æœ‰äº† canReadPageA ï¼ˆåœ¨ <code>src/access.ts</code> ä¸­å®šä¹‰ï¼‰æƒé™ï¼Œç”¨æˆ·æ‰å¯ä»¥è®¿é—®è¯¥é¡µé¢ã€‚å¦åˆ™ä¼šé»˜è®¤æ¸²æŸ“ Layout æ’ä»¶å†…ç½®çš„æƒé™é”™è¯¯é¡µé¢ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// config/route.ts
export const routes =  [
  {
    path: &#x27;/pageA&#x27;,
    component: &#x27;PageA&#x27;,
    access: &#x27;canReadPageA&#x27;, // æƒé™å®šä¹‰è¿”å›å€¼çš„æŸä¸ª key
  }
]
" data-status="copy"></button><div class="token-line"><span class="token comment">// config/route.ts</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> routes </span><span class="token operator">=</span><span class="token plain">  </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    path</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/pageA&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    component</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;PageA&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    access</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;canReadPageA&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// æƒé™å®šä¹‰è¿”å›å€¼çš„æŸä¸ª key</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="access"><a aria-hidden="true" href="#access"><span class="icon icon-link"></span></a>access</h4><ul><li>Type: <code>string</code></li></ul><p>å¯¹åº”çš„æƒé™åç§°ã€‚</p><h2 id="api"><a aria-hidden="true" href="#api"><span class="icon icon-link"></span></a>API</h2><h3 id="useaccess"><a aria-hidden="true" href="#useaccess"><span class="icon icon-link"></span></a>useAccess</h3><p>æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª Hooks ç”¨äºåœ¨ç»„ä»¶ä¸­è·å–æƒé™ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import React from &#x27;react&#x27;;
import { useAccess } from &#x27;umi&#x27;;

const PageA = props =&gt; {
  const { foo } = props;
  const access = useAccess();
 
  if (access.canReadFoo) {
    // å¦‚æœå¯ä»¥è¯»å– Fooï¼Œåˆ™...
  }
 
  return &lt;&gt;TODO&lt;/&gt;;
};

export default PageA;
" data-status="copy"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> useAccess </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name">PageA</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> foo </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> props</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> access </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">useAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">access</span><span class="token punctuation">.</span><span class="token property-access">canReadFoo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// å¦‚æœå¯ä»¥è¯»å– Fooï¼Œåˆ™...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token constant">TODO</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token maybe-class-name">PageA</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>é…åˆ <code>Access</code> ç»„ä»¶å¯ä»¥å¾ˆå¥½ç®€å•çš„å®ç°é¡µé¢å†…çš„å…ƒç´ çš„æƒé™æ§åˆ¶ã€‚</p><h3 id="access-1"><a aria-hidden="true" href="#access-1"><span class="icon icon-link"></span></a>Access</h3><p>å¯ä»¥åœ¨ä¸šåŠ¡ç»„ä»¶ä¸­ä½¿ç”¨æ’ä»¶æä¾›çš„ React hook <code>useAccess</code> ä»¥åŠç»„ä»¶ <code>&lt;Access /&gt;</code> å¯¹åº”ç”¨è¿›è¡Œæƒé™æ§åˆ¶äº†ã€‚ ç»„ä»¶ <code>Access</code> æ”¯æŒçš„å±æ€§å¦‚ä¸‹ï¼š</p><h4 id="accessible"><a aria-hidden="true" href="#accessible"><span class="icon icon-link"></span></a>accessible</h4><ul><li>Type: <code>boolean</code></li></ul><p>æ˜¯å¦æœ‰æƒé™ï¼Œé€šå¸¸é€šè¿‡ <code>useAccess</code>Â è·å–åä¼ å…¥è¿›æ¥ã€‚</p><h4 id="fallback"><a aria-hidden="true" href="#fallback"><span class="icon icon-link"></span></a>fallback</h4><ul><li>Type: <code>React.ReactNode</code></li></ul><p>æ— æƒé™æ—¶çš„æ˜¾ç¤ºï¼Œé»˜è®¤æ— æƒé™ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚</p><h3 id="children"><a aria-hidden="true" href="#children"><span class="icon icon-link"></span></a>children</h3><ul><li>Type: <code>React.ReactNode</code></li></ul><p>æœ‰æƒé™æ—¶çš„æ˜¾ç¤ºã€‚</p><p>å®Œæ•´ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import React from &#x27;react&#x27;;
import { useAccess, Access } from &#x27;umi&#x27;;

const PageA = props =&gt; {
  const { foo } = props;
  const access = useAccess(); // access çš„æˆå‘˜: canReadFoo, canUpdateFoo, canDeleteFoo
 
  if (access.canReadFoo) {
    // å¦‚æœå¯ä»¥è¯»å– Fooï¼Œåˆ™...
  }
 
  return (
    &lt;div&gt;
      &lt;Access
        accessible={access.canReadFoo}
        fallback={&lt;div&gt;Can not read foo content.&lt;/div&gt;}
      &gt;
        Foo content.
      &lt;/Access&gt;
      &lt;Access
        accessible={access.canUpdateFoo}
        fallback={&lt;div&gt;Can not update foo.&lt;/div&gt;}
      &gt;
        Update foo.
      &lt;/Access&gt;
      &lt;Access
        accessible={access.canDeleteFoo(foo)}
        fallback={&lt;div&gt;Can not delete foo.&lt;/div&gt;}
      &gt;
        Delete foo.
      &lt;/Access&gt;
    &lt;/div&gt;
  );
};
" data-status="copy"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> useAccess</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">Access</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name">PageA</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> foo </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> props</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> access </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">useAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// access çš„æˆå‘˜: canReadFoo, canUpdateFoo, canDeleteFoo</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">access</span><span class="token punctuation">.</span><span class="token property-access">canReadFoo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// å¦‚æœå¯ä»¥è¯»å– Fooï¼Œåˆ™...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Access</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        accessible</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">access</span><span class="token punctuation">.</span><span class="token property-access">canReadFoo</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        fallback</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Can</span><span class="token plain"> not read foo content</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">Foo</span><span class="token plain"> content</span><span class="token punctuation">.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Access</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Access</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        accessible</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">access</span><span class="token punctuation">.</span><span class="token property-access">canUpdateFoo</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        fallback</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Can</span><span class="token plain"> not update foo</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">Update</span><span class="token plain"> foo</span><span class="token punctuation">.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Access</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Access</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        accessible</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">access</span><span class="token punctuation">.</span><span class="token method function property-access">canDeleteFoo</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        fallback</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Can</span><span class="token plain"> not </span><span class="token keyword">delete</span><span class="token plain"> foo</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">Delete</span><span class="token plain"> foo</span><span class="token punctuation">.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Access</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>useAccess()</code> çš„è¿”å›å€¼ <code>access</code> å°±æ˜¯ç¬¬ä¸‰æ­¥ä¸­å®šä¹‰çš„æƒé™é›†åˆï¼Œå¯ä»¥åˆ©ç”¨å®ƒè¿›è¡Œç»„ä»¶å†…ä»£ç æ‰§è¡Œæµçš„æ§åˆ¶ã€‚ <code>&lt;Access&gt;</code> ç»„ä»¶æ‹¥æœ‰ <code>accessible</code> å’Œ <code>fallback</code> ä¸¤ä¸ªå±æ€§ï¼Œå½“ <code>accessible</code> ä¸º <code>true</code> æ—¶ä¼šæ¸²æŸ“å­ç»„ä»¶ï¼Œå½“ <code>accessible</code> ä¸º <code>false</code> ä¼šæ¸²æŸ“ <code>fallback</code> å±æ€§å¯¹åº”çš„ <code>ReactNode</code>ã€‚</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi/edit/master/docs/plugins/plugin-access.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi/edit/master/docs/plugins/plugin-access.md'" tppabs="https://github.com/umijs/umi/edit/master/docs/plugins/plugin-access.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">6/10/2020, 7:42:23 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "../../www.google-analytics.com/analytics.js"/*tpa=https://www.google-analytics.com/analytics.js*/,
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="../umi.js" tppabs="https://umijs.org/umi.js"></script>
  </body>
</html>
