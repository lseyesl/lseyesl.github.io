<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8"utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg"
    />
    <link rel="stylesheet" href="../umi.css" tppabs="https://umijs.org/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.3
    </script>
    <title>@umijs/plugin-qiankun</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="../index.htm" tppabs="https://umijs.org/">UmiJS</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="../docs.htm" tppabs="https://umijs.org/docs">Docs</a><a href="../config.htm" tppabs="https://umijs.org/config">Config</a><a href="../api.htm" tppabs="https://umijs.org/api">API</a><a href="../guide.htm" tppabs="https://umijs.org/guide">Guide</a><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/plugins">Plugins</a><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><div class="__dumi-default-locale-select" data-locale-count="2"><span>ä¸­æ–‡</span></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="../index.htm" tppabs="https://umijs.org/"></a><h1>UmiJS</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="../docs.htm" tppabs="https://umijs.org/docs">Docs</a></li><li><a href="../config.htm" tppabs="https://umijs.org/config">Config</a></li><li><a href="../api.htm" tppabs="https://umijs.org/api">API</a></li><li><a href="../guide.htm" tppabs="https://umijs.org/guide">Guide</a></li><li><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/plugins">Plugins</a></li><li><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><span>ä¸­æ–‡</span></div></div><ul class="__dumi-default-menu-list"><li><a>Presets</a><ul><li><a href="preset-react.htm" tppabs="https://umijs.org/plugins/preset-react"><span>@umijs/preset-react</span></a></li></ul></li><li><a>Plugins</a><ul><li><a href="plugin-access.htm" tppabs="https://umijs.org/plugins/plugin-access"><span>@umijs/plugin-access</span></a></li><li><a href="plugin-analytics.htm" tppabs="https://umijs.org/plugins/plugin-analytics"><span>@umijs/plugin-analytics</span></a></li><li><a href="plugin-antd.htm" tppabs="https://umijs.org/plugins/plugin-antd"><span>@umijs/plugin-antd</span></a></li><li><a href="plugin-crossorigin.htm" tppabs="https://umijs.org/plugins/plugin-crossorigin"><span>@umijs/plugin-crossorigin</span></a></li><li><a href="plugin-dva.htm" tppabs="https://umijs.org/plugins/plugin-dva"><span>@umijs/plugin-dva</span></a></li><li><a href="plugin-esbuild.htm" tppabs="https://umijs.org/plugins/plugin-esbuild"><span>@umijs/plugin-esbuild</span></a></li><li><a href="plugin-helmet.htm" tppabs="https://umijs.org/plugins/plugin-helmet"><span>@umijs/plugin-helmet</span></a></li><li><a href="plugin-initial-state.htm" tppabs="https://umijs.org/plugins/plugin-initial-state"><span>@umijs/plugin-initial-state</span></a></li><li><a href="plugin-layout.htm" tppabs="https://umijs.org/plugins/plugin-layout"><span>@umijs/plugin-layout</span></a></li><li><a href="plugin-locale.htm" tppabs="https://umijs.org/plugins/plugin-locale"><span>@umijs/plugin-locale</span></a></li><li><a href="plugin-model.htm" tppabs="https://umijs.org/plugins/plugin-model"><span>@umijs/plugin-model</span></a></li><li><a href="plugin-preact.htm" tppabs="https://umijs.org/plugins/plugin-preact"><span>@umijs/plugin-preact</span></a></li><li><a aria-current="page" class="active" href="plugin-qiankun.htm" tppabs="https://umijs.org/plugins/plugin-qiankun"><span>@umijs/plugin-qiankun</span></a></li><li><a href="plugin-request.htm" tppabs="https://umijs.org/plugins/plugin-request"><span>@umijs/plugin-request</span></a></li><li><a href="plugin-sass.htm" tppabs="https://umijs.org/plugins/plugin-sass"><span>@umijs/plugin-sass</span></a></li><li><a href="plugin-webpack-5.htm" tppabs="https://umijs.org/plugins/plugin-webpack-5"><span>@umijs/plugin-webpack-5</span></a></li></ul></li><li><a>Plugin Develop</a><ul><li><a href="api.htm" tppabs="https://umijs.org/plugins/api"><span>Plugin API</span></a></li><li><a href="test.htm" tppabs="https://umijs.org/plugins/test"><span>Plugin Test</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="Examples" data-depth="2" class=""><a href="plugin-qiankun.htm#examples" tppabs="https://umijs.org/plugins/plugin-qiankun#examples"><span>Examples</span></a></li><li title="Features" data-depth="2" class=""><a href="plugin-qiankun.htm#features" tppabs="https://umijs.org/plugins/plugin-qiankun#features"><span>Features</span></a></li><li title="Usage" data-depth="2" class=""><a href="plugin-qiankun.htm#usage" tppabs="https://umijs.org/plugins/plugin-qiankun#usage"><span>Usage</span></a></li><li title="ä¸»åº”ç”¨" data-depth="3" class=""><a href="plugin-qiankun.htm#ä¸»åº”ç”¨" tppabs="https://umijs.org/plugins/plugin-qiankun#ä¸»åº”ç”¨"><span>ä¸»åº”ç”¨</span></a></li><li title="é…ç½®åˆ—è¡¨" data-depth="3" class=""><a href="plugin-qiankun.htm#é…ç½®åˆ—è¡¨" tppabs="https://umijs.org/plugins/plugin-qiankun#é…ç½®åˆ—è¡¨"><span>é…ç½®åˆ—è¡¨</span></a></li><li title="å­åº”ç”¨" data-depth="3" class=""><a href="plugin-qiankun.htm#å­åº”ç”¨" tppabs="https://umijs.org/plugins/plugin-qiankun#å­åº”ç”¨"><span>å­åº”ç”¨</span></a></li><li title="çˆ¶å­åº”ç”¨é€šè®¯" data-depth="2" class=""><a href="plugin-qiankun.htm#çˆ¶å­åº”ç”¨é€šè®¯" tppabs="https://umijs.org/plugins/plugin-qiankun#çˆ¶å­åº”ç”¨é€šè®¯"><span>çˆ¶å­åº”ç”¨é€šè®¯</span></a></li><li title="åŸºäº props ä¼ é€’" data-depth="3" class=""><a href="plugin-qiankun.htm#åŸºäº-props-ä¼ é€’" tppabs="https://umijs.org/plugins/plugin-qiankun#åŸºäº-props-ä¼ é€’"><span>åŸºäº props ä¼ é€’</span></a></li><li title="åŸºäº Hooks å…±äº«æ•°æ®" data-depth="3" class=""><a href="plugin-qiankun.htm#åŸºäº-hooks-å…±äº«æ•°æ®" tppabs="https://umijs.org/plugins/plugin-qiankun#åŸºäº-hooks-å…±äº«æ•°æ®"><span>åŸºäº Hooks å…±äº«æ•°æ®</span></a></li><li title="å­åº”ç”¨è¿è¡Œæ—¶é…ç½®" data-depth="2" class=""><a href="plugin-qiankun.htm#å­åº”ç”¨è¿è¡Œæ—¶é…ç½®" tppabs="https://umijs.org/plugins/plugin-qiankun#å­åº”ç”¨è¿è¡Œæ—¶é…ç½®"><span>å­åº”ç”¨è¿è¡Œæ—¶é…ç½®</span></a></li><li title="ç›¸å…³" data-depth="2" class=""><a href="plugin-qiankun.htm#ç›¸å…³" tppabs="https://umijs.org/plugins/plugin-qiankun#ç›¸å…³"><span>ç›¸å…³</span></a></li></ul><div class="__dumi-default-layout-content"><div class="__dumi-default-alert">This article has not been translated yet. Want to help us out? Click the Edit this doc on GitHub at the end of the page.</div><div class="markdown"><h1 id="umijsplugin-qiankun"><a aria-hidden="true" href="#umijsplugin-qiankun"><span class="icon icon-link"></span></a>@umijs/plugin-qiankun</h1><p>Umi plugin for <a href="javascript:if(confirm('https://github.com/umijs/qiankun  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/qiankun'" tppabs="https://github.com/umijs/qiankun" target="_blank">qiankun<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="examples"><a aria-hidden="true" href="#examples"><span class="icon icon-link"></span></a>Examples</h2><p>å¯¼èˆªæ˜¯ä¸»åº”ç”¨ï¼ŒApp1 å’Œ App2 æ˜¯å­åº”ç”¨ï¼Œ</p><p><img src="../../img.alicdn.com/tfs/TB1ZMxEwKH2gK0jSZJnXXaT1FXa-1040-619.gif" tppabs="https://img.alicdn.com/tfs/TB1ZMxEwKH2gK0jSZJnXXaT1FXa-1040-619.gif"/></p><h2 id="features"><a aria-hidden="true" href="#features"><span class="icon icon-link"></span></a>Features</h2><ul><li>âœ”ï¸ åŸºäº qiankun</li><li>âœ”ï¸ æ”¯æŒä¸»åº”ç”¨å’Œå­åº”ç”¨éƒ½ç”¨ umi</li><li>âœ”ï¸ æ”¯æŒä¸»å­åº”ç”¨ browserã€hash ç­‰å¤šç§ history æ¨¡å¼</li><li>âœ”ï¸ çˆ¶å­åº”ç”¨é€šè®¯</li><li>âœ”ï¸ å­åº”ç”¨è¿è¡Œæ—¶é…ç½®è‡ªå®šä¹‰ <code>bootstrap()</code>ã€<code>mount()</code> å’Œ <code>unmount()</code></li><li>âœ”ï¸ ä¸»åº”ç”¨ã€å­åº”ç”¨è”è°ƒ</li></ul><h2 id="usage"><a aria-hidden="true" href="#usage"><span class="icon icon-link"></span></a>Usage</h2><h3 id="ä¸»åº”ç”¨"><a aria-hidden="true" href="#ä¸»åº”ç”¨"><span class="icon icon-link"></span></a>ä¸»åº”ç”¨</h3><h4 id="æ„å»ºæœŸ"><a aria-hidden="true" href="#æ„å»ºæœŸ"><span class="icon icon-link"></span></a>æ„å»ºæœŸ</h4><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export default {
  qiankun: {
    master: {
      // æ³¨å†Œå­åº”ç”¨ä¿¡æ¯
      apps: [
        {
          name: &#x27;app1&#x27;, // å”¯ä¸€ id
          entry: &#x27;//localhost:7001&#x27;, // html entry
          base: &#x27;/app1&#x27;, // app1 çš„è·¯ç”±å‰ç¼€ï¼Œé€šè¿‡è¿™ä¸ªå‰ç¼€åˆ¤æ–­æ˜¯å¦è¦å¯åŠ¨è¯¥åº”ç”¨ï¼Œé€šå¸¸è·Ÿå­åº”ç”¨çš„ base ä¿æŒä¸€è‡´
          history: &#x27;browser&#x27;, // å­åº”ç”¨çš„ history é…ç½®ï¼Œé»˜è®¤ä¸ºå½“å‰ä¸»åº”ç”¨ history é…ç½®
        },
        {
          name: &#x27;app2&#x27;,
          entry: {
            // TODO æ”¯æŒ config entry
            scripts: [],
            styles: [],
          },
          base: &#x27;/app2&#x27;,
        },
      ],
      jsSandbox: true, // æ˜¯å¦å¯ç”¨ js æ²™ç®±ï¼Œé»˜è®¤ä¸º false
      prefetch: true, // æ˜¯å¦å¯ç”¨ prefetch ç‰¹æ€§ï¼Œé»˜è®¤ä¸º true
    },
  },
};
" data-status="copy"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  qiankun</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    master</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// æ³¨å†Œå­åº”ç”¨ä¿¡æ¯</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      apps</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// å”¯ä¸€ id</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:7001&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// html entry</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          base</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// app1 çš„è·¯ç”±å‰ç¼€ï¼Œé€šè¿‡è¿™ä¸ªå‰ç¼€åˆ¤æ–­æ˜¯å¦è¦å¯åŠ¨è¯¥åº”ç”¨ï¼Œé€šå¸¸è·Ÿå­åº”ç”¨çš„ base ä¿æŒä¸€è‡´</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          history</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;browser&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// å­åº”ç”¨çš„ history é…ç½®ï¼Œé»˜è®¤ä¸ºå½“å‰ä¸»åº”ç”¨ history é…ç½®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;app2&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token comment">// TODO æ”¯æŒ config entry</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            scripts</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            styles</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          base</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/app2&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      jsSandbox</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// æ˜¯å¦å¯ç”¨ js æ²™ç®±ï¼Œé»˜è®¤ä¸º false</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      prefetch</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// æ˜¯å¦å¯ç”¨ prefetch ç‰¹æ€§ï¼Œé»˜è®¤ä¸º true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>Note: å½“ä¸»åº”ç”¨è·Ÿå­åº”ç”¨çš„ history æ¨¡å¼ä¸€è‡´æ—¶ï¼ˆæ¯”å¦‚éƒ½æ˜¯ browser æˆ– hashï¼‰ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸€äº›ç©ºè·¯ç”±æ¥é¿å… 404ï¼Œæ‰€ä»¥å»ºè®®ä¸»åº”ç”¨è·Ÿå­åº”ç”¨ä½¿ç”¨ç›¸åŒçš„ history modeï¼Œå¦åˆ™éœ€è¦è‡ªå·±å¤„ç†è¿™äº›æƒ…å†µã€‚</p><h4 id="è¿è¡Œæ—¶"><a aria-hidden="true" href="#è¿è¡Œæ—¶"><span class="icon icon-link"></span></a>è¿è¡Œæ—¶</h4><h5 id="1-srcappjs-é‡Œé…ç½®"><a aria-hidden="true" href="#1-srcappjs-é‡Œé…ç½®"><span class="icon icon-link"></span></a>1. src/app.js é‡Œé…ç½®</h5><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// ä»æ¥å£ä¸­è·å–å­åº”ç”¨é…ç½®ï¼Œexport å‡ºçš„ qiankun å˜é‡æ˜¯ä¸€ä¸ª promise
export const qiankun = fetch(&#x27;/config&#x27;).then(({ apps }) =&gt; ({
  // æ³¨å†Œå­åº”ç”¨ä¿¡æ¯
  apps,
  jsSandbox: true, // æ˜¯å¦å¯ç”¨ js æ²™ç®±ï¼Œé»˜è®¤ä¸º false
  prefetch: true, // æ˜¯å¦å¯ç”¨ prefetch ç‰¹æ€§ï¼Œé»˜è®¤ä¸º true
  lifeCycles: {
    // see https://github.com/umijs/qiankun#registermicroapps
    afterMount: props =&gt; {
      console.log(props);
    },
  },
  // ...even more options qiankun start() supported, see https://github.com/umijs/qiankun#start
}));
" data-status="copy"></button><div class="token-line"><span class="token comment">// ä»æ¥å£ä¸­è·å–å­åº”ç”¨é…ç½®ï¼Œexport å‡ºçš„ qiankun å˜é‡æ˜¯ä¸€ä¸ª promise</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> qiankun </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;/config&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> apps </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// æ³¨å†Œå­åº”ç”¨ä¿¡æ¯</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  apps</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  jsSandbox</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// æ˜¯å¦å¯ç”¨ js æ²™ç®±ï¼Œé»˜è®¤ä¸º false</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  prefetch</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// æ˜¯å¦å¯ç”¨ prefetch ç‰¹æ€§ï¼Œé»˜è®¤ä¸º true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  lifeCycles</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// see https://github.com/umijs/qiankun#registermicroapps</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">afterMount</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">props</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...even more options qiankun start() supported, see https://github.com/umijs/qiankun#start</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="2-æ·»åŠ å­åº”ç”¨è·¯ç”±"><a aria-hidden="true" href="#2-æ·»åŠ å­åº”ç”¨è·¯ç”±"><span class="icon icon-link"></span></a>2. æ·»åŠ å­åº”ç”¨è·¯ç”±</h5><p>ç”±äº umi ä¸æ”¯æŒåœ¨åº”ç”¨ render ä¹‹åä¿®æ”¹è·¯ç”±ï¼Œæ•…è¿è¡Œæ—¶é…ç½®æ–¹å¼æ’ä»¶æ— æ³•è‡ªåŠ¨ç”Ÿæˆå­åº”ç”¨ç›¸å…³è·¯ç”±ï¼Œï¼ˆè§<a href="javascript:if(confirm('https://github.com/umijs/umi-plugin-qiankun/blob/master/src/master/index.ts  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-plugin-qiankun/blob/master/src/master/index.ts#L34'" tppabs="https://github.com/umijs/umi-plugin-qiankun/blob/master/src/master/index.ts#L34" target="_blank">ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼‰ã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ·»åŠ å­åº”ç”¨ç›¸å…³è·¯ç”±é…ç½®é¿å… 404 æƒ…å†µï¼š</p><h6 id="21-ä¸»åº”ç”¨æ–°å»º-pagessubappcontainerjs"><a aria-hidden="true" href="#21-ä¸»åº”ç”¨æ–°å»º-pagessubappcontainerjs"><span class="icon icon-link"></span></a>2.1 ä¸»åº”ç”¨æ–°å»º pages/subAppContainer.js</h6><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import React from &#x27;react&#x27;;

export default function() {
  return &lt;div /&gt;;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">div </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h6 id="22-æ–°å»º-pagessubappcontainerjs"><a aria-hidden="true" href="#22-æ–°å»º-pagessubappcontainerjs"><span class="icon icon-link"></span></a>2.2 æ–°å»º pages/subAppContainer.js</h6><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// ä¸»åº”ç”¨ config.js ä¸­æ·»åŠ å­åº”ç”¨ç›¸å…³è·¯ç”±é…ç½®
export default {
  routes: [
    { path: &#x27;/app1&#x27;, exact: true, component: &#x27;subAppContainer&#x27; },
    { path: &#x27;/app2&#x27;, exact: true, component: &#x27;subAppContainer&#x27; },
  ],
};
" data-status="copy"></button><div class="token-line"><span class="token comment">// ä¸»åº”ç”¨ config.js ä¸­æ·»åŠ å­åº”ç”¨ç›¸å…³è·¯ç”±é…ç½®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  routes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> exact</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> component</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;subAppContainer&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/app2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> exact</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> component</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;subAppContainer&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="é…ç½®åˆ—è¡¨"><a aria-hidden="true" href="#é…ç½®åˆ—è¡¨"><span class="icon icon-link"></span></a>é…ç½®åˆ—è¡¨</h3><table><thead><tr><th>é…ç½®</th><th>è¯´æ˜</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…å¡«</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>apps</td><td>å­åº”ç”¨é…ç½®</td><td>App[]</td><td>æ˜¯</td><td></td></tr><tr><td>jsSandbox</td><td>æ˜¯å¦å¯ç”¨ js æ²™ç®±</td><td>boolean</td><td>å¦</td><td>false</td></tr><tr><td>prefetch</td><td>æ˜¯å¦å¯ç”¨ prefetch ç‰¹æ€§</td><td>boolean</td><td>å¦</td><td>true</td></tr><tr><td>defer</td><td>æ˜¯å¦å¼‚æ­¥æ¸²æŸ“ï¼Œæ¯”å¦‚å­åº”ç”¨çš„æ¸²æŸ“å®¹å™¨ä¾èµ–ä¸»åº”ç”¨ç”Ÿæˆçš„èŠ‚ç‚¹ï¼Œè€Œä¸»åº”ç”¨ç”Ÿæˆè¯¥èŠ‚ç‚¹çš„è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ã€‚<br/>å½“è¯¥é…ç½®å¼€å¯çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ <code>import <!-- -->{<!-- --> qiankunStart <!-- -->}<!-- --> from &#x27;umi&#x27;</code> api é€šçŸ¥ qiankun å¯åŠ¨ã€‚å‚è€ƒ <a href="javascript:if(confirm('https://github.com/umijs/umi-plugin-qiankun/blob/master/examples/master/models/base.js  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-plugin-qiankun/blob/master/examples/master/models/base.js#L35'" tppabs="https://github.com/umijs/umi-plugin-qiankun/blob/master/examples/master/models/base.js#L35" target="_blank">example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td><td>boolean</td><td>å¦</td><td>false</td></tr></tbody></table><p><a href="javascript:if(confirm('https://github.com/umijs/qiankun  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/qiankun#start'" tppabs="https://github.com/umijs/qiankun#start" target="_blank">qiankun start<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ–¹æ³•å…¶ä»–å¯æ¥æ”¶çš„å‚æ•°åœ¨è¿™é‡Œä¹Ÿéƒ½å¯ä»¥é…ç½®</p><h4 id="app"><a aria-hidden="true" href="#app"><span class="icon icon-link"></span></a>App</h4><table><thead><tr><th>é…ç½®</th><th>è¯´æ˜</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…å¡«</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>name</td><td>å­åº”ç”¨å”¯ä¸€ id</td><td>string</td><td>æ˜¯</td><td></td></tr><tr><td>entry</td><td>å­åº”ç”¨ html åœ°å€</td><td>string | <!-- -->{<!-- --> script: string[], styles: [] <!-- -->}</td><td>æ˜¯</td><td></td></tr><tr><td>base</td><td>å­åº”ç”¨è·¯ç”±å‰ç¼€ï¼Œé€šå¸¸è·Ÿå­åº”ç”¨çš„ <a href="../config/index.htm#base" tppabs="https://umijs.org/config/#base" target="_blank">base é…ç½®<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä¸€è‡´ï¼Œæ¡†æ¶ä¼šä»¥è¿™ä¸ªé…ç½®ä½œä¸ºå‰ç¼€åˆ¤æ–­æ˜¯å¦æ¿€æ´»å½“å‰åº”ç”¨ï¼Œæ”¯æŒé…ç½®ä¸€ç»„å‰ç¼€</td><td>string | string[]</td><td>æ˜¯</td><td></td></tr><tr><td>history</td><td><a href="../config/index.htm#history" tppabs="https://umijs.org/config/#history" target="_blank">umi history mode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td><td>string</td><td>å¦</td><td>ä¸»åº”ç”¨ history é…ç½®</td></tr><tr><td>mountElementId</td><td>å­åº”ç”¨æŒ‚è½½åˆ°ä¸»åº”ç”¨çš„å“ªä¸ª id èŠ‚ç‚¹ä¸Šï¼ˆæ³¨æ„ä¸è¦è·Ÿå­åº”ç”¨çš„ mountElementId ä¸€è‡´ï¼‰</td><td>string</td><td>å¦</td><td>root-subapp</td></tr><tr><td>props</td><td>ä¸»åº”ç”¨ä¼ é€’ç»™å­åº”ç”¨çš„æ•°æ®</td><td>object</td><td>å¦</td><td>{}</td></tr></tbody></table><h3 id="å­åº”ç”¨"><a aria-hidden="true" href="#å­åº”ç”¨"><span class="icon icon-link"></span></a>å­åº”ç”¨</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export default {
  base: `/${appName}`, // å­åº”ç”¨çš„ baseï¼Œé»˜è®¤ä¸º package.json ä¸­çš„ name å­—æ®µ
  qiankun: { slave: {} },
};
" data-status="copy"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  base</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">appName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// å­åº”ç”¨çš„ baseï¼Œé»˜è®¤ä¸º package.json ä¸­çš„ name å­—æ®µ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  qiankun</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> slave</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>å¦‚æœå­åº”ç”¨é…ç½®é¡¹ä¸ºç©ºï¼Œå³ slave: <!-- -->{}<!-- -->ï¼Œåˆ™å¯ä»¥çœç•¥é…ç½®ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export default {
  base: `/${appName}`, // å­åº”ç”¨çš„ baseï¼Œé»˜è®¤ä¸º package.json ä¸­çš„ name å­—æ®µ
  qiankun: {},
};
" data-status="copy"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  base</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">appName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// å­åº”ç”¨çš„ baseï¼Œé»˜è®¤ä¸º package.json ä¸­çš„ name å­—æ®µ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  qiankun</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="ç¯å¢ƒå˜é‡é…ç½®"><a aria-hidden="true" href="#ç¯å¢ƒå˜é‡é…ç½®"><span class="icon icon-link"></span></a>ç¯å¢ƒå˜é‡é…ç½®</h4><p>ä¸ºäº†è·å¾—æ›´å¥½åœ°æœ¬åœ°å¼€å‘åŠè°ƒè¯•ä½“éªŒï¼Œæˆ‘ä»¬å»ºè®®æ‚¨æå‰åœ¨å­åº”ç”¨ä¸­æŒ‡å®šåº”ç”¨å¯åŠ¨çš„å…·ä½“ç«¯å£å·ï¼Œå¦‚é€šè¿‡<code>.env</code>æŒ‡å®š</p><div class="__dumi-default-code-block"><pre class="prism-code language-yml"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="PORT=8081
" data-status="copy"></button><div class="token-line"><span class="token plain">PORT=8081</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>è¯¦ç»†é…ç½®å‚è€ƒï¼š<a href="../zh/guide/env-variables.html#port" tppabs="https://umijs.org/zh/guide/env-variables.html#port" target="_blank">https://umijs.org/zh/guide/env-variables.html#port<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h2 id="çˆ¶å­åº”ç”¨é€šè®¯"><a aria-hidden="true" href="#çˆ¶å­åº”ç”¨é€šè®¯"><span class="icon icon-link"></span></a>çˆ¶å­åº”ç”¨é€šè®¯</h2><p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°</p><h3 id="åŸºäº-props-ä¼ é€’"><a aria-hidden="true" href="#åŸºäº-props-ä¼ é€’"><span class="icon icon-link"></span></a>åŸºäº props ä¼ é€’</h3><p>ç±»ä¼¼ react ä¸­ç»„ä»¶é—´é€šä¿¡çš„æ–¹æ¡ˆ</p><ol><li><p>ä¸»åº”ç”¨ä¸­é…ç½® apps æ—¶ä»¥ props å°†æ•°æ®ä¼ é€’ä¸‹å»ï¼ˆå‚è€ƒä¸»åº”ç”¨è¿è¡Œæ—¶é…ç½®ä¸€èŠ‚ï¼‰</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// src/app.js

export const qiankun = fetch(&#x27;/config&#x27;).then(config =&gt; {
  return {
    apps: [
      {
        name: &#x27;app1&#x27;,
        entry: &#x27;//localhost:2222&#x27;,
        base: &#x27;/app1&#x27;,
        props: {
          onClick: event =&gt; console.log(event),
          ...config,
        },
      },
    ],
  };
});
" data-status="copy"></button><div class="token-line"><span class="token comment">// src/app.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> qiankun </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;/config&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    apps</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:2222&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        base</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        props</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token function-variable function">onClick</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token parameter">event</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">event</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token spread operator">...</span><span class="token plain">config</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li><li><p>å­åº”ç”¨åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è·å– props æ¶ˆè´¹æ•°æ®ï¼ˆå‚è€ƒå­åº”ç”¨è¿è¡Œæ—¶é…ç½®ä¸€èŠ‚ï¼‰</p></li></ol><h3 id="åŸºäº-hooks-å…±äº«æ•°æ®"><a aria-hidden="true" href="#åŸºäº-hooks-å…±äº«æ•°æ®"><span class="icon icon-link"></span></a>åŸºäº Hooks å…±äº«æ•°æ®</h3><p>ç”±äºæ–¹æ¡ˆåŸºäº react hookï¼Œæ‰€ä»¥åªèƒ½åœ¨ functional component ä¸­ä½¿ç”¨ç›¸å…³ apiï¼Œæ— æ³•åœ¨ class component ä¸­ä½¿ç”¨ã€‚</p><ol><li>çº¦å®šçˆ¶åº”ç”¨ä¸­åœ¨ <code>src/rootExports.js</code> é‡Œ export å†…å®¹</li><li>å­åº”ç”¨ä¸­é€šè¿‡ <code>import <!-- -->{<!-- --> useRootExports <!-- -->}<!-- --> from &#x27;umi&#x27;; const rootExports = useRootExports();</code> å–åˆ°</li></ol><h2 id="å­åº”ç”¨è¿è¡Œæ—¶é…ç½®"><a aria-hidden="true" href="#å­åº”ç”¨è¿è¡Œæ—¶é…ç½®"><span class="icon icon-link"></span></a>å­åº”ç”¨è¿è¡Œæ—¶é…ç½®</h2><p>åœ¨å­åº”ç”¨çš„ <code>src/app.js</code> é‡Œè¾“å‡º <code>qiankun</code>ï¼Œ<code>props</code> ç”±ä¸»åº”ç”¨æ³¨å†Œå­åº”ç”¨æ—¶æä¾›</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export const qiankun = {
  // åº”ç”¨åŠ è½½ä¹‹å‰
  async bootstrap(props) {
    console.log(&#x27;app1 bootstrap&#x27;, props);
  },
  // åº”ç”¨ render ä¹‹å‰è§¦å‘
  async mount(props) {
    console.log(&#x27;app1 mount&#x27;, props);
  },
  // åº”ç”¨å¸è½½ä¹‹åè§¦å‘
  async unmount(props) {
    console.log(&#x27;app1 unmount&#x27;, props);
  },
};
" data-status="copy"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> qiankun </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// åº”ç”¨åŠ è½½ä¹‹å‰</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;app1 bootstrap&#x27;</span><span class="token punctuation">,</span><span class="token plain"> props</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// åº”ç”¨ render ä¹‹å‰è§¦å‘</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;app1 mount&#x27;</span><span class="token punctuation">,</span><span class="token plain"> props</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// åº”ç”¨å¸è½½ä¹‹åè§¦å‘</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token function">unmount</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;app1 unmount&#x27;</span><span class="token punctuation">,</span><span class="token plain"> props</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="ç›¸å…³"><a aria-hidden="true" href="#ç›¸å…³"><span class="icon icon-link"></span></a>ç›¸å…³</h2><ul><li><a href="javascript:if(confirm('https://github.com/umijs/rfcs/pull/3  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/rfcs/pull/3'" tppabs="https://github.com/umijs/rfcs/pull/3" target="_blank">RFC: å¾®å‰ç«¯ï¼ˆ@umijs/plugin-qiankunï¼‰ by sorrycc Â· Pull Request #3 Â· umijs/rfcs Â· GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="javascript:if(confirm('https://github.com/umijs/umi-example-monorepo  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-example-monorepo'" tppabs="https://github.com/umijs/umi-example-monorepo" target="_blank">umi-example-monorepo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä¹‹å‰å°è¯•çš„å¦ä¸€ç§ç®€å•ç²—ç³™çš„å¾®å‰ç«¯è¯•éªŒ</li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi/edit/master/docs/plugins/plugin-qiankun.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi/edit/master/docs/plugins/plugin-qiankun.md'" tppabs="https://github.com/umijs/umi/edit/master/docs/plugins/plugin-qiankun.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">6/10/2020, 7:42:23 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "../../www.google-analytics.com/analytics.js"/*tpa=https://www.google-analytics.com/analytics.js*/,
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="../umi.js" tppabs="https://umijs.org/umi.js"></script>
  </body>
</html>
