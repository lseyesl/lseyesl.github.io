<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8"utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg"
    />
    <link rel="stylesheet" href="../../umi.css" tppabs="https://umijs.org/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.3
    </script>
    <title>@umijs/plugin-request</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="../../zh-CN.htm" tppabs="https://umijs.org/zh-CN">UmiJS</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="../docs.htm" tppabs="https://umijs.org/zh-CN/docs">æ–‡æ¡£</a><a href="../config.htm" tppabs="https://umijs.org/zh-CN/config">é…ç½®</a><a href="../api.htm" tppabs="https://umijs.org/zh-CN/api">API</a><a href="../guide.htm" tppabs="https://umijs.org/zh-CN/guide">æŒ‡å—</a><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/zh-CN/plugins">æ’ä»¶</a><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><div class="__dumi-default-locale-select" data-locale-count="2"><span>English</span></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="../../zh-CN.htm" tppabs="https://umijs.org/zh-CN"></a><h1>UmiJS</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="../docs.htm" tppabs="https://umijs.org/zh-CN/docs">æ–‡æ¡£</a></li><li><a href="../config.htm" tppabs="https://umijs.org/zh-CN/config">é…ç½®</a></li><li><a href="../api.htm" tppabs="https://umijs.org/zh-CN/api">API</a></li><li><a href="../guide.htm" tppabs="https://umijs.org/zh-CN/guide">æŒ‡å—</a></li><li><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/zh-CN/plugins">æ’ä»¶</a></li><li><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><span>English</span></div></div><ul class="__dumi-default-menu-list"><li><a>Presets</a><ul><li><a href="preset-react.htm" tppabs="https://umijs.org/zh-CN/plugins/preset-react"><span>@umijs/preset-react</span></a></li></ul></li><li><a>Plugins</a><ul><li><a href="plugin-access.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-access"><span>@umijs/plugin-access</span></a></li><li><a href="plugin-analytics.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-analytics"><span>@umijs/plugin-analytics</span></a></li><li><a href="plugin-antd.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-antd"><span>@umijs/plugin-antd</span></a></li><li><a href="plugin-crossorigin.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-crossorigin"><span>@umijs/plugin-crossorigin</span></a></li><li><a href="plugin-dva.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-dva"><span>@umijs/plugin-dva</span></a></li><li><a href="plugin-esbuild.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-esbuild"><span>@umijs/plugin-esbuild</span></a></li><li><a href="plugin-helmet.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-helmet"><span>@umijs/plugin-helmet</span></a></li><li><a href="plugin-initial-state.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-initial-state"><span>@umijs/plugin-initial-state</span></a></li><li><a href="plugin-layout.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-layout"><span>@umijs/plugin-layout</span></a></li><li><a href="plugin-locale.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-locale"><span>@umijs/plugin-locale</span></a></li><li><a href="plugin-model.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-model"><span>@umijs/plugin-model</span></a></li><li><a href="plugin-preact.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-preact"><span>@umijs/plugin-preact</span></a></li><li><a href="plugin-qiankun.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-qiankun"><span>@umijs/plugin-qiankun</span></a></li><li><a aria-current="page" class="active" href="plugin-request.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-request"><span>@umijs/plugin-request</span></a></li><li><a href="plugin-sass.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-sass"><span>@umijs/plugin-sass</span></a></li><li><a href="plugin-webpack-5.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-webpack-5"><span>@umijs/plugin-webpack-5</span></a></li></ul></li><li><a>æ’ä»¶å¼€å‘</a><ul><li><a href="api.htm" tppabs="https://umijs.org/zh-CN/plugins/api"><span>æ’ä»¶ API</span></a></li><li><a href="test.htm" tppabs="https://umijs.org/zh-CN/plugins/test"><span>æ’ä»¶æµ‹è¯•</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="å¯ç”¨æ–¹å¼" data-depth="2" class=""><a href="plugin-request.htm#å¯ç”¨æ–¹å¼" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#å¯ç”¨æ–¹å¼"><span>å¯ç”¨æ–¹å¼</span></a></li><li title="ä»‹ç»" data-depth="2" class=""><a href="plugin-request.htm#ä»‹ç»" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#ä»‹ç»"><span>ä»‹ç»</span></a></li><li title="é…ç½®" data-depth="2" class=""><a href="plugin-request.htm#é…ç½®" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#é…ç½®"><span>é…ç½®</span></a></li><li title="æ„å»ºæ—¶é…ç½®" data-depth="3" class=""><a href="plugin-request.htm#æ„å»ºæ—¶é…ç½®" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#æ„å»ºæ—¶é…ç½®"><span>æ„å»ºæ—¶é…ç½®</span></a></li><li title="è¿è¡Œæ—¶é…ç½®" data-depth="3" class=""><a href="plugin-request.htm#è¿è¡Œæ—¶é…ç½®" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#è¿è¡Œæ—¶é…ç½®"><span>è¿è¡Œæ—¶é…ç½®</span></a></li><li title="API" data-depth="2" class=""><a href="plugin-request.htm#api" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#api"><span>API</span></a></li><li title="useRequest" data-depth="3" class=""><a href="plugin-request.htm#userequest" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#userequest"><span>useRequest</span></a></li><li title="request" data-depth="3" class=""><a href="plugin-request.htm#request" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#request"><span>request</span></a></li><li title="RequestConfig" data-depth="3" class=""><a href="plugin-request.htm#requestconfig" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#requestconfig"><span>RequestConfig</span></a></li><li title="ErrorShowType" data-depth="3" class=""><a href="plugin-request.htm#errorshowtype" tppabs="https://umijs.org/zh-CN/plugins/plugin-request#errorshowtype"><span>ErrorShowType</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="umijsplugin-request"><a aria-hidden="true" href="#umijsplugin-request"><span class="icon icon-link"></span></a>@umijs/plugin-request</h1><p><code>@umijs/plugin-request</code> åŸºäº <a href="javascript:if(confirm('https://github.com/umijs/umi-request  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-request'" tppabs="https://github.com/umijs/umi-request" target="_blank">umi-request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å’Œ <a href="javascript:if(confirm('https://github.com/umijs/hooks  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/hooks'" tppabs="https://github.com/umijs/hooks" target="_blank">@umijs/hooks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„ <code>useRequest</code> æä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„ç½‘ç»œè¯·æ±‚å’Œé”™è¯¯å¤„ç†æ–¹æ¡ˆã€‚</p><h2 id="å¯ç”¨æ–¹å¼"><a aria-hidden="true" href="#å¯ç”¨æ–¹å¼"><span class="icon icon-link"></span></a>å¯ç”¨æ–¹å¼</h2><p>é»˜è®¤å¯ç”¨ã€‚</p><h2 id="ä»‹ç»"><a aria-hidden="true" href="#ä»‹ç»"><span class="icon icon-link"></span></a>ä»‹ç»</h2><p>é”™è¯¯å¤„ç†æ˜¯æ‰€æœ‰é¡¹ç›®éƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬çº¦å®šäº†ä¸€ä¸ªæ¥å£æ ¼å¼è§„èŒƒå¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface ErrorInfoStructure {
  success: boolean; // if request is success
  data?: any; // response data
  errorCode?: string; // code for errorType
  errorMessage?: string; // message display to user 
  showType?: number; // error display typeï¼š 0 silent; 1 message.warn; 2 message.error; 4 notification; 9 page
  traceId?: string; // Convenient for back-end Troubleshooting: unique request ID
  host?: string; // onvenient for backend Troubleshooting: host of current access server
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">ErrorInfoStructure</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  success</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// if request is success</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  data</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// response data</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  errorCode</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// code for errorType</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  errorMessage</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// message display to user </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  showType</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// error display typeï¼š 0 silent; 1 message.warn; 2 message.error; 4 notification; 9 page</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  traceId</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// Convenient for back-end Troubleshooting: unique request ID</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  host</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// onvenient for backend Troubleshooting: host of current access server</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>åç«¯æ¥å£è§„èŒƒä¸æ»¡è¶³çš„æƒ…å†µä¸‹ä½ å¯ä»¥é€šè¿‡é…ç½® <code>errorConfig.adaptor</code> æ¥åšé€‚é…ã€‚å½“ <code>success</code> è¿”å›æ˜¯ <code>false</code> çš„æƒ…å†µæˆ‘ä»¬ä¼šæŒ‰ç…§ <code>showType</code> å’Œ <code>errorMessage</code> æ¥åšç»Ÿä¸€çš„é”™è¯¯æç¤ºï¼ŒåŒæ—¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p><p>æŠ›å‡ºçš„å¼‚å¸¸çš„æ ¼å¼ä¸ºï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface RequestError extends Error {
  data?: any; // è¿™é‡Œæ˜¯åç«¯è¿”å›çš„åŸå§‹æ•°æ®
  info?: ErrorInfoStructure;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">RequestError</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  data</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// è¿™é‡Œæ˜¯åç«¯è¿”å›çš„åŸå§‹æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  info</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">ErrorInfoStructure</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>å¦å¤–ä½ å¯ä»¥é€šè¿‡ <code>Error.name</code> æ˜¯å¦æ˜¯ <code>BizError</code> æ¥åˆ¤æ–­æ˜¯å¦æ˜¯å› ä¸º <code>success</code> ä¸º <code>false</code> æŠ›å‡ºçš„é”™è¯¯ã€‚</p><h2 id="é…ç½®"><a aria-hidden="true" href="#é…ç½®"><span class="icon icon-link"></span></a>é…ç½®</h2><h3 id="æ„å»ºæ—¶é…ç½®"><a aria-hidden="true" href="#æ„å»ºæ—¶é…ç½®"><span class="icon icon-link"></span></a>æ„å»ºæ—¶é…ç½®</h3><p>å½“å‰æ”¯æŒçš„æ„å»ºæ—¶é…ç½®å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export default {
  request: {
    dataField: &#x27;data&#x27;,
  },
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  request</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    dataField</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;data&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="datafield"><a aria-hidden="true" href="#datafield"><span class="icon icon-link"></span></a>dataField</h4><ul><li>Type: <code>string</code></li></ul><p><code>dataField</code> å¯¹åº”æ¥å£ç»Ÿä¸€æ ¼å¼ä¸­çš„æ•°æ®å­—æ®µï¼Œæ¯”å¦‚æ¥å£å¦‚æœç»Ÿä¸€çš„è§„èŒƒæ˜¯ <code>{<!-- --> success: boolean, data: any<!-- -->}</code> ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦é…ç½®ï¼Œè¿™æ ·ä½ é€šè¿‡ <code>useRequest</code> æ¶ˆè´¹çš„æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ <code>formatResult</code>ï¼Œç›´æ¥è¿”å› <code>data</code> ä¸­çš„æ•°æ®ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚å¦‚æœä½ çš„åç«¯æ¥å£ä¸ç¬¦åˆè¿™ä¸ªè§„èŒƒï¼Œå¯ä»¥è‡ªè¡Œé…ç½® <code>dataField</code> ã€‚é…ç½®ä¸º <code>&#x27;&#x27;</code> ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰çš„æ—¶å€™ä¸åšå¤„ç†ã€‚</p><h3 id="è¿è¡Œæ—¶é…ç½®"><a aria-hidden="true" href="#è¿è¡Œæ—¶é…ç½®"><span class="icon icon-link"></span></a>è¿è¡Œæ—¶é…ç½®</h3><p>åœ¨ <code>src/app.ts</code> ä¸­ä½ å¯ä»¥é…ç½®ä¸€äº›è¿è¡Œæ—¶çš„é…ç½®é¡¹æ¥å®ç°éƒ¨åˆ†è‡ªå®šä¹‰éœ€æ±‚ã€‚ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { RequestConfig } from &#x27;umi&#x27;;

export const request: RequestConfig = {
  timeout: 1000,
  errorConfig: {},
  middlewares: [],
  requestInterceptors: [],
  responseInterceptors: [],
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">RequestConfig</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> request</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">RequestConfig</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  timeout</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  errorConfig</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  middlewares</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  requestInterceptors</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  responseInterceptors</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>è¯¥é…ç½®è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚é™¤äº† <code>errorConfig</code> å’Œ <code>middlewares</code> ä»¥å¤–å…¶å®ƒé…ç½®éƒ½æ˜¯ç›´æ¥é€ä¼  <a href="javascript:if(confirm('https://github.com/umijs/umi-request  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-request'" tppabs="https://github.com/umijs/umi-request" target="_blank">umi-request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„å…¨å±€é…ç½®ã€‚</p><h4 id="errorconfigadaptor"><a aria-hidden="true" href="#errorconfigadaptor"><span class="icon icon-link"></span></a>errorConfig.adaptor</h4><p>å½“åç«¯æ¥å£ä¸æ»¡è¶³è¯¥è§„èŒƒçš„æ—¶å€™ä½ éœ€è¦é€šè¿‡è¯¥é…ç½®æŠŠåç«¯æ¥å£æ•°æ®è½¬æ¢ä¸ºè¯¥æ ¼å¼ï¼Œè¯¥é…ç½®åªæ˜¯ç”¨äºé”™è¯¯å¤„ç†ï¼Œä¸ä¼šå½±å“æœ€ç»ˆä¼ é€’ç»™é¡µé¢çš„æ•°æ®æ ¼å¼ã€‚</p><p>ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { RequestConfig } from &#x27;umi&#x27;;

export const request: RequestConfig = {
  errorConfig: {
    adaptor: (resData) =&gt; {
      return {
        ...resData,
        success: resData.ok,
        errorMessage: resData.message,
      };
    },
  },
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">RequestConfig</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> request</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">RequestConfig</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  errorConfig</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">adaptor</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">resData</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token spread operator">...</span><span class="token plain">resData</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        success</span><span class="token punctuation">:</span><span class="token plain"> resData</span><span class="token punctuation">.</span><span class="token property-access">ok</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        errorMessage</span><span class="token punctuation">:</span><span class="token plain"> resData</span><span class="token punctuation">.</span><span class="token property-access">message</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="errorconfigerrorpage"><a aria-hidden="true" href="#errorconfigerrorpage"><span class="icon icon-link"></span></a>errorConfig.errorPage</h4><p>å½“ <code>showType</code> ä¸º <code>9</code> æ—¶ï¼Œé»˜è®¤ä¼šè·³è½¬åˆ° <code>/exception</code> é¡µé¢ï¼Œä½ å¯ä»¥é€šè¿‡è¯¥é…ç½®æ¥ä¿®æ”¹è¯¥è·¯å¾„ã€‚</p><h4 id="middlewares"><a aria-hidden="true" href="#middlewares"><span class="icon icon-link"></span></a>middlewares</h4><p>umi-request æä¾›<a href="javascript:if(confirm('https://github.com/umijs/umi-request  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-request#middleware'" tppabs="https://github.com/umijs/umi-request#middleware" target="_blank">ä¸­é—´ä»¶æœºåˆ¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œä¹‹å‰æ˜¯é€šè¿‡ <code>request.use(middleware)</code> çš„æ–¹å¼å¼•å…¥ï¼Œç°åœ¨å¯ä»¥é€šè¿‡ <code>request.middlewares</code> è¿›è¡Œé…ç½®ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export const request = {
  middlewares: [
    async function middlewareA(ctx, next) {
      console.log(&#x27;A before&#x27;);
      await next();
      console.log(&#x27;A after&#x27;);
    },
    async function middlewareB(ctx, next) {
      console.log(&#x27;B before&#x27;);
      await next();
      console.log(&#x27;B after&#x27;);
    }
  ]
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> request </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  middlewares</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">middlewareA</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation">,</span><span class="token parameter"> next</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;A before&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">await</span><span class="token plain"> </span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;A after&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">middlewareB</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation">,</span><span class="token parameter"> next</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;B before&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">await</span><span class="token plain"> </span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;B after&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="requestinterceptors"><a aria-hidden="true" href="#requestinterceptors"><span class="icon icon-link"></span></a>requestInterceptors</h4><p>è¯¥é…ç½®æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹ä¸ºä¸€ä¸ª request æ‹¦æˆªå™¨ã€‚ç­‰åŒäº umi-request çš„ <code>request.interceptors.request.use()</code>ã€‚å…·ä½“è§ umi-request çš„<a href="javascript:if(confirm('https://github.com/umijs/umi-request  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-request#interceptor'" tppabs="https://github.com/umijs/umi-request#interceptor" target="_blank">æ‹¦æˆªå™¨æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p><h4 id="responseinterceptors"><a aria-hidden="true" href="#responseinterceptors"><span class="icon icon-link"></span></a>responseInterceptors</h4><p>è¯¥é…ç½®æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹ä¸ºä¸€ä¸ª response æ‹¦æˆªå™¨ã€‚ç­‰åŒäº umi-request çš„ <code>request.interceptors.response.use()</code>ã€‚å…·ä½“è§ umi-request çš„<a href="javascript:if(confirm('https://github.com/umijs/umi-request  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-request#interceptor'" tppabs="https://github.com/umijs/umi-request#interceptor" target="_blank">æ‹¦æˆªå™¨æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p><h2 id="api"><a aria-hidden="true" href="#api"><span class="icon icon-link"></span></a>API</h2><h3 id="userequest"><a aria-hidden="true" href="#userequest"><span class="icon icon-link"></span></a>useRequest</h3><p>è¯¥æ’ä»¶å†…ç½®äº† <a href="javascript:if(confirm('https://hooks.umijs.org/zh-CN/async  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://hooks.umijs.org/zh-CN/async'" tppabs="https://hooks.umijs.org/zh-CN/async" target="_blank">@umijs/use-request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶å†…é€šè¿‡è¯¥ Hook ç®€å•ä¾¿æ·çš„æ¶ˆè´¹æ•°æ®ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { useRequest } from &#x27;umi&#x27;;

export default () =&gt; {
  const { data, error, loading } = useRequest(() =&gt; {
    return services.getUserList(&#x27;/api/test&#x27;);
  });
  if (loading) {
    return &lt;div&gt;loading...&lt;/div&gt;;
  }
  if (error) {
    return &lt;div&gt;{error.message}&lt;/div&gt;;
  }
  return &lt;div&gt;{data.name}&lt;/div&gt;;
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> useRequest </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> data</span><span class="token punctuation">,</span><span class="token plain"> error</span><span class="token punctuation">,</span><span class="token plain"> loading </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> services</span><span class="token punctuation">.</span><span class="token method function property-access">getUserList</span><span class="token punctuation">(</span><span class="token string">&#x27;/api/test&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">loading</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain">loading</span><span class="token spread operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">error</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token plain">error</span><span class="token punctuation">.</span><span class="token property-access">message</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token plain">data</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æ›´å¤šé…ç½®ä½ å¯ä»¥å‚è€ƒ  <a href="javascript:if(confirm('https://hooks.umijs.org/zh-CN/async  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://hooks.umijs.org/zh-CN/async'" tppabs="https://hooks.umijs.org/zh-CN/async" target="_blank">@umijs/use-request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„æ–‡æ¡£ï¼Œç›¸æ¯”  <code>@umijs/use-request</code> æœ¬èº«ï¼Œ <code>import <!-- -->{<!-- --> useRequest <!-- -->}<!-- --> from &#x27;umi&#x27;;</code> æœ‰å¦‚ä¸‹ä¸¤ç‚¹å·®å¼‚ï¼š</p><ul><li>æŒ‰ç…§æ¥å£è¯·æ±‚è§„èŒƒå†…ç½®äº† <code>formatResult: res =&gt; res?.data</code> è®©ä½ å¯ä»¥æ›´æ–¹ä¾¿çš„ä½¿ç”¨æ•°æ®ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±é…ç½® <code>formatResult</code> æ¥è¦†ç›–å†…ç½®çš„è¿™ä¸ªé€»è¾‘ã€‚</li><li>æŒ‰ç…§æ¥å£é”™è¯¯è§„èŒƒç»Ÿä¸€äº†é”™è¯¯å¤„ç†é€»è¾‘ã€‚</li></ul><p>ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹çŸ¥ä¹ä¸“æ æ–‡ç« <a href="javascript:if(confirm('https://zhuanlan.zhihu.com/p/106796295  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://zhuanlan.zhihu.com/p/106796295'" tppabs="https://zhuanlan.zhihu.com/p/106796295" target="_blank">ã€ŠuseRequest- èš‚èšä¸­å°æ ‡å‡†è¯·æ±‚ Hooksã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>äº†è§£ useRequestã€‚</p><h3 id="request"><a aria-hidden="true" href="#request"><span class="icon icon-link"></span></a>request</h3><p>é€šè¿‡ <code>import <!-- -->{<!-- --> request <!-- -->}<!-- --> from &#x27;umi&#x27;;</code> ä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„è¯·æ±‚æ–¹æ³•ã€‚ <code>request</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>url</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„ <code>options</code>ã€‚<code>options</code> å…·ä½“æ ¼å¼å‚è€ƒ <a href="javascript:if(confirm('https://github.com/umijs/umi-request  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi-request'" tppabs="https://github.com/umijs/umi-request" target="_blank">umi-request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p><p><code>request</code> çš„å¤§éƒ¨åˆ†ç”¨æ³•ç­‰åŒäº <code>umi-request</code>ï¼Œä¸€ä¸ªä¸åŒçš„æ˜¯ <code>options</code> æ‰©å±•äº†ä¸€ä¸ªé…ç½® <code>skipErrorHandler</code>ï¼Œè¯¥é…ç½®ä¸º <code>true</code> æ˜¯ä¼šè·³è¿‡é»˜è®¤çš„é”™è¯¯å¤„ç†ï¼Œç”¨äºé¡¹ç›®ä¸­éƒ¨åˆ†ç‰¹æ®Šçš„æ¥å£ã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="request(&#x27;/api/user&#x27;, {
  params: {
    name: 1,
  },
  skipErrorHandler: true,
})
" data-status="copy"></button><div class="token-line"><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&#x27;/api/user&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  params</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  skipErrorHandler</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="requestconfig"><a aria-hidden="true" href="#requestconfig"><span class="icon icon-link"></span></a>RequestConfig</h3><p>è¿™æ˜¯ä¸€ä¸ª TypeScript å®šä¹‰ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ æ›´å¥½çš„é…ç½®è¿è¡Œæ—¶é…ç½®ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { RequestConfig } from &#x27;umi&#x27;;

export const request: RequestConfig = {};
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">RequestConfig</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> request</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">RequestConfig</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="errorshowtype"><a aria-hidden="true" href="#errorshowtype"><span class="icon icon-link"></span></a>ErrorShowType</h3><p><code>import <!-- -->{<!-- --> ErrorShowType <!-- -->}<!-- --> from &#x27;umi&#x27;;</code> è¿™æ˜¯ä¸€ä¸ª TypeScript å®šä¹‰ï¼Œå®šä¹‰äº†çº¦å®šçš„æ ¼å¼ä¸­æ”¯æŒçš„ showType çš„ç±»å‹ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export enum ErrorShowType {
  SILENT = 0, // ä¸æç¤ºé”™è¯¯
  WARN_MESSAGE = 1, // è­¦å‘Šä¿¡æ¯æç¤º
  ERROR_MESSAGE = 2, // é”™è¯¯ä¿¡æ¯æç¤º
  NOTIFICATION = 4, // é€šçŸ¥æç¤º
  REDIRECT = 9, // é¡µé¢è·³è½¬
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">enum</span><span class="token plain"> </span><span class="token maybe-class-name">ErrorShowType</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token constant">SILENT</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// ä¸æç¤ºé”™è¯¯</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token constant">WARN_MESSAGE</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// è­¦å‘Šä¿¡æ¯æç¤º</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token constant">ERROR_MESSAGE</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// é”™è¯¯ä¿¡æ¯æç¤º</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token constant">NOTIFICATION</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// é€šçŸ¥æç¤º</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token constant">REDIRECT</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">9</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// é¡µé¢è·³è½¬</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi/edit/master/docs/plugins/plugin-request.zh-CN.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi/edit/master/docs/plugins/plugin-request.zh-CN.md'" tppabs="https://github.com/umijs/umi/edit/master/docs/plugins/plugin-request.zh-CN.md">åœ¨ GitHub ä¸Šç¼–è¾‘è¿™ç¯‡æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="æœ€åæ›´æ–°æ—¶é—´ï¼š">6/10/2020, 7:42:23 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "../../../www.google-analytics.com/analytics.js"/*tpa=https://www.google-analytics.com/analytics.js*/,
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="../../umi.js" tppabs="https://umijs.org/umi.js"></script>
  </body>
</html>
