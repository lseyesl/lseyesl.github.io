<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8"utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg"
    />
    <link rel="stylesheet" href="../../umi.css" tppabs="https://umijs.org/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.3
    </script>
    <title>&#x63D2;&#x4EF6; API</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="../../zh-CN.htm" tppabs="https://umijs.org/zh-CN">UmiJS</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="../docs.htm" tppabs="https://umijs.org/zh-CN/docs">æ–‡æ¡£</a><a href="../config.htm" tppabs="https://umijs.org/zh-CN/config">é…ç½®</a><a href="../api.htm" tppabs="https://umijs.org/zh-CN/api">API</a><a href="../guide.htm" tppabs="https://umijs.org/zh-CN/guide">æŒ‡å—</a><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/zh-CN/plugins">æ’ä»¶</a><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><div class="__dumi-default-locale-select" data-locale-count="2"><span>English</span></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="../../zh-CN.htm" tppabs="https://umijs.org/zh-CN"></a><h1>UmiJS</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="../docs.htm" tppabs="https://umijs.org/zh-CN/docs">æ–‡æ¡£</a></li><li><a href="../config.htm" tppabs="https://umijs.org/zh-CN/config">é…ç½®</a></li><li><a href="../api.htm" tppabs="https://umijs.org/zh-CN/api">API</a></li><li><a href="../guide.htm" tppabs="https://umijs.org/zh-CN/guide">æŒ‡å—</a></li><li><a aria-current="page" class="active" href="../plugins.htm" tppabs="https://umijs.org/zh-CN/plugins">æ’ä»¶</a></li><li><a target="_blank" href="javascript:if(confirm('https://v2.umijs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v2.umijs.org/'" tppabs="https://v2.umijs.org/">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi'" tppabs="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><span>English</span></div></div><ul class="__dumi-default-menu-list"><li><a>Presets</a><ul><li><a href="preset-react.htm" tppabs="https://umijs.org/zh-CN/plugins/preset-react"><span>@umijs/preset-react</span></a></li></ul></li><li><a>Plugins</a><ul><li><a href="plugin-access.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-access"><span>@umijs/plugin-access</span></a></li><li><a href="plugin-analytics.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-analytics"><span>@umijs/plugin-analytics</span></a></li><li><a href="plugin-antd.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-antd"><span>@umijs/plugin-antd</span></a></li><li><a href="plugin-crossorigin.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-crossorigin"><span>@umijs/plugin-crossorigin</span></a></li><li><a href="plugin-dva.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-dva"><span>@umijs/plugin-dva</span></a></li><li><a href="plugin-esbuild.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-esbuild"><span>@umijs/plugin-esbuild</span></a></li><li><a href="plugin-helmet.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-helmet"><span>@umijs/plugin-helmet</span></a></li><li><a href="plugin-initial-state.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-initial-state"><span>@umijs/plugin-initial-state</span></a></li><li><a href="plugin-layout.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-layout"><span>@umijs/plugin-layout</span></a></li><li><a href="plugin-locale.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-locale"><span>@umijs/plugin-locale</span></a></li><li><a href="plugin-model.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-model"><span>@umijs/plugin-model</span></a></li><li><a href="plugin-preact.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-preact"><span>@umijs/plugin-preact</span></a></li><li><a href="plugin-qiankun.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-qiankun"><span>@umijs/plugin-qiankun</span></a></li><li><a href="plugin-request.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-request"><span>@umijs/plugin-request</span></a></li><li><a href="plugin-sass.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-sass"><span>@umijs/plugin-sass</span></a></li><li><a href="plugin-webpack-5.htm" tppabs="https://umijs.org/zh-CN/plugins/plugin-webpack-5"><span>@umijs/plugin-webpack-5</span></a></li></ul></li><li><a>æ’ä»¶å¼€å‘</a><ul><li><a aria-current="page" class="active" href="api.htm" tppabs="https://umijs.org/zh-CN/plugins/api"><span>æ’ä»¶ API</span></a></li><li><a href="test.htm" tppabs="https://umijs.org/zh-CN/plugins/test"><span>æ’ä»¶æµ‹è¯•</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="æ ¸å¿ƒæ–¹æ³•" data-depth="2" class=""><a href="api.htm#æ ¸å¿ƒæ–¹æ³•" tppabs="https://umijs.org/zh-CN/plugins/api#æ ¸å¿ƒæ–¹æ³•"><span>æ ¸å¿ƒæ–¹æ³•</span></a></li><li title="applyPlugins({ key: string, type: api.ApplyPluginsType, initialValue?: any, args?: any })" data-depth="3" class=""><a href="api.htm#applyplugins-key-string-type-apiapplypluginstype-initialvalue-any-args-any-" tppabs="https://umijs.org/zh-CN/plugins/api#applyplugins-key-string-type-apiapplypluginstype-initialvalue-any-args-any-"><span>applyPlugins({ key: string, type: api.ApplyPluginsType, initialValue?: any, args?: any })</span></a></li><li title="describe({ id?: string, key?: string, config?: { default, schema, onChange } })" data-depth="3" class=""><a href="api.htm#describe-id-string-key-string-config--default-schema-onchange--" tppabs="https://umijs.org/zh-CN/plugins/api#describe-id-string-key-string-config--default-schema-onchange--"><span>describe({ id?: string, key?: string, config?: { default, schema, onChange } })</span></a></li><li title="register({ key: string, fn: Function, pluginId?: string, before?: string, stage?: number })" data-depth="3" class=""><a href="api.htm#register-key-string-fn-function-pluginid-string-before-string-stage-number-" tppabs="https://umijs.org/zh-CN/plugins/api#register-key-string-fn-function-pluginid-string-before-string-stage-number-"><span>register({ key: string, fn: Function, pluginId?: string, before?: string, stage?: number })</span></a></li><li title="registerCommand({ name: string, alias?: string, fn: Function })" data-depth="3" class=""><a href="api.htm#registercommand-name-string-alias-string-fn-function-" tppabs="https://umijs.org/zh-CN/plugins/api#registercommand-name-string-alias-string-fn-function-"><span>registerCommand({ name: string, alias?: string, fn: Function })</span></a></li><li title="registerMethod({ name: string, fn?: Function, exitsError?: boolean })" data-depth="3" class=""><a href="api.htm#registermethod-name-string-fn-function-exitserror-boolean-" tppabs="https://umijs.org/zh-CN/plugins/api#registermethod-name-string-fn-function-exitserror-boolean-"><span>registerMethod({ name: string, fn?: Function, exitsError?: boolean })</span></a></li><li title="registerPresets(presets: string[])" data-depth="3" class=""><a href="api.htm#registerpresetspresets-string" tppabs="https://umijs.org/zh-CN/plugins/api#registerpresetspresets-string"><span>registerPresets(presets: string[])</span></a></li><li title="registerPlugins(plugins: string[])" data-depth="3" class=""><a href="api.htm#registerpluginsplugins-string" tppabs="https://umijs.org/zh-CN/plugins/api#registerpluginsplugins-string"><span>registerPlugins(plugins: string[])</span></a></li><li title="hasPlugins(pluginIds: string[])" data-depth="3" class=""><a href="api.htm#haspluginspluginids-string" tppabs="https://umijs.org/zh-CN/plugins/api#haspluginspluginids-string"><span>hasPlugins(pluginIds: string[])</span></a></li><li title="hasPresets(presetIds: string[])" data-depth="3" class=""><a href="api.htm#haspresetspresetids-string" tppabs="https://umijs.org/zh-CN/plugins/api#haspresetspresetids-string"><span>hasPresets(presetIds: string[])</span></a></li><li title="skipPlugins(pluginIds: string[])" data-depth="3" class=""><a href="api.htm#skippluginspluginids-string" tppabs="https://umijs.org/zh-CN/plugins/api#skippluginspluginids-string"><span>skipPlugins(pluginIds: string[])</span></a></li><li title="æ‰©å±•æ–¹æ³•" data-depth="2" class=""><a href="api.htm#æ‰©å±•æ–¹æ³•" tppabs="https://umijs.org/zh-CN/plugins/api#æ‰©å±•æ–¹æ³•"><span>æ‰©å±•æ–¹æ³•</span></a></li><li title="addBeforeMiddewares" data-depth="3" class=""><a href="api.htm#addbeforemiddewares" tppabs="https://umijs.org/zh-CN/plugins/api#addbeforemiddewares"><span>addBeforeMiddewares</span></a></li><li title="addEntryCode" data-depth="3" class=""><a href="api.htm#addentrycode" tppabs="https://umijs.org/zh-CN/plugins/api#addentrycode"><span>addEntryCode</span></a></li><li title="addEntryCodeAhead" data-depth="3" class=""><a href="api.htm#addentrycodeahead" tppabs="https://umijs.org/zh-CN/plugins/api#addentrycodeahead"><span>addEntryCodeAhead</span></a></li><li title="addEntryImports" data-depth="3" class=""><a href="api.htm#addentryimports" tppabs="https://umijs.org/zh-CN/plugins/api#addentryimports"><span>addEntryImports</span></a></li><li title="addEntryImportsAhead" data-depth="3" class=""><a href="api.htm#addentryimportsahead" tppabs="https://umijs.org/zh-CN/plugins/api#addentryimportsahead"><span>addEntryImportsAhead</span></a></li><li title="addHTMLMetas" data-depth="3" class=""><a href="api.htm#addhtmlmetas" tppabs="https://umijs.org/zh-CN/plugins/api#addhtmlmetas"><span>addHTMLMetas</span></a></li><li title="addHTMLLinks" data-depth="3" class=""><a href="api.htm#addhtmllinks" tppabs="https://umijs.org/zh-CN/plugins/api#addhtmllinks"><span>addHTMLLinks</span></a></li><li title="addHTMLStyles" data-depth="3" class=""><a href="api.htm#addhtmlstyles" tppabs="https://umijs.org/zh-CN/plugins/api#addhtmlstyles"><span>addHTMLStyles</span></a></li><li title="addHTMLScripts" data-depth="3" class=""><a href="api.htm#addhtmlscripts" tppabs="https://umijs.org/zh-CN/plugins/api#addhtmlscripts"><span>addHTMLScripts</span></a></li><li title="addHTMLHeadScripts" data-depth="3" class=""><a href="api.htm#addhtmlheadscripts" tppabs="https://umijs.org/zh-CN/plugins/api#addhtmlheadscripts"><span>addHTMLHeadScripts</span></a></li><li title="addMiddewares" data-depth="3" class=""><a href="api.htm#addmiddewares" tppabs="https://umijs.org/zh-CN/plugins/api#addmiddewares"><span>addMiddewares</span></a></li><li title="addPolyfillImports" data-depth="3" class=""><a href="api.htm#addpolyfillimports" tppabs="https://umijs.org/zh-CN/plugins/api#addpolyfillimports"><span>addPolyfillImports</span></a></li><li title="addProjectFirstLibraries" data-depth="3" class=""><a href="api.htm#addprojectfirstlibraries" tppabs="https://umijs.org/zh-CN/plugins/api#addprojectfirstlibraries"><span>addProjectFirstLibraries</span></a></li><li title="addRuntimePlugin" data-depth="3" class=""><a href="api.htm#addruntimeplugin" tppabs="https://umijs.org/zh-CN/plugins/api#addruntimeplugin"><span>addRuntimePlugin</span></a></li><li title="addRuntimePluginKey" data-depth="3" class=""><a href="api.htm#addruntimepluginkey" tppabs="https://umijs.org/zh-CN/plugins/api#addruntimepluginkey"><span>addRuntimePluginKey</span></a></li><li title="addUmiExports" data-depth="3" class=""><a href="api.htm#addumiexports" tppabs="https://umijs.org/zh-CN/plugins/api#addumiexports"><span>addUmiExports</span></a></li><li title="addTmpGenerateWatcherPaths" data-depth="3" class=""><a href="api.htm#addtmpgeneratewatcherpaths" tppabs="https://umijs.org/zh-CN/plugins/api#addtmpgeneratewatcherpaths"><span>addTmpGenerateWatcherPaths</span></a></li><li title="chainWebpack(config, { webpack })" data-depth="3" class=""><a href="api.htm#chainwebpackconfig--webpack-" tppabs="https://umijs.org/zh-CN/plugins/api#chainwebpackconfig--webpack-"><span>chainWebpack(config, { webpack })</span></a></li><li title="getPort()" data-depth="3" class=""><a href="api.htm#getport" tppabs="https://umijs.org/zh-CN/plugins/api#getport"><span>getPort()</span></a></li><li title="getHostname()" data-depth="3" class=""><a href="api.htm#gethostname" tppabs="https://umijs.org/zh-CN/plugins/api#gethostname"><span>getHostname()</span></a></li><li title="modifyBabelOpts" data-depth="3" class=""><a href="api.htm#modifybabelopts" tppabs="https://umijs.org/zh-CN/plugins/api#modifybabelopts"><span>modifyBabelOpts</span></a></li><li title="modifyBabelPresetOpts" data-depth="3" class=""><a href="api.htm#modifybabelpresetopts" tppabs="https://umijs.org/zh-CN/plugins/api#modifybabelpresetopts"><span>modifyBabelPresetOpts</span></a></li><li title="modifyBundleConfig" data-depth="3" class=""><a href="api.htm#modifybundleconfig" tppabs="https://umijs.org/zh-CN/plugins/api#modifybundleconfig"><span>modifyBundleConfig</span></a></li><li title="modifyBundleConfigs" data-depth="3" class=""><a href="api.htm#modifybundleconfigs" tppabs="https://umijs.org/zh-CN/plugins/api#modifybundleconfigs"><span>modifyBundleConfigs</span></a></li><li title="modifyBundleConfigOpts" data-depth="3" class=""><a href="api.htm#modifybundleconfigopts" tppabs="https://umijs.org/zh-CN/plugins/api#modifybundleconfigopts"><span>modifyBundleConfigOpts</span></a></li><li title="modifyBundleImplementor" data-depth="3" class=""><a href="api.htm#modifybundleimplementor" tppabs="https://umijs.org/zh-CN/plugins/api#modifybundleimplementor"><span>modifyBundleImplementor</span></a></li><li title="modifyBundler" data-depth="3" class=""><a href="api.htm#modifybundler" tppabs="https://umijs.org/zh-CN/plugins/api#modifybundler"><span>modifyBundler</span></a></li><li title="modifyConfig" data-depth="3" class=""><a href="api.htm#modifyconfig" tppabs="https://umijs.org/zh-CN/plugins/api#modifyconfig"><span>modifyConfig</span></a></li><li title="modifyDefaultConfig" data-depth="3" class=""><a href="api.htm#modifydefaultconfig" tppabs="https://umijs.org/zh-CN/plugins/api#modifydefaultconfig"><span>modifyDefaultConfig</span></a></li><li title="modifyHTML" data-depth="3" class=""><a href="api.htm#modifyhtml" tppabs="https://umijs.org/zh-CN/plugins/api#modifyhtml"><span>modifyHTML</span></a></li><li title="modifyHTMLChunks" data-depth="3" class=""><a href="api.htm#modifyhtmlchunks" tppabs="https://umijs.org/zh-CN/plugins/api#modifyhtmlchunks"><span>modifyHTMLChunks</span></a></li><li title="modifyExportRouteMap " data-depth="3" class=""><a href="api.htm#modifyexportroutemap-32" tppabs="https://umijs.org/zh-CN/plugins/api#modifyexportroutemap-32"><span>modifyExportRouteMap </span></a></li><li title="modifyDevHTMLContent " data-depth="3" class=""><a href="api.htm#modifydevhtmlcontent-32" tppabs="https://umijs.org/zh-CN/plugins/api#modifydevhtmlcontent-32"><span>modifyDevHTMLContent </span></a></li><li title="modifyProdHTMLContent " data-depth="3" class=""><a href="api.htm#modifyprodhtmlcontent-32" tppabs="https://umijs.org/zh-CN/plugins/api#modifyprodhtmlcontent-32"><span>modifyProdHTMLContent </span></a></li><li title="modifyPaths" data-depth="3" class=""><a href="api.htm#modifypaths" tppabs="https://umijs.org/zh-CN/plugins/api#modifypaths"><span>modifyPaths</span></a></li><li title="modifyRendererPath" data-depth="3" class=""><a href="api.htm#modifyrendererpath" tppabs="https://umijs.org/zh-CN/plugins/api#modifyrendererpath"><span>modifyRendererPath</span></a></li><li title="modifyPublicPathStr" data-depth="3" class=""><a href="api.htm#modifypublicpathstr" tppabs="https://umijs.org/zh-CN/plugins/api#modifypublicpathstr"><span>modifyPublicPathStr</span></a></li><li title="modifyRoutes" data-depth="3" class=""><a href="api.htm#modifyroutes" tppabs="https://umijs.org/zh-CN/plugins/api#modifyroutes"><span>modifyRoutes</span></a></li><li title="onPatchRoute({ route, parentRoute })" data-depth="3" class=""><a href="api.htm#onpatchroute-route-parentroute-" tppabs="https://umijs.org/zh-CN/plugins/api#onpatchroute-route-parentroute-"><span>onPatchRoute({ route, parentRoute })</span></a></li><li title="onPatchRouteBefore({ route, parentRoute })" data-depth="3" class=""><a href="api.htm#onpatchroutebefore-route-parentroute-" tppabs="https://umijs.org/zh-CN/plugins/api#onpatchroutebefore-route-parentroute-"><span>onPatchRouteBefore({ route, parentRoute })</span></a></li><li title="onPatchRoutes({ routes, parentRoute })" data-depth="3" class=""><a href="api.htm#onpatchroutes-routes-parentroute-" tppabs="https://umijs.org/zh-CN/plugins/api#onpatchroutes-routes-parentroute-"><span>onPatchRoutes({ routes, parentRoute })</span></a></li><li title="onPatchRoutesBefore({ routes, parentRoute })" data-depth="3" class=""><a href="api.htm#onpatchroutesbefore-routes-parentroute-" tppabs="https://umijs.org/zh-CN/plugins/api#onpatchroutesbefore-routes-parentroute-"><span>onPatchRoutesBefore({ routes, parentRoute })</span></a></li><li title="onBuildComplete({ err?, stats? })" data-depth="3" class=""><a href="api.htm#onbuildcomplete-err-stats-" tppabs="https://umijs.org/zh-CN/plugins/api#onbuildcomplete-err-stats-"><span>onBuildComplete({ err?, stats? })</span></a></li><li title="onDevCompileDone({ isFirstCompile: boolean, stats: webpack.Stats })" data-depth="3" class=""><a href="api.htm#ondevcompiledone-isfirstcompile-boolean-stats-webpackstats-" tppabs="https://umijs.org/zh-CN/plugins/api#ondevcompiledone-isfirstcompile-boolean-stats-webpackstats-"><span>onDevCompileDone({ isFirstCompile: boolean, stats: webpack.Stats })</span></a></li><li title="onGenerateFiles" data-depth="3" class=""><a href="api.htm#ongeneratefiles" tppabs="https://umijs.org/zh-CN/plugins/api#ongeneratefiles"><span>onGenerateFiles</span></a></li><li title="onPluginReady()" data-depth="3" class=""><a href="api.htm#onpluginready" tppabs="https://umijs.org/zh-CN/plugins/api#onpluginready"><span>onPluginReady()</span></a></li><li title="onStart()" data-depth="3" class=""><a href="api.htm#onstart" tppabs="https://umijs.org/zh-CN/plugins/api#onstart"><span>onStart()</span></a></li><li title="onExit()" data-depth="3" class=""><a href="api.htm#onexit" tppabs="https://umijs.org/zh-CN/plugins/api#onexit"><span>onExit()</span></a></li><li title="writeTmpFile({ path: string, content: string, skipTSCheck?: boolean })" data-depth="3" class=""><a href="api.htm#writetmpfile-path-string-content-string-skiptscheck-boolean-" tppabs="https://umijs.org/zh-CN/plugins/api#writetmpfile-path-string-content-string-skiptscheck-boolean-"><span>writeTmpFile({ path: string, content: string, skipTSCheck?: boolean })</span></a></li><li title="å±æ€§" data-depth="2" class=""><a href="api.htm#å±æ€§" tppabs="https://umijs.org/zh-CN/plugins/api#å±æ€§"><span>å±æ€§</span></a></li><li title="args" data-depth="3" class=""><a href="api.htm#args" tppabs="https://umijs.org/zh-CN/plugins/api#args"><span>args</span></a></li><li title="babelRegister.setOnlyMap({ key: string, value: string[] })" data-depth="3" class=""><a href="api.htm#babelregistersetonlymap-key-string-value-string-" tppabs="https://umijs.org/zh-CN/plugins/api#babelregistersetonlymap-key-string-value-string-"><span>babelRegister.setOnlyMap({ key: string, value: string[] })</span></a></li><li title="config" data-depth="3" class=""><a href="api.htm#config" tppabs="https://umijs.org/zh-CN/plugins/api#config"><span>config</span></a></li><li title="cwd" data-depth="3" class=""><a href="api.htm#cwd" tppabs="https://umijs.org/zh-CN/plugins/api#cwd"><span>cwd</span></a></li><li title="env" data-depth="3" class=""><a href="api.htm#env" tppabs="https://umijs.org/zh-CN/plugins/api#env"><span>env</span></a></li><li title="id" data-depth="3" class=""><a href="api.htm#id" tppabs="https://umijs.org/zh-CN/plugins/api#id"><span>id</span></a></li><li title="logger" data-depth="3" class=""><a href="api.htm#logger" tppabs="https://umijs.org/zh-CN/plugins/api#logger"><span>logger</span></a></li><li title="key" data-depth="3" class=""><a href="api.htm#key" tppabs="https://umijs.org/zh-CN/plugins/api#key"><span>key</span></a></li><li title="paths" data-depth="3" class=""><a href="api.htm#paths" tppabs="https://umijs.org/zh-CN/plugins/api#paths"><span>paths</span></a></li><li title="pkg" data-depth="3" class=""><a href="api.htm#pkg" tppabs="https://umijs.org/zh-CN/plugins/api#pkg"><span>pkg</span></a></li><li title="service" data-depth="3" class=""><a href="api.htm#service" tppabs="https://umijs.org/zh-CN/plugins/api#service"><span>service</span></a></li><li title="stage" data-depth="3" class=""><a href="api.htm#stage" tppabs="https://umijs.org/zh-CN/plugins/api#stage"><span>stage</span></a></li><li title="userConfig" data-depth="3" class=""><a href="api.htm#userconfig" tppabs="https://umijs.org/zh-CN/plugins/api#userconfig"><span>userConfig</span></a></li><li title="utils" data-depth="3" class=""><a href="api.htm#utils" tppabs="https://umijs.org/zh-CN/plugins/api#utils"><span>utils</span></a></li><li title="ApplyPluginsType" data-depth="3" class=""><a href="api.htm#applypluginstype" tppabs="https://umijs.org/zh-CN/plugins/api#applypluginstype"><span>ApplyPluginsType</span></a></li><li title="ConfigChangeType" data-depth="3" class=""><a href="api.htm#configchangetype" tppabs="https://umijs.org/zh-CN/plugins/api#configchangetype"><span>ConfigChangeType</span></a></li><li title="EnableBy" data-depth="3" class=""><a href="api.htm#enableby" tppabs="https://umijs.org/zh-CN/plugins/api#enableby"><span>EnableBy</span></a></li><li title="Html" data-depth="3" class=""><a href="api.htm#html" tppabs="https://umijs.org/zh-CN/plugins/api#html"><span>Html</span></a></li><li title="ServiceStage" data-depth="3" class=""><a href="api.htm#servicestage" tppabs="https://umijs.org/zh-CN/plugins/api#servicestage"><span>ServiceStage</span></a></li><li title="ç¯å¢ƒå˜é‡" data-depth="2" class=""><a href="api.htm#ç¯å¢ƒå˜é‡" tppabs="https://umijs.org/zh-CN/plugins/api#ç¯å¢ƒå˜é‡"><span>ç¯å¢ƒå˜é‡</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="æ’ä»¶-api"><a aria-hidden="true" href="#æ’ä»¶-api"><span class="icon icon-link"></span></a>æ’ä»¶ API</h1><h2 id="æ ¸å¿ƒæ–¹æ³•"><a aria-hidden="true" href="#æ ¸å¿ƒæ–¹æ³•"><span class="icon icon-link"></span></a>æ ¸å¿ƒæ–¹æ³•</h2><p><a href="javascript:if(confirm('https://github.com/umijs/umi/blob/master/packages/core/src/Service/Service.ts  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi/blob/master/packages/core/src/Service/Service.ts'" tppabs="https://github.com/umijs/umi/blob/master/packages/core/src/Service/Service.ts" target="_blank">Service<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å’Œ <a href="javascript:if(confirm('https://github.com/umijs/umi/blob/master/packages/core/src/Service/PluginAPI.ts  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi/blob/master/packages/core/src/Service/PluginAPI.ts'" tppabs="https://github.com/umijs/umi/blob/master/packages/core/src/Service/PluginAPI.ts" target="_blank">PluginAPI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> é‡Œå®šä¹‰çš„æ–¹æ³•ã€‚</p><h3 id="applyplugins-key-string-type-apiapplypluginstype-initialvalue-any-args-any-"><a aria-hidden="true" href="#applyplugins-key-string-type-apiapplypluginstype-initialvalue-any-args-any-"><span class="icon icon-link"></span></a>applyPlugins(<!-- -->{<!-- --> key: string, type: api.ApplyPluginsType, initialValue?: any, args?: any <!-- -->}<!-- -->)</h3><p>TODOã€‚</p><h3 id="describe-id-string-key-string-config--default-schema-onchange--"><a aria-hidden="true" href="#describe-id-string-key-string-config--default-schema-onchange--"><span class="icon icon-link"></span></a>describe(<!-- -->{<!-- --> id?: string, key?: string, config?: <!-- -->{<!-- --> default, schema, onChange <!-- -->}<!-- --> <!-- -->}<!-- -->)</h3><p>æ³¨å†Œé˜¶æ®µæ‰§è¡Œï¼Œç”¨äºæè¿°æ’ä»¶æˆ–æ’ä»¶é›†çš„ idã€keyã€é…ç½®ä¿¡æ¯ã€å¯ç”¨æ–¹å¼ç­‰ã€‚</p><p>e.g.</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="api.describe({
  key: &#x27;history&#x27;,
  config: {
    default: &#x27;browser&#x27;,
    schema(joi) {
      return joi.string();
    },
    onChange: api.ConfigChangeType.regenerateTmpFiles,
  },
  enableBy: api.EnableBy.config,
});
" data-status="copy"></button><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">describe</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  key</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;history&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  config</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword module">default</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;browser&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token parameter">joi</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> joi</span><span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    onChange</span><span class="token punctuation">:</span><span class="token plain"> api</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">ConfigChangeType</span><span class="token punctuation">.</span><span class="token property-access">regenerateTmpFiles</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  enableBy</span><span class="token punctuation">:</span><span class="token plain"> api</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">EnableBy</span><span class="token punctuation">.</span><span class="token property-access">config</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æ³¨ï¼š</p><ul><li><code>config.default</code> ä¸ºé…ç½®çš„é»˜è®¤å€¼ï¼Œç”¨æˆ·æ²¡æœ‰é…ç½®æ—¶å–è¿™ä¸ª</li><li><code>config.schema</code> ç”¨äºå£°æ˜é…ç½®çš„ç±»å‹ï¼ŒåŸºäº <a href="javascript:if(confirm('https://hapi.dev/family/joi/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://hapi.dev/family/joi/'" tppabs="https://hapi.dev/family/joi/" target="_blank">joi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œ<strong>å¦‚æœä½ å¸Œæœ›ç”¨æˆ·è¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªæ˜¯å¿…é¡»çš„</strong>ï¼Œå¦åˆ™ç”¨æˆ·çš„é…ç½®æ— æ•ˆ</li><li><code>config.onChange</code> æ˜¯ dev é˜¶æ®µé…ç½®è¢«ä¿®æ”¹åçš„å¤„ç†æœºåˆ¶ï¼Œé»˜è®¤ä¼šé‡å¯ dev è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä¸º <code>api.ConfigChangeType.regenerateTmpFiles</code> åªé‡æ–°ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œè¿˜å¯ä»¥é€šè¿‡å‡½æ•°çš„æ ¼å¼è‡ªå®šä¹‰</li><li><code>enableBy</code> ä¸ºå¯ç”¨æ–¹å¼ï¼Œé»˜è®¤æ˜¯æ³¨å†Œå¯ç”¨ï¼Œå¯æ›´æ”¹ä¸º <code>api.EnableBy.config</code>ï¼Œè¿˜å¯ä»¥ç”¨è‡ªå®šä¹‰å‡½æ•°çš„æ–¹å¼å†³å®šå…¶å¯ç”¨æ—¶æœºï¼ˆåŠ¨æ€ç”Ÿæ•ˆï¼‰</li></ul><h3 id="register-key-string-fn-function-pluginid-string-before-string-stage-number-"><a aria-hidden="true" href="#register-key-string-fn-function-pluginid-string-before-string-stage-number-"><span class="icon icon-link"></span></a>register(<!-- -->{<!-- --> key: string, fn: Function, pluginId?: string, before?: string, stage?: number <!-- -->}<!-- -->)</h3><p>ä¸º <code>api.applyPlugins</code> æ³¨å†Œå¯ä¾›å…¶ä½¿ç”¨çš„ hookã€‚</p><p>e.g.</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// å¯åŒæ­¥
api.register({
  key: &#x27;foo&#x27;,
  fn() {
    return &#x27;a&#x27;;
  },
});

// å¯å¼‚æ­¥
api.register({
  key: &#x27;foo&#x27;,
  async fn() {
    await delay(100);
    return &#x27;b&#x27;;
  },
});
" data-status="copy"></button><div class="token-line"><span class="token comment">// å¯åŒæ­¥</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  key</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token string">&#x27;a&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// å¯å¼‚æ­¥</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  key</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">await</span><span class="token plain"> </span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token string">&#x27;b&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>ç„¶åé€šè¿‡ <code>api.applyPlugins</code> å³å¯æ‹¿åˆ° <code>[&#x27;a&#x27;, &#x27;b&#x27;]</code>ï¼Œ</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const foo = await api.applyPlugins({
  key: &#x27;foo&#x27;,
  type: api.ApplyPluginsType.add,
  initialValue: [],
});
console.log(foo); // [&#x27;a&#x27;, &#x27;b&#x27;]
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> api</span><span class="token punctuation">.</span><span class="token method function property-access">applyPlugins</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  key</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  type</span><span class="token punctuation">:</span><span class="token plain"> api</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">ApplyPluginsType</span><span class="token punctuation">.</span><span class="token property-access">add</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  initialValue</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;a&#x27;, &#x27;b&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æ³¨ï¼š</p><ul><li>fn æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ï¼Œå¼‚æ­¥é€šè¿‡ Promiseï¼Œè¿”å›å€¼ä¸º Promise å³ä¸ºå¼‚æ­¥</li><li>fn é‡Œçš„å†…å®¹éœ€ç»“åˆ <code>api.appyPlugins</code> çš„ type å‚æ•°æ¥çœ‹ <em> å¦‚æœæ˜¯ <code>api.ApplyPluginsType.add</code>ï¼Œéœ€æœ‰è¿”å›å€¼ï¼Œè¿™äº›è¿”å›å€¼æœ€ç»ˆä¼šè¢«åˆæˆä¸€ä¸ªæ•°ç»„ </em> å¦‚æœæ˜¯ <code>api.ApplyPluginsType. modify</code>ï¼Œéœ€å¯¹ç¬¬ä¸€ä¸ªå‚æ•°åšä¿®æ”¹ï¼Œå¹¶è¿”å› * å¦‚æœæ˜¯ <code>api.ApplyPluginsType. event</code>ï¼Œæ— éœ€è¿”å›å€¼</li><li>stage å’Œ before éƒ½æ˜¯ç”¨äºè°ƒæ•´æ‰§è¡Œé¡ºåºçš„ï¼Œå‚è€ƒ <a href="javascript:if(confirm('https://github.com/webpack/tapable  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/tapable'" tppabs="https://github.com/webpack/tapable" target="_blank">tapable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>stage é»˜è®¤æ˜¯ 0ï¼Œè®¾ä¸º -1 æˆ–æ›´å°‘ä¼šæå‰æ‰§è¡Œï¼Œè®¾ä¸º 1 æˆ–æ›´å¤šä¼šåç½®æ‰§è¡Œ</li></ul><h3 id="registercommand-name-string-alias-string-fn-function-"><a aria-hidden="true" href="#registercommand-name-string-alias-string-fn-function-"><span class="icon icon-link"></span></a>registerCommand(<!-- -->{<!-- --> name: string, alias?: string, fn: Function <!-- -->}<!-- -->)</h3><p>æ³¨å†Œå‘½ä»¤ã€‚</p><p>æ³¨ï¼š</p><ul><li><code>alias</code> ä¸ºåˆ«åï¼Œæ¯”å¦‚ generate çš„åˆ«å g</li><li><code>fn</code> çš„å‚æ•°ä¸º <code>{<!-- --> args <!-- -->}</code>ï¼Œargs çš„æ ¼å¼åŒ <a href="javascript:if(confirm('https://github.com/yargs/yargs  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/yargs/yargs'" tppabs="https://github.com/yargs/yargs" target="_blank">yargs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„è§£æç»“æœï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ <code>_</code> é‡Œçš„ command æœ¬èº«è¢«å»æ‰äº†ï¼Œæ¯”å¦‚æ‰§è¡Œ <code>umi generate page foo</code>ï¼Œ<code>args._</code> ä¸º <code>[&#x27;page&#x27;, &#x27;foo&#x27;]</code></li></ul><h3 id="registermethod-name-string-fn-function-exitserror-boolean-"><a aria-hidden="true" href="#registermethod-name-string-fn-function-exitserror-boolean-"><span class="icon icon-link"></span></a>registerMethod(<!-- -->{<!-- --> name: string, fn?: Function, exitsError?: boolean <!-- -->}<!-- -->)</h3><p>å¾€ api ä¸Šæ³¨å†Œæ–¹æ³•ã€‚å¯ä»¥æ˜¯ <code>api.register()</code> çš„å¿«æ·ä½¿ç”¨æ–¹å¼ï¼Œä¾¿äºè°ƒç”¨ï¼›ä¹Ÿå¯ä»¥ä¸æ˜¯ï¼Œå¦‚æœæœ‰æä¾› <code>fn</code>ï¼Œåˆ™æ‰§è¡Œ <code>fn</code> å®šä¹‰çš„å‡½æ•°ã€‚</p><p>æ³¨ï¼š</p><ul><li>é™¤ @umijs/preset-build-in å¤–ï¼Œé€šå¸¸ä¸å»ºè®®æ³¨å†Œé¢å¤–çš„æ–¹æ³•ï¼Œå› ä¸ºæ²¡æœ‰ ts æç¤ºï¼Œç›´æ¥ä½¿ç”¨ <code>api.register()</code> å°±å¥½</li><li><code>exitsError</code> é»˜è®¤ä¸º trueï¼Œå¦‚æœæ–¹æ³•å­˜åœ¨åˆ™æŠ¥é”™</li></ul><h3 id="registerpresetspresets-string"><a aria-hidden="true" href="#registerpresetspresets-string"><span class="icon icon-link"></span></a>registerPresets(presets: string[])</h3><p>æ³¨å†Œæ’ä»¶é›†ï¼Œå‚æ•°ä¸ºè·¯å¾„æ•°ç»„ã€‚</p><h3 id="registerpluginsplugins-string"><a aria-hidden="true" href="#registerpluginsplugins-string"><span class="icon icon-link"></span></a>registerPlugins(plugins: string[])</h3><p>æ³¨å†Œæ’ä»¶ï¼Œå‚æ•°ä¸ºè·¯å¾„æ•°ç»„ã€‚</p><h3 id="haspluginspluginids-string"><a aria-hidden="true" href="#haspluginspluginids-string"><span class="icon icon-link"></span></a>hasPlugins(pluginIds: string[])</h3><p>åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å†ŒæŸä¸ªæ’ä»¶ã€‚</p><p>æ’ä»¶çš„ id è§„åˆ™ï¼Œ</p><ul><li>id é»˜è®¤ä¸ºåŒ…å</li><li>æ–‡ä»¶çº§çš„æ’ä»¶ï¼Œå¦‚æœæ²¡æœ‰å£°æ˜ idï¼Œé»˜è®¤ä¸º name + ç›¸å¯¹è·¯å¾„ï¼Œæ¯”å¦‚ <code>@umijs/preset-react/lib/plugins/crossorigin/crossorigin</code></li><li>å†…ç½®æ’ä»¶ä»¥ <code>@@</code> ä¸ºå‰ç¼€ï¼Œæ¯”å¦‚ <code>@@/registerMethod</code></li></ul><p>æ³¨ï¼š</p><ul><li>å¦‚æœåœ¨æ³¨å†Œé˜¶æ®µä½¿ç”¨ï¼Œåªèƒ½åˆ¤æ–­<strong>åœ¨ä»–ä¹‹å‰</strong>æ˜¯å¦æœ‰æ³¨å†ŒæŸä¸ªæ’ä»¶</li></ul><p>e.g.</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å†Œ @umijs/plugin-dva
api.hasPlugins([&#x27;@umijs/plugin-dva&#x27;]);
" data-status="copy"></button><div class="token-line"><span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å†Œ @umijs/plugin-dva</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">hasPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;@umijs/plugin-dva&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="haspresetspresetids-string"><a aria-hidden="true" href="#haspresetspresetids-string"><span class="icon icon-link"></span></a>hasPresets(presetIds: string[])</h3><p>åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å†ŒæŸä¸ªæ’ä»¶é›†ã€‚</p><p>æ’ä»¶é›†çš„ id è§„åˆ™ï¼Œ</p><p>e.g.</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å†Œ @umijs/preset-ui
api.hasPresets([&#x27;@umijs/preset-ui&#x27;]);
" data-status="copy"></button><div class="token-line"><span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å†Œ @umijs/preset-ui</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">hasPresets</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;@umijs/preset-ui&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æ³¨ï¼š</p><ul><li>å¦‚æœåœ¨æ³¨å†Œé˜¶æ®µä½¿ç”¨ï¼Œåªèƒ½åˆ¤æ–­<strong>åœ¨ä»–ä¹‹å‰</strong>æ˜¯å¦æœ‰æ³¨å†ŒæŸä¸ªæ’ä»¶é›†</li></ul><h3 id="skippluginspluginids-string"><a aria-hidden="true" href="#skippluginspluginids-string"><span class="icon icon-link"></span></a>skipPlugins(pluginIds: string[])</h3><p>å£°æ˜å“ªäº›æ’ä»¶éœ€è¦è¢«ç¦ç”¨ï¼Œå‚æ•°ä¸ºæ’ä»¶ id çš„æ•°ç»„ã€‚</p><p>e.g.</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// ç¦ç”¨ plugin-dva æ’ä»¶
api.skipPlugins([&#x27;@umijs/plugin-dva&#x27;]);
" data-status="copy"></button><div class="token-line"><span class="token comment">// ç¦ç”¨ plugin-dva æ’ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">skipPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;@umijs/plugin-dva&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="æ‰©å±•æ–¹æ³•"><a aria-hidden="true" href="#æ‰©å±•æ–¹æ³•"><span class="icon icon-link"></span></a>æ‰©å±•æ–¹æ³•</h2><p>é€šè¿‡ <code>api.registerMethod()</code> æ‰©å±•çš„æ–¹æ³•ã€‚</p><h3 id="addbeforemiddewares"><a aria-hidden="true" href="#addbeforemiddewares"><span class="icon icon-link"></span></a>addBeforeMiddewares</h3><p>æ·»åŠ åœ¨ webpack compiler ä¸­é—´ä»¶ä¹‹å‰çš„ä¸­é—´ä»¶ï¼Œè¿”å›å€¼æ ¼å¼ä¸º express ä¸­é—´ä»¶ã€‚</p><h3 id="addentrycode"><a aria-hidden="true" href="#addentrycode"><span class="icon icon-link"></span></a>addEntryCode</h3><p>åœ¨å…¥å£æ–‡ä»¶æœ€åæ·»åŠ ä»£ç ã€‚</p><h3 id="addentrycodeahead"><a aria-hidden="true" href="#addentrycodeahead"><span class="icon icon-link"></span></a>addEntryCodeAhead</h3><p>åœ¨å…¥å£æ–‡ä»¶æœ€å‰é¢ï¼ˆimport ä¹‹åï¼‰æ·»åŠ ä»£ç ã€‚</p><h3 id="addentryimports"><a aria-hidden="true" href="#addentryimports"><span class="icon icon-link"></span></a>addEntryImports</h3><p>åœ¨å…¥å£æ–‡ä»¶ç°æœ‰ import çš„åé¢æ·»åŠ  importã€‚</p><h3 id="addentryimportsahead"><a aria-hidden="true" href="#addentryimportsahead"><span class="icon icon-link"></span></a>addEntryImportsAhead</h3><p>åœ¨å…¥å£æ–‡ä»¶ç°æœ‰ import çš„å‰é¢æ·»åŠ  importã€‚</p><h3 id="addhtmlmetas"><a aria-hidden="true" href="#addhtmlmetas"><span class="icon icon-link"></span></a>addHTMLMetas</h3><p>åœ¨ HTML ä¸­æ·»åŠ  meta æ ‡ç­¾ã€‚</p><h3 id="addhtmllinks"><a aria-hidden="true" href="#addhtmllinks"><span class="icon icon-link"></span></a>addHTMLLinks</h3><p>åœ¨ HTML ä¸­æ·»åŠ  Link æ ‡ç­¾ã€‚</p><h3 id="addhtmlstyles"><a aria-hidden="true" href="#addhtmlstyles"><span class="icon icon-link"></span></a>addHTMLStyles</h3><p>åœ¨ HTML ä¸­æ·»åŠ  Style æ ‡ç­¾ã€‚</p><h3 id="addhtmlscripts"><a aria-hidden="true" href="#addhtmlscripts"><span class="icon icon-link"></span></a>addHTMLScripts</h3><p>åœ¨ HTML å°¾éƒ¨æ·»åŠ è„šæœ¬ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="api.addHTMLScript(() =&gt; {
  return [
    {
      content: &#x27;&#x27;,
      src: &#x27;&#x27;,
      // ...attrs
    },
  ];
});
" data-status="copy"></button><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">addHTMLScript</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      content</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      src</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// ...attrs</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="addhtmlheadscripts"><a aria-hidden="true" href="#addhtmlheadscripts"><span class="icon icon-link"></span></a>addHTMLHeadScripts</h3><p>åœ¨ HTML å¤´éƒ¨æ·»åŠ è„šæœ¬ã€‚</p><h3 id="addmiddewares"><a aria-hidden="true" href="#addmiddewares"><span class="icon icon-link"></span></a>addMiddewares</h3><p>æ·»åŠ åœ¨ webpack compiler ä¸­é—´ä»¶ä¹‹åçš„ä¸­é—´ä»¶ï¼Œè¿”å›å€¼æ ¼å¼ä¸º express ä¸­é—´ä»¶ã€‚</p><h3 id="addpolyfillimports"><a aria-hidden="true" href="#addpolyfillimports"><span class="icon icon-link"></span></a>addPolyfillImports</h3><p>æ·»åŠ è¡¥å……ç›¸å…³çš„ importï¼Œåœ¨æ•´ä¸ªåº”ç”¨çš„æœ€å‰é¢æ‰§è¡Œã€‚</p><h3 id="addprojectfirstlibraries"><a aria-hidden="true" href="#addprojectfirstlibraries"><span class="icon icon-link"></span></a>addProjectFirstLibraries</h3><p>æ·»åŠ ä»¥é¡¹ç›®ä¾èµ–ä¸ºä¼˜å…ˆçš„ä¾èµ–åº“åˆ—è¡¨ï¼Œè¿”å›å€¼ä¸º <code>{<!-- --> name: string; path: string <!-- -->}</code>ã€‚</p><p>æ¯”å¦‚ï¼š</p><ul><li><code>api.addProjectFirstLibraries(() =&gt; (<!-- -->{<!-- --> name: &#x27;antd&#x27;, path: dirname(require.resolve(&#x27;antd/package.json&#x27;)) <!-- -->}<!-- -->))</code>ï¼Œç„¶åç”¨æˆ·ä¾èµ– antd æ—¶ï¼Œå¦‚æœé¡¹ç›®æœ‰ä¾èµ– antdï¼Œä¼šç”¨é¡¹ç›®ä¾èµ–çš„ antdï¼Œå¦åˆ™ç”¨å†…ç½®çš„ antd</li></ul><h3 id="addruntimeplugin"><a aria-hidden="true" href="#addruntimeplugin"><span class="icon icon-link"></span></a>addRuntimePlugin</h3><p>æ·»åŠ è¿è¡Œæ—¶æ’ä»¶ï¼Œè¿”å›å€¼æ ¼å¼ä¸ºè¡¨ç¤ºæ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸²ã€‚</p><h3 id="addruntimepluginkey"><a aria-hidden="true" href="#addruntimepluginkey"><span class="icon icon-link"></span></a>addRuntimePluginKey</h3><p>æ·»åŠ è¿è¡Œæ—¶æ’ä»¶çš„ keyï¼Œè¿”å›å€¼æ ¼å¼ä¸ºå­—ç¬¦ä¸²ã€‚</p><p>å†…ç½®çš„åˆå§‹å€¼æœ‰ï¼š</p><ul><li>patchRoutes</li><li>rootContainer</li><li>render</li><li>onRouteChange</li></ul><h3 id="addumiexports"><a aria-hidden="true" href="#addumiexports"><span class="icon icon-link"></span></a>addUmiExports</h3><p>æ·»åŠ éœ€è¦ umi é¢å¤–å¯¼å‡ºçš„å†…å®¹ï¼Œè¿”å›å€¼æ ¼å¼ä¸º <code>{<!-- --> source: string, specifiers?: (string | <!-- -->{<!-- --> local: string, exported: string <!-- -->}<!-- -->)[], exportAll?: boolean <!-- -->}</code>ã€‚</p><p>æ¯”å¦‚ <code>api.addUmiExports(() =&gt; <!-- -->{<!-- --> source: &#x27;dva&#x27;, specifiers: [&#x27;connect&#x27;] <!-- -->}<!-- -->)</code>ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡ <code>import <!-- -->{<!-- --> connect <!-- -->}<!-- --> from &#x27;umi&#x27;</code> ä½¿ç”¨ <code>dva</code> çš„ <code>connect</code> æ–¹æ³•äº†ã€‚</p><h3 id="addtmpgeneratewatcherpaths"><a aria-hidden="true" href="#addtmpgeneratewatcherpaths"><span class="icon icon-link"></span></a>addTmpGenerateWatcherPaths</h3><p>æ·»åŠ é‡æ–°ä¸´æ—¶æ–‡ä»¶ç”Ÿæˆçš„ç›‘å¬è·¯å¾„ã€‚</p><h3 id="chainwebpackconfig--webpack-"><a aria-hidden="true" href="#chainwebpackconfig--webpack-"><span class="icon icon-link"></span></a>chainWebpack(config, <!-- -->{<!-- --> webpack <!-- -->}<!-- -->)</h3><p>é€šè¿‡ <a href="javascript:if(confirm('https://github.com/neutrinojs/webpack-chain  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/neutrinojs/webpack-chain'" tppabs="https://github.com/neutrinojs/webpack-chain" target="_blank">webpack-chain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„æ–¹å¼ä¿®æ”¹ webpack é…ç½®ã€‚</p><p>æ¯”å¦‚ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="api.chainWebpack((config, { webpack, env, createCSSRule }) =&gt; {
  // Set alias
  config.resolve.alias.set(&#x27;a&#x27;, &#x27;path/to/a&#x27;);

  // Delete progress bar plugin
  config.plugins.delete(&#x27;progress&#x27;);

  return config;
});
" data-status="copy"></button><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">chainWebpack</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> webpack</span><span class="token parameter punctuation">,</span><span class="token parameter"> env</span><span class="token parameter punctuation">,</span><span class="token parameter"> createCSSRule </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// Set alias</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  config</span><span class="token punctuation">.</span><span class="token property-access">resolve</span><span class="token punctuation">.</span><span class="token property-access">alias</span><span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span><span class="token string">&#x27;a&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;path/to/a&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// Delete progress bar plugin</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  config</span><span class="token punctuation">.</span><span class="token property-access">plugins</span><span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span><span class="token string">&#x27;progress&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> config</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æ³¨ï¼š</p><ul><li>éœ€è¦æœ‰è¿”å›å€¼</li></ul><h3 id="getport"><a aria-hidden="true" href="#getport"><span class="icon icon-link"></span></a>getPort()</h3><p>è·å–ç«¯å£å·ï¼Œdev æ—¶æœ‰æ•ˆã€‚</p><h3 id="gethostname"><a aria-hidden="true" href="#gethostname"><span class="icon icon-link"></span></a>getHostname()</h3><p>è·å– hostnameï¼Œdev æ—¶æœ‰æ•ˆã€‚</p><h3 id="modifybabelopts"><a aria-hidden="true" href="#modifybabelopts"><span class="icon icon-link"></span></a>modifyBabelOpts</h3><p>ä¿®æ”¹ babel é…ç½®é¡¹ã€‚</p><h3 id="modifybabelpresetopts"><a aria-hidden="true" href="#modifybabelpresetopts"><span class="icon icon-link"></span></a>modifyBabelPresetOpts</h3><p>ä¿®æ”¹ @umijs/babel-preset-umi çš„é…ç½®é¡¹ã€‚</p><h3 id="modifybundleconfig"><a aria-hidden="true" href="#modifybundleconfig"><span class="icon icon-link"></span></a>modifyBundleConfig</h3><p>ä¿®æ”¹ bundle é…ç½®ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>initialValue</code>ï¼šbundleConfigï¼Œå¯èƒ½æ˜¯ webpack çš„é…ç½®ï¼Œé€šè¿‡ <code>bundler.id</code> åŒºåˆ†</li><li><code>args</code> <em> <code>type</code>ï¼šç°åœ¨æœ‰ä¸¤ä¸ªï¼Œssr å’Œ csr </em> <code>env</code>ï¼šå³ api.env * <code>bundler</code>ï¼šåŒ…å« id å’Œ versionï¼Œæ¯”å¦‚ï¼š<code>{<!-- --> id: &#x27;webpack&#x27;: version: 4 <!-- -->}</code></li></ul><h3 id="modifybundleconfigs"><a aria-hidden="true" href="#modifybundleconfigs"><span class="icon icon-link"></span></a>modifyBundleConfigs</h3><p>ä¿®æ”¹ bundle é…ç½®æ•°ç»„ï¼Œæ¯”å¦‚å¯ç”¨äº dllã€modern mode çš„å¤„ç†ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>args</code> <em> <code>getConfig()</code>ï¼šç”¨äºè·å–é¢å¤–çš„ä¸€ä»½é…ç½® </em> <code>env</code>ï¼šå³ api.env * <code>bundler</code>ï¼šåŒ…å« id å’Œ versionï¼Œæ¯”å¦‚ï¼š<code>{<!-- --> id: &#x27;webpack&#x27;: version: 4 <!-- -->}</code></li></ul><h3 id="modifybundleconfigopts"><a aria-hidden="true" href="#modifybundleconfigopts"><span class="icon icon-link"></span></a>modifyBundleConfigOpts</h3><p>ä¿®æ”¹è·å– bundleConfig çš„å‡½æ•°å‚æ•°ã€‚</p><h3 id="modifybundleimplementor"><a aria-hidden="true" href="#modifybundleimplementor"><span class="icon icon-link"></span></a>modifyBundleImplementor</h3><p>æ¯”å¦‚ç”¨äºåˆ‡æ¢åˆ° webpack@5 æˆ–å…¶ä»–ã€‚</p><h3 id="modifybundler"><a aria-hidden="true" href="#modifybundler"><span class="icon icon-link"></span></a>modifyBundler</h3><p>æ¯”å¦‚ç”¨äºåˆ‡æ¢åˆ° parcel æˆ– rollup åšæ„å»ºã€‚</p><h3 id="modifyconfig"><a aria-hidden="true" href="#modifyconfig"><span class="icon icon-link"></span></a>modifyConfig</h3><p>ä¿®æ”¹æœ€ç»ˆé…ç½®ã€‚</p><p>æ³¨ï¼š</p><ul><li>ä¿®æ”¹åçš„å€¼ä¸ä¼šå†åš schema æ ¡éªŒ</li></ul><h3 id="modifydefaultconfig"><a aria-hidden="true" href="#modifydefaultconfig"><span class="icon icon-link"></span></a>modifyDefaultConfig</h3><p>ä¿®æ”¹é»˜è®¤é…ç½®ã€‚</p><h3 id="modifyhtml"><a aria-hidden="true" href="#modifyhtml"><span class="icon icon-link"></span></a>modifyHTML</h3><p>ä¿®æ”¹ HTMLï¼ŒåŸºäº <a href="javascript:if(confirm('https://github.com/cheeriojs/cheerio  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/cheeriojs/cheerio'" tppabs="https://github.com/cheeriojs/cheerio" target="_blank">cheerio<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„ astã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="api.modifyHTML(($, { routs }) =&gt; {
  $(&#x27;h2&#x27;).addClass(&#x27;welcome&#x27;);
  return $;
});
" data-status="copy"></button><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">modifyHTML</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> routs </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#x27;h2&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">addClass</span><span class="token punctuation">(</span><span class="token string">&#x27;welcome&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> $</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="modifyhtmlchunks"><a aria-hidden="true" href="#modifyhtmlchunks"><span class="icon icon-link"></span></a>modifyHTMLChunks</h3><p>TODO</p><h3 id="modifyexportroutemap-32"><a aria-hidden="true" href="#modifyexportroutemap-32"><span class="icon icon-link"></span></a>modifyExportRouteMap <span class="__dumi-default-badge">3.2+</span></h3><p>ä¿®æ”¹å¯¼å‡ºè·¯ç”±å¯¹è±¡ <code>routeMap</code>ï¼ˆè·¯ç”±ä¸è¾“å‡º HTML çš„æ˜ å°„å…³ç³»ï¼‰ï¼Œè§¦å‘æ—¶æœºåœ¨ HTML æ–‡ä»¶ç”Ÿæˆä¹‹å‰ï¼Œé»˜è®¤å€¼ä¸º <code>[<!-- -->{<!-- --> route: <!-- -->{<!-- --> path: &#x27;/&#x27; <!-- -->}<!-- -->, file: &#x27;index.html&#x27; <!-- -->}<!-- -->]</code>ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>html</code>ï¼šHTML å·¥å…·ç±»å®ä¾‹</li></ul><p>æ³¨ï¼š</p><ul><li>åªåœ¨ <code>umi build</code> æ—¶èµ·æ•ˆ</li></ul><p>ä¾‹å¦‚ <code>exportStatic</code> æ’ä»¶æ ¹æ®è·¯ç”±ç”Ÿæˆå¯¹åº” HTMLï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="api.modifyExportRouteMap(async (defaultRouteMap, { html }) =&gt; {
  return await html.getRouteMap();
});
" data-status="copy"></button><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">modifyExportRouteMap</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">defaultRouteMap</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> html </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> html</span><span class="token punctuation">.</span><span class="token method function property-access">getRouteMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="modifydevhtmlcontent-32"><a aria-hidden="true" href="#modifydevhtmlcontent-32"><span class="icon icon-link"></span></a>modifyDevHTMLContent <span class="__dumi-default-badge">3.2+</span></h3><p><code>umi dev</code> æ—¶ä¿®æ”¹è¾“å‡ºçš„ HTML å†…å®¹ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>req</code>ï¼šRequest å¯¹è±¡ï¼Œå¯è·å–å½“å‰è®¿é—®è·¯å¾„</li></ul><p>ä¾‹å¦‚å¸Œæœ› <code>/404</code> è·¯ç”±ç›´æ¥è¿”å› <code>Not Found</code>ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="api.modifyDevHTMLContent(async (defaultHtml, { req }) =&gt; {
  if (req.path === &#x27;/404&#x27;) {
    return &#x27;Not Found&#x27;;
  }
  return defaultHtml;
})
" data-status="copy"></button><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">modifyDevHTMLContent</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">defaultHtml</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> req </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">req</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;/404&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token string">&#x27;Not Found&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> defaultHtml</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="modifyprodhtmlcontent-32"><a aria-hidden="true" href="#modifyprodhtmlcontent-32"><span class="icon icon-link"></span></a>modifyProdHTMLContent <span class="__dumi-default-badge">3.2+</span></h3><p><code>umi build</code> æ—¶ä¿®æ”¹è¾“å‡ºçš„ HTML å†…å®¹ã€‚</p><p>å‚æ•°ï¼ˆç›¸å½“äºä¸€ä¸ª <code>RouteMap</code> å¯¹è±¡ï¼‰ï¼š</p><ul><li><code>route</code>ï¼šè·¯ç”±å¯¹è±¡</li><li><code>file</code>ï¼šè¾“å‡º HTML åç§°</li></ul><p>ä¾‹å¦‚å¯ä»¥åœ¨ç”Ÿæˆ HTML æ–‡ä»¶å‰ï¼Œåšé¢„æ¸²æŸ“ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="api.modifyProdHTMLContent(async (content, args) =&gt; {
  const { route } = args;
  const render = require(&#x27;your-renderer&#x27;);
  return await render({
    path: route.path,
  })
});
" data-status="copy"></button><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token method function property-access">modifyProdHTMLContent</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token parameter punctuation">,</span><span class="token parameter"> args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> route </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> args</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> render </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;your-renderer&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    path</span><span class="token punctuation">:</span><span class="token plain"> route</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="modifypaths"><a aria-hidden="true" href="#modifypaths"><span class="icon icon-link"></span></a>modifyPaths</h3><p>ä¿®æ”¹ paths å¯¹è±¡ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>initialValue</code>: paths å¯¹è±¡</li></ul><h3 id="modifyrendererpath"><a aria-hidden="true" href="#modifyrendererpath"><span class="icon icon-link"></span></a>modifyRendererPath</h3><p>ä¿®æ”¹ renderer è·¯å¾„ï¼Œç”¨äºä½¿ç”¨è‡ªå®šä¹‰çš„ rendererã€‚</p><h3 id="modifypublicpathstr"><a aria-hidden="true" href="#modifypublicpathstr"><span class="icon icon-link"></span></a>modifyPublicPathStr</h3><p>ä¿®æ”¹ publicPath å­—ç¬¦ä¸²ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>route</code>: å½“å‰è·¯ç”±</li></ul><p>æ³¨ï¼š</p><ul><li>ä»…åœ¨é…ç½®äº† runtimePublicPath æˆ– exportStatic?.dynamicRoot æ—¶æœ‰æ•ˆ</li></ul><h3 id="modifyroutes"><a aria-hidden="true" href="#modifyroutes"><span class="icon icon-link"></span></a>modifyRoutes</h3><p>ä¿®æ”¹è·¯ç”±ã€‚</p><h3 id="onpatchroute-route-parentroute-"><a aria-hidden="true" href="#onpatchroute-route-parentroute-"><span class="icon icon-link"></span></a>onPatchRoute(<!-- -->{<!-- --> route, parentRoute <!-- -->}<!-- -->)</h3><p>ä¿®æ”¹è·¯ç”±é¡¹ã€‚</p><h3 id="onpatchroutebefore-route-parentroute-"><a aria-hidden="true" href="#onpatchroutebefore-route-parentroute-"><span class="icon icon-link"></span></a>onPatchRouteBefore(<!-- -->{<!-- --> route, parentRoute <!-- -->}<!-- -->)</h3><p>ä¿®æ”¹è·¯ç”±é¡¹ã€‚</p><h3 id="onpatchroutes-routes-parentroute-"><a aria-hidden="true" href="#onpatchroutes-routes-parentroute-"><span class="icon icon-link"></span></a>onPatchRoutes(<!-- -->{<!-- --> routes, parentRoute <!-- -->}<!-- -->)</h3><p>ä¿®æ”¹è·¯ç”±æ•°ç»„ã€‚</p><h3 id="onpatchroutesbefore-routes-parentroute-"><a aria-hidden="true" href="#onpatchroutesbefore-routes-parentroute-"><span class="icon icon-link"></span></a>onPatchRoutesBefore(<!-- -->{<!-- --> routes, parentRoute <!-- -->}<!-- -->)</h3><p>ä¿®æ”¹è·¯ç”±æ•°ç»„ã€‚</p><h3 id="onbuildcomplete-err-stats-"><a aria-hidden="true" href="#onbuildcomplete-err-stats-"><span class="icon icon-link"></span></a>onBuildComplete(<!-- -->{<!-- --> err?, stats? <!-- -->}<!-- -->)</h3><p>æ„å»ºå®Œæˆæ—¶å¯ä»¥åšçš„äº‹ã€‚</p><p>æ³¨ï¼š</p><ul><li>å¯èƒ½æ˜¯å¤±è´¥çš„ï¼Œæ³¨æ„åˆ¤æ–­ err å‚æ•°</li></ul><h3 id="ondevcompiledone-isfirstcompile-boolean-stats-webpackstats-"><a aria-hidden="true" href="#ondevcompiledone-isfirstcompile-boolean-stats-webpackstats-"><span class="icon icon-link"></span></a>onDevCompileDone(<!-- -->{<!-- --> isFirstCompile: boolean, stats: webpack.Stats <!-- -->}<!-- -->)</h3><p>ç¼–è¯‘å®Œæˆæ—¶å¯ä»¥åšçš„äº‹ã€‚</p><p>æ³¨ï¼š</p><ul><li>ä¸åŒ…å«ç¼–è¯‘å¤±è´¥</li></ul><h3 id="ongeneratefiles"><a aria-hidden="true" href="#ongeneratefiles"><span class="icon icon-link"></span></a>onGenerateFiles</h3><p>ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œè§¦å‘æ—¶æœºåœ¨ webpack ç¼–è¯‘ä¹‹å‰ã€‚</p><h3 id="onpluginready"><a aria-hidden="true" href="#onpluginready"><span class="icon icon-link"></span></a>onPluginReady()</h3><p>åœ¨æ’ä»¶åˆå§‹åŒ–å®Œæˆè§¦å‘ã€‚åœ¨ <code>onStart</code> ä¹‹å‰ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰ config å’Œ pathsï¼Œä»–ä»¬å°šæœªè§£æå¥½ã€‚</p><h3 id="onstart"><a aria-hidden="true" href="#onstart"><span class="icon icon-link"></span></a>onStart()</h3><p>åœ¨å‘½ä»¤æ³¨å†Œå‡½æ•°æ‰§è¡Œå‰è§¦å‘ã€‚å¯ä»¥ä½¿ç”¨ config å’Œ pathsã€‚</p><h3 id="onexit"><a aria-hidden="true" href="#onexit"><span class="icon icon-link"></span></a>onExit()</h3><p>dev é€€å‡ºæ—¶è§¦å‘ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>signal</code>: å€¼ä¸º SIGINTã€SIGQUIT æˆ– SIGTERM</li></ul><p>æ³¨ï¼š</p><ul><li>åªé’ˆå¯¹ dev å‘½ä»¤æœ‰æ•ˆ</li></ul><h3 id="writetmpfile-path-string-content-string-skiptscheck-boolean-"><a aria-hidden="true" href="#writetmpfile-path-string-content-string-skiptscheck-boolean-"><span class="icon icon-link"></span></a>writeTmpFile(<!-- -->{<!-- --> path: string, content: string, skipTSCheck?: boolean <!-- -->}<!-- -->)</h3><p>å†™ä¸´æ—¶æ–‡ä»¶ã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>path</code>ï¼šç›¸å¯¹äºä¸´æ—¶æ–‡ä»¶å¤¹çš„è·¯å¾„</li><li><code>content</code>ï¼šæ–‡ä»¶å†…å®¹</li><li><code>skipTSCheck</code>ï¼šé»˜è®¤ä¸º <code>true</code>ï¼Œ<code>path</code> ä¸º ts æˆ– tsx æ–‡ä»¶ï¼Œä¸æ£€æŸ¥ TypeScript ç±»å‹é”™è¯¯ï¼Œå¦‚æœå¸Œæœ›æ’ä»¶å¯¹ç”¨æˆ·é¡¹ç›®è¿›è¡Œ TypeScript ç±»å‹æ£€æŸ¥ï¼Œå¯ä»¥è®¾ç½®ä¸º <code>false</code>ã€‚</li></ul><p>æ³¨ï¼š</p><ul><li>ä¸èƒ½åœ¨æ³¨å†Œé˜¶æ®µä½¿ç”¨ï¼Œé€šå¸¸æ”¾åœ¨ <code>api.onGenerateFiles()</code> é‡Œï¼Œè¿™æ ·èƒ½åœ¨éœ€è¦æ—¶é‡æ–°ç”Ÿæˆä¸´æ—¶æ–‡ä»¶</li><li>ä¸´æ—¶æ–‡ä»¶çš„å†™å…¥åšäº†ç¼“å­˜å¤„ç†ï¼Œå¦‚æœå†…å®¹ä¸€è‡´ï¼Œä¸ä¼šåšå†™çš„æ“ä½œï¼Œä»¥å‡å°‘è§¦å‘ webpack çš„é‡æ–°ç¼–è¯‘</li></ul><h2 id="å±æ€§"><a aria-hidden="true" href="#å±æ€§"><span class="icon icon-link"></span></a>å±æ€§</h2><h3 id="args"><a aria-hidden="true" href="#args"><span class="icon icon-link"></span></a>args</h3><p>å‘½ä»¤è¡Œå‚æ•°ã€‚</p><h3 id="babelregistersetonlymap-key-string-value-string-"><a aria-hidden="true" href="#babelregistersetonlymap-key-string-value-string-"><span class="icon icon-link"></span></a>babelRegister.setOnlyMap(<!-- -->{<!-- --> key: string, value: string[] <!-- -->}<!-- -->)</h3><p>è®¾ç½®éœ€è¦èµ° babel ç¼–è¯‘çš„æ–‡ä»¶åˆ—è¡¨ã€‚</p><p>æ³¨ï¼š</p><ul><li>å¦‚æœæœ‰ watch æ“ä½œï¼Œæ¯æ¬¡é‡å¤è®¾ç½®æ—¶è¯·ä¿æŒ key ç›¸åŒ</li></ul><h3 id="config"><a aria-hidden="true" href="#config"><span class="icon icon-link"></span></a>config</h3><p>ç”¨æˆ·é…ç½®ã€‚</p><p>æ³¨ï¼š</p><ul><li>æ³¨å†Œé˜¶æ®µä¸èƒ½è·å–åˆ°ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨å¤–é¢ <code>const <!-- -->{<!-- --> config <!-- -->}<!-- --> = api;</code> ç„¶ååœ¨å‡½æ•°ä½“é‡Œä½¿ç”¨ï¼Œè€Œæ˜¯éœ€è¦åœ¨é‡Œé¢é€šè¿‡ <code>api.paths.cwd</code> ä½¿ç”¨</li></ul><h3 id="cwd"><a aria-hidden="true" href="#cwd"><span class="icon icon-link"></span></a>cwd</h3><p>å½“å‰è·¯å¾„ã€‚</p><h3 id="env"><a aria-hidden="true" href="#env"><span class="icon icon-link"></span></a>env</h3><p>å³ process.env.NODE_ENVï¼Œå¯èƒ½æœ‰ <code>development</code>ã€<code>production</code> å’Œ <code>test</code>ã€‚</p><p>æ¯”å¦‚ï¼Œ</p><ul><li>å‘½ä»¤è¡Œ <code>umi dev --foo</code>ï¼Œargs ä¸º <code>{<!-- --> _: [], foo: true <!-- -->}</code></li><li>å‘½ä»¤è¡Œ <code>umi g page index --typescript --less</code>ï¼Œargs ä¸º <code>{<!-- --> _: [&#x27;page&#x27;, &#x27;index&#x27;], typescript: true, less: true <!-- -->}</code></li></ul><h3 id="id"><a aria-hidden="true" href="#id"><span class="icon icon-link"></span></a>id</h3><p>æ’ä»¶ idï¼Œé€šå¸¸æ˜¯åŒ…åã€‚</p><h3 id="logger"><a aria-hidden="true" href="#logger"><span class="icon icon-link"></span></a>logger</h3><p>æ’ä»¶æ—¥å¿—ç±»ï¼ŒåŒ…å« <code>api.logger.(log|info|debug|error|warn|profile)</code></p><p>å…¶ä¸­ <code>api.logger.profile</code> å¯ç”¨äºæ€§èƒ½è€—æ—¶è®°å½•ï¼Œä¾‹å¦‚ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export default api =&gt; {
  api.logger.profile(&#x27;barId&#x27;);
  setTimeout(() =&gt; {
    api.logger.profile(&#x27;barId&#x27;);
  });
};

// =&gt; [PROFILE] Completed in *ms
" data-status="copy"></button><div class="token-line"><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token parameter">api</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  api</span><span class="token punctuation">.</span><span class="token property-access">logger</span><span class="token punctuation">.</span><span class="token method function property-access">profile</span><span class="token punctuation">(</span><span class="token string">&#x27;barId&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    api</span><span class="token punctuation">.</span><span class="token property-access">logger</span><span class="token punctuation">.</span><span class="token method function property-access">profile</span><span class="token punctuation">(</span><span class="token string">&#x27;barId&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// =&gt; [PROFILE] Completed in *ms</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="key"><a aria-hidden="true" href="#key"><span class="icon icon-link"></span></a>key</h3><p>æ’ä»¶çš„é…ç½® keyï¼Œé€šå¸¸æ˜¯åŒ…åçš„ç®€å†™ã€‚</p><p>æ¯”å¦‚ <code>@umijs/plugin-dva</code>ï¼Œå…¶ key ä¸º <code>dva</code>ï¼›æ¯”å¦‚ <code>umi-plugin-antd</code>ï¼Œå…¶ key ä¸º <code>antd</code>ã€‚</p><h3 id="paths"><a aria-hidden="true" href="#paths"><span class="icon icon-link"></span></a>paths</h3><p>ç›¸å…³è·¯å¾„ï¼ŒåŒ…å«ï¼š</p><ul><li><code>cwd</code>ï¼Œå½“å‰è·¯å¾„</li><li><code>absSrcPath</code>ï¼Œsrc ç›®å½•ç»å¯¹è·¯å¾„ï¼Œéœ€æ³¨æ„ src ç›®å½•æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ²¡æœ‰ src ç›®å½•ï¼Œ<code>absSrcPath</code> ç­‰åŒäº <code>cwd</code></li><li><code>absPagesPath</code>ï¼Œpages ç›®å½•ç»å¯¹è·¯å¾„</li><li><code>absTmpPath</code>ï¼Œä¸´æ—¶ç›®å½•ç»å¯¹è·¯å¾„</li><li><code>absOutputPath</code>ï¼Œè¾“å‡ºè·¯å¾„ï¼Œé»˜è®¤æ˜¯ <code>./dist</code></li><li><code>absNodeModulesPath</code>ï¼Œnode_modules ç›®å½•ç»å¯¹è·¯å¾„</li><li><code>aliasedTmpPath</code>ï¼Œä»¥ <code>@</code> å¼€å¤´çš„ä¸´æ—¶è·¯å¾„ï¼Œé€šå¸¸ç”¨äº</li></ul><p>æ³¨ï¼š</p><ul><li>æ³¨å†Œé˜¶æ®µä¸èƒ½è·å–åˆ°ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨å¤–é¢ <code>const <!-- -->{<!-- --> paths <!-- -->}<!-- --> = api;</code> ç„¶ååœ¨å‡½æ•°ä½“é‡Œ <code>paths.cwd</code> ä½¿ç”¨ï¼Œè€Œæ˜¯éœ€è¦åœ¨é‡Œé¢é€šè¿‡ <code>api.paths.cwd</code> ä½¿ç”¨</li></ul><h3 id="pkg"><a aria-hidden="true" href="#pkg"><span class="icon icon-link"></span></a>pkg</h3><p>å½“å‰é¡¹ç›®çš„ package.jsonï¼Œæ ¼å¼ä¸º Objectã€‚</p><h3 id="service"><a aria-hidden="true" href="#service"><span class="icon icon-link"></span></a>service</h3><p>Service å®ä¾‹ã€‚é€šå¸¸ä¸éœ€è¦ç”¨åˆ°ï¼Œé™¤éä½ çŸ¥é“ä¸ºå•¥è¦ç”¨ã€‚</p><h3 id="stage"><a aria-hidden="true" href="#stage"><span class="icon icon-link"></span></a>stage</h3><p>Service è¿è¡Œé˜¶æ®µã€‚</p><h3 id="userconfig"><a aria-hidden="true" href="#userconfig"><span class="icon icon-link"></span></a>userConfig</h3><p>çº¯ç”¨æˆ·é…ç½®ï¼Œå°±æ˜¯ <code>.umirc</code> æˆ– <code>config/config</code> é‡Œçš„å†…å®¹ï¼Œæ²¡æœ‰ç»è¿‡ defaultConfig ä»¥åŠæ’ä»¶çš„ä»»ä½•å¤„ç†ã€‚</p><p>æ³¨ï¼š</p><ul><li>å’Œ config çš„åŒºåˆ«æ˜¯ï¼Œå¯ä»¥åœ¨æ³¨å†Œé˜¶æ®µå–åˆ°</li></ul><h3 id="utils"><a aria-hidden="true" href="#utils"><span class="icon icon-link"></span></a>utils</h3><p>utils æ–¹æ³•ï¼Œè¯¦è§ <a href="javascript:if(confirm('https://github.com/umijs/umi/blob/master/packages/utils/src/index.ts  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi/blob/master/packages/utils/src/index.ts'" tppabs="https://github.com/umijs/umi/blob/master/packages/utils/src/index.ts" target="_blank">@umijs/utils/src/index.ts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p><p>æ³¨ï¼š</p><ul><li>åŸåˆ™ä¸ŠåŒç±»åŠŸèƒ½çš„æ–¹æ³•ä¸å…è®¸ä½¿ç”¨å…¶ä»–çš„ï¼Œä»¥é™ä½æ•´ä½“å°ºå¯¸ï¼Œæ¯”å¦‚è¯·æ±‚ç”¨ gotï¼Œå‚æ•°å¤„ç†ç”¨ yargs</li><li>ç¼–å†™æ’ä»¶æ—¶ï¼Œé™¤äº† <code>api.utils</code>ï¼Œè¿˜å¯é€šè¿‡ <code>import <!-- -->{<!-- --> utils <!-- -->}<!-- --> from &#x27;umi&#x27;</code> å–åˆ°ï¼Œé€šå¸¸ç”¨äºéæ’ä»¶ä¸»å…¥å£çš„æ–‡ä»¶</li></ul><h3 id="applypluginstype"><a aria-hidden="true" href="#applypluginstype"><span class="icon icon-link"></span></a>ApplyPluginsType</h3><p>ä¸º <code>api.applyPlugins()</code> æä¾› type å‚æ•°çš„ç±»å‹ï¼ŒåŒ…å«ä¸‰ç§ï¼š</p><ul><li>add</li><li>modify</li><li>event</li></ul><h3 id="configchangetype"><a aria-hidden="true" href="#configchangetype"><span class="icon icon-link"></span></a>ConfigChangeType</h3><p>ä¸º <code>api.describe()</code> æä¾› config.onChange çš„ç±»å‹ï¼Œç›®å‰åŒ…å«ä¸¤ç§ï¼š</p><ul><li>restartï¼Œé‡å¯ dev è¿›ç¨‹ï¼Œé»˜è®¤æ˜¯è¿™ä¸ª</li><li>regenerateTmpFilesï¼Œé‡æ–°ç”Ÿæˆä¸´æ—¶æ–‡ä»¶</li></ul><h3 id="enableby"><a aria-hidden="true" href="#enableby"><span class="icon icon-link"></span></a>EnableBy</h3><p>æ’ä»¶çš„å¯ç”¨æ–¹å¼ï¼ŒåŒ…å«ä¸‰ç§ï¼Œ</p><ul><li>register</li><li>config</li><li>Function</li></ul><h3 id="html"><a aria-hidden="true" href="#html"><span class="icon icon-link"></span></a>Html</h3><h3 id="servicestage"><a aria-hidden="true" href="#servicestage"><span class="icon icon-link"></span></a>ServiceStage</h3><p><code>stage</code> çš„æšä¸¾ç±»å‹ï¼Œé€šå¸¸ç”¨äºå’Œ <code>stage</code> çš„æ¯”è¾ƒã€‚</p><h2 id="ç¯å¢ƒå˜é‡"><a aria-hidden="true" href="#ç¯å¢ƒå˜é‡"><span class="icon icon-link"></span></a>ç¯å¢ƒå˜é‡</h2><p>å¯ä»¥ç”¨åˆ°çš„ç¯å¢ƒå˜é‡ã€‚</p><ul><li>UMI_VERSIONï¼Œumi ç‰ˆæœ¬å·</li><li>UMI_DIRï¼Œ<code>umi/package.json</code> æ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„</li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" href="javascript:if(confirm('https://github.com/umijs/umi/edit/master/docs/plugins/api.zh-CN.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/umijs/umi/edit/master/docs/plugins/api.zh-CN.md'" tppabs="https://github.com/umijs/umi/edit/master/docs/plugins/api.zh-CN.md">åœ¨ GitHub ä¸Šç¼–è¾‘è¿™ç¯‡æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="æœ€åæ›´æ–°æ—¶é—´ï¼š">6/10/2020, 7:42:23 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "../../../www.google-analytics.com/analytics.js"/*tpa=https://www.google-analytics.com/analytics.js*/,
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="../../umi.js" tppabs="https://umijs.org/umi.js"></script>
  </body>
</html>
