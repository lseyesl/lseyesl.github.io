<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset=utf-8"utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dva å›¾è§£ | DvaJS</title>
    <meta name="description" content="React and redux based, lightweight and elm-style framework.">
    
    
    <link rel="preload" href="/assets/css/0.styles.56052c7b.css" as="style"><link rel="preload" href="/assets/js/app.0350af5f.js" as="script"><link rel="preload" href="/assets/js/12.ac9cbdcf.js" as="script"><link rel="prefetch" href="/assets/js/10.c92e8561.js"><link rel="prefetch" href="/assets/js/11.bf005912.js"><link rel="prefetch" href="/assets/js/13.630bf05d.js"><link rel="prefetch" href="/assets/js/14.660b7dd5.js"><link rel="prefetch" href="/assets/js/15.d6e76d28.js"><link rel="prefetch" href="/assets/js/16.190e2547.js"><link rel="prefetch" href="/assets/js/17.1bf4a649.js"><link rel="prefetch" href="/assets/js/2.b37273cf.js"><link rel="prefetch" href="/assets/js/3.f73926c2.js"><link rel="prefetch" href="/assets/js/4.25c1c6c7.js"><link rel="prefetch" href="/assets/js/5.bacd05e6.js"><link rel="prefetch" href="/assets/js/6.35edbabf.js"><link rel="prefetch" href="/assets/js/7.19a2461b.js"><link rel="prefetch" href="/assets/js/8.3fbf0504.js"><link rel="prefetch" href="/assets/js/9.2c969215.js">
    <link rel="stylesheet" href="../assets/css/0.styles.56052c7b.css" tppabs="https://dvajs.com/assets/css/0.styles.56052c7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="../index.htm" tppabs="https://dvajs.com/" class="home-link router-link-active"><!----> <span class="site-name">DvaJS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="index.htm" tppabs="https://dvajs.com/guide/" class="nav-link router-link-active">æŒ‡å—</a></div><div class="nav-item"><a href="../api/index.htm" tppabs="https://dvajs.com/api/" class="nav-link">API</a></div><div class="nav-item"><a href="../knowledgemap/index.htm" tppabs="https://dvajs.com/knowledgemap/" class="nav-link">çŸ¥è¯†åœ°å›¾</a></div><div class="nav-item"><a href="javascript:if(confirm('https://github.com/dvajs/dva/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/releases'" tppabs="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å‘å¸ƒæ—¥å¿—
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="javascript:if(confirm('https://github.com/dvajs/dva  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva'" tppabs="https://github.com/dvajs/dva" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="index.htm" tppabs="https://dvajs.com/guide/" class="nav-link router-link-active">æŒ‡å—</a></div><div class="nav-item"><a href="../api/index.htm" tppabs="https://dvajs.com/api/" class="nav-link">API</a></div><div class="nav-item"><a href="../knowledgemap/index.htm" tppabs="https://dvajs.com/knowledgemap/" class="nav-link">çŸ¥è¯†åœ°å›¾</a></div><div class="nav-item"><a href="javascript:if(confirm('https://github.com/dvajs/dva/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/releases'" tppabs="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å‘å¸ƒæ—¥å¿—
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="javascript:if(confirm('https://github.com/dvajs/dva  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva'" tppabs="https://github.com/dvajs/dva" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>æŒ‡å—</span> <!----></p> <ul class="sidebar-group-items"><li><a href="index.htm" tppabs="https://dvajs.com/guide/" class="sidebar-link">ä»‹ç»</a></li><li><a href="getting-started.html" tppabs="https://dvajs.com/guide/getting-started.html" class="sidebar-link">å¿«é€Ÿä¸Šæ‰‹</a></li><li><a href="examples-and-boilerplates.html" tppabs="https://dvajs.com/guide/examples-and-boilerplates.html" class="sidebar-link">ä¾‹å­å’Œè„šæ‰‹æ¶</a></li><li><a href="concepts.html" tppabs="https://dvajs.com/guide/concepts.html" class="sidebar-link">Dva æ¦‚å¿µ</a></li><li><a href="introduce-class.html" tppabs="https://dvajs.com/guide/introduce-class.html" class="sidebar-link">å…¥é—¨è¯¾</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>ç¤¾åŒº</span> <!----></p> <ul class="sidebar-group-items"><li><a href="fig-show.html" tppabs="https://dvajs.com/guide/fig-show.html" class="active sidebar-link">Dva å›¾è§£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="fig-show.html#ç¤ºä¾‹èƒŒæ™¯" tppabs="https://dvajs.com/guide/fig-show.html#ç¤ºä¾‹èƒŒæ™¯" class="sidebar-link">ç¤ºä¾‹èƒŒæ™¯</a></li><li class="sidebar-sub-header"><a href="fig-show.html#å›¾è§£ä¸€-react-è¡¨ç¤ºæ³•" tppabs="https://dvajs.com/guide/fig-show.html#å›¾è§£ä¸€-react-è¡¨ç¤ºæ³•" class="sidebar-link">å›¾è§£ä¸€: React è¡¨ç¤ºæ³•</a></li><li class="sidebar-sub-header"><a href="fig-show.html#å›¾è§£äºŒ-redux-è¡¨ç¤ºæ³•" tppabs="https://dvajs.com/guide/fig-show.html#å›¾è§£äºŒ-redux-è¡¨ç¤ºæ³•" class="sidebar-link">å›¾è§£äºŒ: Redux è¡¨ç¤ºæ³•</a></li><li class="sidebar-sub-header"><a href="fig-show.html#å›¾è§£ä¸‰-åŠ å…¥-saga" tppabs="https://dvajs.com/guide/fig-show.html#å›¾è§£ä¸‰-åŠ å…¥-saga" class="sidebar-link">å›¾è§£ä¸‰: åŠ å…¥ Saga</a></li><li class="sidebar-sub-header"><a href="fig-show.html#å›¾è§£å››-dva-è¡¨ç¤ºæ³•" tppabs="https://dvajs.com/guide/fig-show.html#å›¾è§£å››-dva-è¡¨ç¤ºæ³•" class="sidebar-link">å›¾è§£å››: Dva è¡¨ç¤ºæ³•</a></li></ul></li><li><a href="develop-complex-spa.html" tppabs="https://dvajs.com/guide/develop-complex-spa.html" class="sidebar-link">ä½¿ç”¨ Dva å¼€å‘å¤æ‚ SPA</a></li><li><a href="source-code-explore.html" tppabs="https://dvajs.com/guide/source-code-explore.html" class="sidebar-link">Dva æºç è§£æ</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="dva-å›¾è§£"><a href="#dva-å›¾è§£" aria-hidden="true" class="header-anchor">#</a> Dva å›¾è§£</h1> <blockquote><p>ä½œè€…ï¼šè‡³æ­£<br>
åŸæ–‡é“¾æ¥ï¼š<a href="javascript:if(confirm('https://yuque.com/flying.ni/the-tower/tvzasn  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://yuque.com/flying.ni/the-tower/tvzasn'" tppabs="https://yuque.com/flying.ni/the-tower/tvzasn" target="_blank" rel="noopener noreferrer">https://yuque.com/flying.ni/the-tower/tvzasn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="ç¤ºä¾‹èƒŒæ™¯"><a href="#ç¤ºä¾‹èƒŒæ™¯" aria-hidden="true" class="header-anchor">#</a> ç¤ºä¾‹èƒŒæ™¯</h2> <p>æœ€å¸¸è§çš„ Web ç±»ç¤ºä¾‹ä¹‹ä¸€: TodoList = Todo list + Add todo button</p> <h2 id="å›¾è§£ä¸€-react-è¡¨ç¤ºæ³•"><a href="#å›¾è§£ä¸€-react-è¡¨ç¤ºæ³•" aria-hidden="true" class="header-anchor">#</a> å›¾è§£ä¸€: React è¡¨ç¤ºæ³•</h2> <p><img src="../../cdn.yuque.com/yuque/0/2018/png/103904/1528436560812-2586a0b5-7a6a-4a07-895c-f822fa85d5de.png" tppabs="https://cdn.yuque.com/yuque/0/2018/png/103904/1528436560812-2586a0b5-7a6a-4a07-895c-f822fa85d5de.png" alt="å›¾ç‰‡.png | left | 747x518"></p> <p>æŒ‰ç…§ React å®˜æ–¹æŒ‡å¯¼æ„è§, å¦‚æœå¤šä¸ª Component ä¹‹é—´è¦å‘ç”Ÿäº¤äº’, é‚£ä¹ˆçŠ¶æ€(å³: æ•°æ®)å°±ç»´æŠ¤åœ¨è¿™äº› Component çš„æœ€å°å…¬çº¦çˆ¶èŠ‚ç‚¹ä¸Š, ä¹Ÿå³æ˜¯ <code>&lt;App/&gt;</code></p> <p><code>&lt;TodoList/&gt; &lt;Todo/&gt;</code> ä»¥åŠ<code>&lt;AddTodoBtn/&gt;</code> æœ¬èº«ä¸ç»´æŒä»»ä½• state, å®Œå…¨ç”±çˆ¶èŠ‚ç‚¹<code>&lt;App/&gt;</code> ä¼ å…¥ props ä»¥å†³å®šå…¶å±•ç°, æ˜¯ä¸€ä¸ªçº¯å‡½æ•°çš„å­˜åœ¨å½¢å¼, å³: <code>Pure Component</code></p> <h2 id="å›¾è§£äºŒ-redux-è¡¨ç¤ºæ³•"><a href="#å›¾è§£äºŒ-redux-è¡¨ç¤ºæ³•" aria-hidden="true" class="header-anchor">#</a> å›¾è§£äºŒ: Redux è¡¨ç¤ºæ³•</h2> <p>React åªè´Ÿè´£é¡µé¢æ¸²æŸ“, è€Œä¸è´Ÿè´£é¡µé¢é€»è¾‘, é¡µé¢é€»è¾‘å¯ä»¥ä»ä¸­å•ç‹¬æŠ½å–å‡ºæ¥, å˜æˆ store</p> <p><img src="../../cdn.yuque.com/yuque/0/2018/png/103904/1528436134375-4c15f63d-72f1-4c73-94a6-55b220d2547c.png" tppabs="https://cdn.yuque.com/yuque/0/2018/png/103904/1528436134375-4c15f63d-72f1-4c73-94a6-55b220d2547c.png" alt="å›¾ç‰‡.png | left | 747x558"></p> <p>ä¸å›¾ä¸€ç›¸æ¯”, å‡ ä¸ªæ˜æ˜¾çš„æ”¹è¿›ç‚¹:</p> <ol><li>çŠ¶æ€åŠé¡µé¢é€»è¾‘ä» <code>&lt;App/&gt;</code>é‡Œé¢æŠ½å–å‡ºæ¥, æˆä¸ºç‹¬ç«‹çš„ store, é¡µé¢é€»è¾‘å°±æ˜¯ reducer</li> <li><code>&lt;TodoList/&gt;</code> åŠ<code>&lt;AddTodoBtn/&gt;</code>éƒ½æ˜¯ Pure Component, é€šè¿‡ connect æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç»™å®ƒä¿©åŠ ä¸€å±‚ wrapper ä»è€Œå»ºç«‹èµ·ä¸ store çš„è”ç³»: å¯ä»¥é€šè¿‡ dispatch å‘ store æ³¨å…¥ action, ä¿ƒä½¿ store çš„çŠ¶æ€è¿›è¡Œå˜åŒ–, åŒæ—¶åˆè®¢é˜…äº† store çš„çŠ¶æ€å˜åŒ–, ä¸€æ—¦çŠ¶æ€æœ‰å˜, è¢« connect çš„ç»„ä»¶ä¹Ÿéšä¹‹åˆ·æ–°</li> <li>ä½¿ç”¨ dispatch å¾€ store å‘é€ action çš„è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä»¥è¢«æ‹¦æˆªçš„, è‡ªç„¶è€Œç„¶åœ°å°±å¯ä»¥åœ¨è¿™é‡Œå¢åŠ å„ç§ Middleware, å®ç°å„ç§è‡ªå®šä¹‰åŠŸèƒ½, eg: logging</li></ol> <p>è¿™æ ·ä¸€æ¥, å„ä¸ªéƒ¨åˆ†å„å¸å…¶èŒ, è€¦åˆåº¦æ›´ä½, å¤ç”¨åº¦æ›´é«˜, æ‰©å±•æ€§æ›´å¥½</p> <h2 id="å›¾è§£ä¸‰-åŠ å…¥-saga"><a href="#å›¾è§£ä¸‰-åŠ å…¥-saga" aria-hidden="true" class="header-anchor">#</a> å›¾è§£ä¸‰: åŠ å…¥ Saga</h2> <p><img src="../../cdn.yuque.com/yuque/0/2018/png/103904/1528436167824-7fa834ea-aa6c-4f9f-bab5-b8c5312bcf7e.png" tppabs="https://cdn.yuque.com/yuque/0/2018/png/103904/1528436167824-7fa834ea-aa6c-4f9f-bab5-b8c5312bcf7e.png" alt="å›¾ç‰‡.png | left | 747x504"></p> <p>ä¸Šé¢è¯´äº†, å¯ä»¥ä½¿ç”¨ Middleware æ‹¦æˆª action, è¿™æ ·ä¸€æ¥å¼‚æ­¥çš„ç½‘ç»œæ“ä½œä¹Ÿå°±å¾ˆæ–¹ä¾¿äº†, åšæˆä¸€ä¸ª Middleware å°±è¡Œäº†, è¿™é‡Œä½¿ç”¨ redux-saga è¿™ä¸ªç±»åº“, ä¸¾ä¸ªæ —å­:</p> <ol><li>ç‚¹å‡»åˆ›å»º Todo çš„æŒ‰é’®, å‘èµ·ä¸€ä¸ª type == addTodo çš„ action</li> <li>saga æ‹¦æˆªè¿™ä¸ª action, å‘èµ· http è¯·æ±‚, å¦‚æœè¯·æ±‚æˆåŠŸ, åˆ™ç»§ç»­å‘ reducer å‘ä¸€ä¸ª type == addTodoSucc çš„ action, æç¤ºåˆ›å»ºæˆåŠŸ, åä¹‹åˆ™å‘é€ type == addTodoFail çš„ action å³å¯</li></ol> <h2 id="å›¾è§£å››-dva-è¡¨ç¤ºæ³•"><a href="#å›¾è§£å››-dva-è¡¨ç¤ºæ³•" aria-hidden="true" class="header-anchor">#</a> å›¾è§£å››: Dva è¡¨ç¤ºæ³•</h2> <p><img src="../../cdn.yuque.com/yuque/0/2018/png/103904/1528436195004-cd3800f2-f13d-40ba-bb1f-4efba99cfe0d.png" tppabs="https://cdn.yuque.com/yuque/0/2018/png/103904/1528436195004-cd3800f2-f13d-40ba-bb1f-4efba99cfe0d.png" alt="å›¾ç‰‡.png | left | 747x490"></p> <p>æœ‰äº†å‰é¢çš„ä¸‰æ­¥é“ºå«, Dva çš„å‡ºç°ä¹Ÿå°±æ°´åˆ°æ¸ æˆäº†, æ­£å¦‚ Dva å®˜ç½‘æ‰€è¨€, Dva æ˜¯åŸºäº React + Redux + Saga çš„æœ€ä½³å®è·µæ²‰æ·€, åšäº† 3 ä»¶å¾ˆé‡è¦çš„äº‹æƒ…, å¤§å¤§æå‡äº†ç¼–ç ä½“éªŒ:</p> <ol><li>æŠŠ store åŠ saga ç»Ÿä¸€ä¸ºä¸€ä¸ª model çš„æ¦‚å¿µ, å†™åœ¨ä¸€ä¸ª js æ–‡ä»¶é‡Œé¢</li> <li>å¢åŠ äº†ä¸€ä¸ª Subscriptions, ç”¨äºæ”¶é›†å…¶ä»–æ¥æºçš„ action, eg: é”®ç›˜æ“ä½œ</li> <li>model å†™æ³•å¾ˆç®€çº¦, ç±»ä¼¼äº DSL æˆ–è€… RoR, coding å¿«å¾—é£èµ·âœˆï¸</li></ol> <p><code>çº¦å®šä¼˜äºé…ç½®, æ€»æ˜¯å¥½çš„</code>ğŸ˜†</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'count'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    record<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    current<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> newCurrent <span class="token operator">=</span> state<span class="token punctuation">.</span>current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span>
        record<span class="token punctuation">:</span> newCurrent <span class="token operator">&gt;</span> state<span class="token punctuation">.</span>record <span class="token operator">?</span> newCurrent <span class="token punctuation">:</span> state<span class="token punctuation">.</span>record<span class="token punctuation">,</span>
        current<span class="token punctuation">:</span> newCurrent<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">minus</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> current<span class="token punctuation">:</span> state<span class="token punctuation">.</span>current <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'minus'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  subscriptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">keyboardWatcher</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">key</span><span class="token punctuation">(</span><span class="token string">'âŒ˜+up, ctrl+up'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span><span class="token string">'add'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="javascript:if(confirm('https://github.com/dvajs/dva/edit/master/docs/guide/fig-show.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/edit/master/docs/guide/fig-show.md'" tppabs="https://github.com/dvajs/dva/edit/master/docs/guide/fig-show.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/11/2018, 10:56:45 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="introduce-class.html" tppabs="https://dvajs.com/guide/introduce-class.html" class="prev">
          å…¥é—¨è¯¾
        </a></span> <span class="next"><a href="develop-complex-spa.html" tppabs="https://dvajs.com/guide/develop-complex-spa.html">
          ä½¿ç”¨ Dva å¼€å‘å¤æ‚ SPA
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="../assets/js/app.0350af5f.js" tppabs="https://dvajs.com/assets/js/app.0350af5f.js" defer></script><script src="../assets/js/12.ac9cbdcf.js" tppabs="https://dvajs.com/assets/js/12.ac9cbdcf.js" defer></script>
  </body>
</html>
