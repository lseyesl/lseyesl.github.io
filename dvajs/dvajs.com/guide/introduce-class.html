<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset=utf-8"utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å…¥é—¨è¯¾ | DvaJS</title>
    <meta name="description" content="React and redux based, lightweight and elm-style framework.">
    
    
    <link rel="preload" href="/assets/css/0.styles.56052c7b.css" as="style"><link rel="preload" href="/assets/js/app.0350af5f.js" as="script"><link rel="preload" href="/assets/js/14.660b7dd5.js" as="script"><link rel="prefetch" href="/assets/js/10.c92e8561.js"><link rel="prefetch" href="/assets/js/11.bf005912.js"><link rel="prefetch" href="/assets/js/12.ac9cbdcf.js"><link rel="prefetch" href="/assets/js/13.630bf05d.js"><link rel="prefetch" href="/assets/js/15.d6e76d28.js"><link rel="prefetch" href="/assets/js/16.190e2547.js"><link rel="prefetch" href="/assets/js/17.1bf4a649.js"><link rel="prefetch" href="/assets/js/2.b37273cf.js"><link rel="prefetch" href="/assets/js/3.f73926c2.js"><link rel="prefetch" href="/assets/js/4.25c1c6c7.js"><link rel="prefetch" href="/assets/js/5.bacd05e6.js"><link rel="prefetch" href="/assets/js/6.35edbabf.js"><link rel="prefetch" href="/assets/js/7.19a2461b.js"><link rel="prefetch" href="/assets/js/8.3fbf0504.js"><link rel="prefetch" href="/assets/js/9.2c969215.js">
    <link rel="stylesheet" href="../assets/css/0.styles.56052c7b.css" tppabs="https://dvajs.com/assets/css/0.styles.56052c7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="../index.htm" tppabs="https://dvajs.com/" class="home-link router-link-active"><!----> <span class="site-name">DvaJS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="index.htm" tppabs="https://dvajs.com/guide/" class="nav-link router-link-active">æŒ‡å—</a></div><div class="nav-item"><a href="../api/index.htm" tppabs="https://dvajs.com/api/" class="nav-link">API</a></div><div class="nav-item"><a href="../knowledgemap/index.htm" tppabs="https://dvajs.com/knowledgemap/" class="nav-link">çŸ¥è¯†åœ°å›¾</a></div><div class="nav-item"><a href="javascript:if(confirm('https://github.com/dvajs/dva/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/releases'" tppabs="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å‘å¸ƒæ—¥å¿—
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="javascript:if(confirm('https://github.com/dvajs/dva  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva'" tppabs="https://github.com/dvajs/dva" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="index.htm" tppabs="https://dvajs.com/guide/" class="nav-link router-link-active">æŒ‡å—</a></div><div class="nav-item"><a href="../api/index.htm" tppabs="https://dvajs.com/api/" class="nav-link">API</a></div><div class="nav-item"><a href="../knowledgemap/index.htm" tppabs="https://dvajs.com/knowledgemap/" class="nav-link">çŸ¥è¯†åœ°å›¾</a></div><div class="nav-item"><a href="javascript:if(confirm('https://github.com/dvajs/dva/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/releases'" tppabs="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å‘å¸ƒæ—¥å¿—
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="javascript:if(confirm('https://github.com/dvajs/dva  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva'" tppabs="https://github.com/dvajs/dva" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>æŒ‡å—</span> <!----></p> <ul class="sidebar-group-items"><li><a href="index.htm" tppabs="https://dvajs.com/guide/" class="sidebar-link">ä»‹ç»</a></li><li><a href="getting-started.html" tppabs="https://dvajs.com/guide/getting-started.html" class="sidebar-link">å¿«é€Ÿä¸Šæ‰‹</a></li><li><a href="examples-and-boilerplates.html" tppabs="https://dvajs.com/guide/examples-and-boilerplates.html" class="sidebar-link">ä¾‹å­å’Œè„šæ‰‹æ¶</a></li><li><a href="concepts.html" tppabs="https://dvajs.com/guide/concepts.html" class="sidebar-link">Dva æ¦‚å¿µ</a></li><li><a href="introduce-class.html" tppabs="https://dvajs.com/guide/introduce-class.html" class="active sidebar-link">å…¥é—¨è¯¾</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="introduce-class.html#react-æ²¡æœ‰è§£å†³çš„é—®é¢˜" tppabs="https://dvajs.com/guide/introduce-class.html#react-æ²¡æœ‰è§£å†³çš„é—®é¢˜" class="sidebar-link">React æ²¡æœ‰è§£å†³çš„é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#é€šä¿¡é—®é¢˜" tppabs="https://dvajs.com/guide/introduce-class.html#é€šä¿¡é—®é¢˜" class="sidebar-link">é€šä¿¡é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#ç»„ä»¶é€šä¿¡çš„ä¾‹å­" tppabs="https://dvajs.com/guide/introduce-class.html#ç»„ä»¶é€šä¿¡çš„ä¾‹å­" class="sidebar-link">ç»„ä»¶é€šä¿¡çš„ä¾‹å­</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#æ•°æ®æµé—®é¢˜" tppabs="https://dvajs.com/guide/introduce-class.html#æ•°æ®æµé—®é¢˜" class="sidebar-link">æ•°æ®æµé—®é¢˜</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ" tppabs="https://dvajs.com/guide/introduce-class.html#ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ" class="sidebar-link">ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#dva-æ˜¯ä»€ä¹ˆ" tppabs="https://dvajs.com/guide/introduce-class.html#dva-æ˜¯ä»€ä¹ˆ" class="sidebar-link">dva æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#dva-åº”ç”¨çš„æœ€ç®€ç»“æ„" tppabs="https://dvajs.com/guide/introduce-class.html#dva-åº”ç”¨çš„æœ€ç®€ç»“æ„" class="sidebar-link">dva åº”ç”¨çš„æœ€ç®€ç»“æ„</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#æ•°æ®æµå›¾" tppabs="https://dvajs.com/guide/introduce-class.html#æ•°æ®æµå›¾" class="sidebar-link">æ•°æ®æµå›¾</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#æ ¸å¿ƒæ¦‚å¿µ" tppabs="https://dvajs.com/guide/introduce-class.html#æ ¸å¿ƒæ¦‚å¿µ" class="sidebar-link">æ ¸å¿ƒæ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#state-å’Œ-view" tppabs="https://dvajs.com/guide/introduce-class.html#state-å’Œ-view" class="sidebar-link">State å’Œ View</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#action" tppabs="https://dvajs.com/guide/introduce-class.html#action" class="sidebar-link">Action</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#connect-æ–¹æ³•" tppabs="https://dvajs.com/guide/introduce-class.html#connect-æ–¹æ³•" class="sidebar-link">connect æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#dispatch-æ–¹æ³•" tppabs="https://dvajs.com/guide/introduce-class.html#dispatch-æ–¹æ³•" class="sidebar-link">dispatch æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#dva-åº”ç”¨çš„æœ€ç®€ç»“æ„ï¼ˆå¸¦-model" tppabs="https://dvajs.com/guide/introduce-class.html#dva-åº”ç”¨çš„æœ€ç®€ç»“æ„ï¼ˆå¸¦-model" class="sidebar-link">dva åº”ç”¨çš„æœ€ç®€ç»“æ„ï¼ˆå¸¦ model)</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#æ•°æ®æµå›¾-1" tppabs="https://dvajs.com/guide/introduce-class.html#æ•°æ®æµå›¾-1" class="sidebar-link">æ•°æ®æµå›¾ 1</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#æ•°æ®æµå›¾-2" tppabs="https://dvajs.com/guide/introduce-class.html#æ•°æ®æµå›¾-2" class="sidebar-link">æ•°æ®æµå›¾ 2</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#app-model" tppabs="https://dvajs.com/guide/introduce-class.html#app-model" class="sidebar-link">app.model</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#model-å¯¹è±¡çš„ä¾‹å­" tppabs="https://dvajs.com/guide/introduce-class.html#model-å¯¹è±¡çš„ä¾‹å­" class="sidebar-link">Model å¯¹è±¡çš„ä¾‹å­</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#model-å¯¹è±¡çš„å±æ€§" tppabs="https://dvajs.com/guide/introduce-class.html#model-å¯¹è±¡çš„å±æ€§" class="sidebar-link">Model å¯¹è±¡çš„å±æ€§</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#reducer" tppabs="https://dvajs.com/guide/introduce-class.html#reducer" class="sidebar-link">Reducer</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#effect" tppabs="https://dvajs.com/guide/introduce-class.html#effect" class="sidebar-link">Effect</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#generator-å‡½æ•°" tppabs="https://dvajs.com/guide/introduce-class.html#generator-å‡½æ•°" class="sidebar-link">Generator å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#call-å’Œ-put" tppabs="https://dvajs.com/guide/introduce-class.html#call-å’Œ-put" class="sidebar-link">call å’Œ put</a></li><li class="sidebar-sub-header"><a href="introduce-class.html#è¯¾å ‚å®æˆ˜" tppabs="https://dvajs.com/guide/introduce-class.html#è¯¾å ‚å®æˆ˜" class="sidebar-link">è¯¾å ‚å®æˆ˜</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>ç¤¾åŒº</span> <!----></p> <ul class="sidebar-group-items"><li><a href="fig-show.html" tppabs="https://dvajs.com/guide/fig-show.html" class="sidebar-link">Dva å›¾è§£</a></li><li><a href="develop-complex-spa.html" tppabs="https://dvajs.com/guide/develop-complex-spa.html" class="sidebar-link">ä½¿ç”¨ Dva å¼€å‘å¤æ‚ SPA</a></li><li><a href="source-code-explore.html" tppabs="https://dvajs.com/guide/source-code-explore.html" class="sidebar-link">Dva æºç è§£æ</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="å…¥é—¨è¯¾"><a href="#å…¥é—¨è¯¾" aria-hidden="true" class="header-anchor">#</a> å…¥é—¨è¯¾</h1> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>å†…å®¹æ¥è‡ªä¹‹å‰ä¸ºå†…éƒ¨åŒå­¦å‡†å¤‡çš„å…¥é—¨è¯¾ã€‚</p></div> <h2 id="react-æ²¡æœ‰è§£å†³çš„é—®é¢˜"><a href="#react-æ²¡æœ‰è§£å†³çš„é—®é¢˜" aria-hidden="true" class="header-anchor">#</a> React æ²¡æœ‰è§£å†³çš„é—®é¢˜</h2> <p>React æœ¬èº«åªæ˜¯ä¸€ä¸ª DOM çš„æŠ½è±¡å±‚ï¼Œä½¿ç”¨ç»„ä»¶æ„å»ºè™šæ‹Ÿ DOMã€‚</p> <p>å¦‚æœå¼€å‘å¤§åº”ç”¨ï¼Œè¿˜éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚</p> <ul><li>é€šä¿¡ï¼šç»„ä»¶ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ</li> <li>æ•°æ®æµï¼šæ•°æ®å¦‚ä½•å’Œè§†å›¾ä¸²è”èµ·æ¥ï¼Ÿè·¯ç”±å’Œæ•°æ®å¦‚ä½•ç»‘å®šï¼Ÿå¦‚ä½•ç¼–å†™å¼‚æ­¥é€»è¾‘ï¼Ÿç­‰ç­‰</li></ul> <h2 id="é€šä¿¡é—®é¢˜"><a href="#é€šä¿¡é—®é¢˜" aria-hidden="true" class="header-anchor">#</a> é€šä¿¡é—®é¢˜</h2> <p>ç»„ä»¶ä¼šå‘ç”Ÿä¸‰ç§é€šä¿¡ã€‚</p> <ul><li>å‘å­ç»„ä»¶å‘æ¶ˆæ¯</li> <li>å‘çˆ¶ç»„ä»¶å‘æ¶ˆæ¯</li> <li>å‘å…¶ä»–ç»„ä»¶å‘æ¶ˆæ¯</li></ul> <p>React åªæä¾›äº†ä¸€ç§é€šä¿¡æ‰‹æ®µï¼šä¼ å‚ã€‚å¯¹äºå¤§åº”ç”¨ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚</p> <h2 id="ç»„ä»¶é€šä¿¡çš„ä¾‹å­"><a href="#ç»„ä»¶é€šä¿¡çš„ä¾‹å­" aria-hidden="true" class="header-anchor">#</a> ç»„ä»¶é€šä¿¡çš„ä¾‹å­</h2> <h3 id="æ­¥éª¤1"><a href="#æ­¥éª¤1" aria-hidden="true" class="header-anchor">#</a> æ­¥éª¤1</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Son<span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>è¿™é‡Œæ˜¾ç¤º Son ç»„ä»¶çš„å†…å®¹<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Father<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>çœ‹è¿™ä¸ªä¾‹å­ï¼Œæƒ³ä¸€æƒ³çˆ¶ç»„ä»¶å¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶çš„å€¼ã€‚</p> <h3 id="æ­¥éª¤2"><a href="#æ­¥éª¤2" aria-hidden="true" class="header-anchor">#</a> æ­¥éª¤2</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      son<span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      son<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Son onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeHandler</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>è¿™é‡Œæ˜¾ç¤º Son ç»„ä»¶çš„å†…å®¹ï¼š<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>son<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Father<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>çœ‹ä¸‹è¿™ä¸ªä¾‹å­ï¼Œçœ‹æ‡‚æºç ï¼Œç†è§£å­ç»„ä»¶å¦‚ä½•é€šè¿‡çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°ï¼Œå°†è‡ªå·±çš„å€¼å†ä¼ å›çˆ¶ç»„ä»¶ã€‚</p> <h2 id="æ•°æ®æµé—®é¢˜"><a href="#æ•°æ®æµé—®é¢˜" aria-hidden="true" class="header-anchor">#</a> æ•°æ®æµé—®é¢˜</h2> <p>ç›®å‰æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆæœ‰ï¼š</p> <ul><li>Fluxï¼Œå•å‘æ•°æ®æµæ–¹æ¡ˆï¼Œä»¥ <a href="javascript:if(confirm('https://github.com/reactjs/redux  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/reactjs/redux'" tppabs="https://github.com/reactjs/redux" target="_blank" rel="noopener noreferrer">Redux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä¸ºä»£è¡¨</li> <li>Reactiveï¼Œå“åº”å¼æ•°æ®æµæ–¹æ¡ˆï¼Œä»¥ <a href="javascript:if(confirm('https://github.com/mobxjs/mobx  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/mobxjs/mobx'" tppabs="https://github.com/mobxjs/mobx" target="_blank" rel="noopener noreferrer">Mobx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä¸ºä»£è¡¨</li> <li>å…¶ä»–ï¼Œæ¯”å¦‚ rxjs ç­‰</li></ul> <p>åˆ°åº•å“ªä¸€ç§æ¶æ„æœ€åˆé€‚ React ï¼Ÿ</p> <h2 id="ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ"><a href="#ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ" aria-hidden="true" class="header-anchor">#</a> ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ</h2> <p>æˆªæ­¢ 2017.1ï¼Œæœ€æµè¡Œçš„ç¤¾åŒº React åº”ç”¨æ¶æ„æ–¹æ¡ˆå¦‚ä¸‹ã€‚</p> <ul><li>è·¯ç”±ï¼š <a href="javascript:if(confirm('https://github.com/ReactTraining/react-router/tree/v2.8.1  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/ReactTraining/react-router/tree/v2.8.1'" tppabs="https://github.com/ReactTraining/react-router/tree/v2.8.1" target="_blank" rel="noopener noreferrer">React-Router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>æ¶æ„ï¼š <a href="javascript:if(confirm('https://github.com/reactjs/redux  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/reactjs/redux'" tppabs="https://github.com/reactjs/redux" target="_blank" rel="noopener noreferrer">Redux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>å¼‚æ­¥æ“ä½œï¼š <a href="javascript:if(confirm('https://github.com/yelouafi/redux-saga  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/yelouafi/redux-saga'" tppabs="https://github.com/yelouafi/redux-saga" target="_blank" rel="noopener noreferrer">Redux-saga<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>ç¼ºç‚¹ï¼šè¦å¼•å…¥å¤šä¸ªåº“ï¼Œé¡¹ç›®ç»“æ„å¤æ‚ã€‚</p> <h2 id="dva-æ˜¯ä»€ä¹ˆ"><a href="#dva-æ˜¯ä»€ä¹ˆ" aria-hidden="true" class="header-anchor">#</a> dva æ˜¯ä»€ä¹ˆ</h2> <p>dva æ˜¯ä½“éªŒæŠ€æœ¯éƒ¨å¼€å‘çš„ React åº”ç”¨æ¡†æ¶ï¼Œå°†ä¸Šé¢ä¸‰ä¸ª React å·¥å…·åº“åŒ…è£…åœ¨ä¸€èµ·ï¼Œç®€åŒ–äº† APIï¼Œè®©å¼€å‘ React åº”ç”¨æ›´åŠ æ–¹ä¾¿å’Œå¿«æ·ã€‚</p> <p>dva = React-Router + Redux + Redux-saga</p> <h2 id="dva-åº”ç”¨çš„æœ€ç®€ç»“æ„"><a href="#dva-åº”ç”¨çš„æœ€ç®€ç»“æ„" aria-hidden="true" class="header-anchor">#</a> dva åº”ç”¨çš„æœ€ç®€ç»“æ„</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> dva <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello dva<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºåº”ç”¨</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ³¨å†Œè§†å›¾</span>
app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¯åŠ¨åº”ç”¨</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ•°æ®æµå›¾"><a href="#æ•°æ®æµå›¾" aria-hidden="true" class="header-anchor">#</a> æ•°æ®æµå›¾</h2> <img src="../../zos.alipayobjects.com/rmsportal/hUFIivoOFjVmwNXjjfPE.png" tppabs="https://zos.alipayobjects.com/rmsportal/hUFIivoOFjVmwNXjjfPE.png" width="460" height="290"> <h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" aria-hidden="true" class="header-anchor">#</a> æ ¸å¿ƒæ¦‚å¿µ</h2> <ul><li>Stateï¼šä¸€ä¸ªå¯¹è±¡ï¼Œä¿å­˜æ•´ä¸ªåº”ç”¨çŠ¶æ€</li> <li>Viewï¼šReact ç»„ä»¶æ„æˆçš„è§†å›¾å±‚</li> <li>Actionï¼šä¸€ä¸ªå¯¹è±¡ï¼Œæè¿°äº‹ä»¶</li> <li>connect æ–¹æ³•ï¼šä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®š State åˆ° View</li> <li>dispatch æ–¹æ³•ï¼šä¸€ä¸ªå‡½æ•°ï¼Œå‘é€ Action åˆ° State</li></ul> <h2 id="state-å’Œ-view"><a href="#state-å’Œ-view" aria-hidden="true" class="header-anchor">#</a> State å’Œ View</h2> <p>State æ˜¯å‚¨å­˜æ•°æ®çš„åœ°æ–¹ï¼Œæ”¶åˆ° Action ä»¥åï¼Œä¼šæ›´æ–°æ•°æ®ã€‚</p> <p>View å°±æ˜¯ React ç»„ä»¶æ„æˆçš„ UI å±‚ï¼Œä» State å–æ•°æ®åï¼Œæ¸²æŸ“æˆ HTML ä»£ç ã€‚åªè¦ State æœ‰å˜åŒ–ï¼ŒView å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p> <h2 id="action"><a href="#action" aria-hidden="true" class="header-anchor">#</a> Action</h2> <p>Action æ˜¯ç”¨æ¥æè¿° UI å±‚äº‹ä»¶çš„ä¸€ä¸ªå¯¹è±¡ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'click-submit-button'</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>data
<span class="token punctuation">}</span>
</code></pre></div><h2 id="connect-æ–¹æ³•"><a href="#connect-æ–¹æ³•" aria-hidden="true" class="header-anchor">#</a> connect æ–¹æ³•</h2> <p>connect æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®š State åˆ° Viewã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> todos<span class="token punctuation">:</span> state<span class="token punctuation">.</span>todos <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>connect æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œé€šå¸¸ç§°ä¸ºå®¹å™¨ç»„ä»¶ã€‚å› ä¸ºå®ƒæ˜¯åŸå§‹ UI ç»„ä»¶çš„å®¹å™¨ï¼Œå³åœ¨å¤–é¢åŒ…äº†ä¸€å±‚ Stateã€‚</p> <p>connect æ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ mapStateToProps  å‡½æ•°ï¼ŒmapStateToProps å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå»ºç«‹ State åˆ° Props çš„æ˜ å°„å…³ç³»ã€‚</p> <h2 id="dispatch-æ–¹æ³•"><a href="#dispatch-æ–¹æ³•" aria-hidden="true" class="header-anchor">#</a> dispatch æ–¹æ³•</h2> <p>dispatch æ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•ï¼Œç”¨æ¥å°† Action å‘é€ç»™ Stateã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'click-submit-button'</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>data
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>dispatch æ–¹æ³•ä»å“ªé‡Œæ¥ï¼Ÿè¢« connect çš„ Component ä¼šè‡ªåŠ¨åœ¨ props ä¸­æ‹¥æœ‰ dispatch æ–¹æ³•ã€‚</p> <blockquote><p>connect çš„æ•°æ®ä»å“ªé‡Œæ¥?</p></blockquote> <h2 id="dva-åº”ç”¨çš„æœ€ç®€ç»“æ„ï¼ˆå¸¦-model"><a href="#dva-åº”ç”¨çš„æœ€ç®€ç»“æ„ï¼ˆå¸¦-model" aria-hidden="true" class="header-anchor">#</a> dva åº”ç”¨çš„æœ€ç®€ç»“æ„ï¼ˆå¸¦ model)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åˆ›å»ºåº”ç”¨</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ³¨å†Œ Model</span>
app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'count'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token function">addAfter1Second</span><span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'add'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ³¨å†Œè§†å›¾</span>
app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>ConnectedApp <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¯åŠ¨åº”ç”¨</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ•°æ®æµå›¾-1"><a href="#æ•°æ®æµå›¾-1" aria-hidden="true" class="header-anchor">#</a> æ•°æ®æµå›¾ 1</h2> <img src="../../zos.alipayobjects.com/rmsportal/cyzvnIrRhJGOiLliwhcZ.png" tppabs="https://zos.alipayobjects.com/rmsportal/cyzvnIrRhJGOiLliwhcZ.png" width="450" height="380"> <h2 id="æ•°æ®æµå›¾-2"><a href="#æ•°æ®æµå›¾-2" aria-hidden="true" class="header-anchor">#</a> æ•°æ®æµå›¾ 2</h2> <img src="../../zos.alipayobjects.com/rmsportal/pHTYrKJxQHPyJGAYOzMu.png" tppabs="https://zos.alipayobjects.com/rmsportal/pHTYrKJxQHPyJGAYOzMu.png" width="607" height="464"> <h2 id="app-model"><a href="#app-model" aria-hidden="true" class="header-anchor">#</a> app.model</h2> <p>dva æä¾› app.model è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„åº”ç”¨é€»è¾‘éƒ½å®šä¹‰åœ¨å®ƒä¸Šé¢ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–°å¢è¿™ä¸€è¡Œ</span>
app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/**/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="model-å¯¹è±¡çš„ä¾‹å­"><a href="#model-å¯¹è±¡çš„ä¾‹å­" aria-hidden="true" class="header-anchor">#</a> Model å¯¹è±¡çš„ä¾‹å­</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'count'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token function">addAfter1Second</span><span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'add'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="model-å¯¹è±¡çš„å±æ€§"><a href="#model-å¯¹è±¡çš„å±æ€§" aria-hidden="true" class="header-anchor">#</a> Model å¯¹è±¡çš„å±æ€§</h2> <ul><li>namespace: å½“å‰ Model çš„åç§°ã€‚æ•´ä¸ªåº”ç”¨çš„ Stateï¼Œç”±å¤šä¸ªå°çš„ Model çš„ State ä»¥ namespace ä¸º key åˆæˆ</li> <li>state: è¯¥ Model å½“å‰çš„çŠ¶æ€ã€‚æ•°æ®ä¿å­˜åœ¨è¿™é‡Œï¼Œç›´æ¥å†³å®šäº†è§†å›¾å±‚çš„è¾“å‡º</li> <li>reducers: Action å¤„ç†å™¨ï¼Œå¤„ç†åŒæ­¥åŠ¨ä½œï¼Œç”¨æ¥ç®—å‡ºæœ€æ–°çš„ State</li> <li>effectsï¼šAction å¤„ç†å™¨ï¼Œå¤„ç†å¼‚æ­¥åŠ¨ä½œ</li></ul> <h2 id="reducer"><a href="#reducer" aria-hidden="true" class="header-anchor">#</a> Reducer</h2> <p>Reducer æ˜¯ Action å¤„ç†å™¨ï¼Œç”¨æ¥å¤„ç†åŒæ­¥æ“ä½œï¼Œå¯ä»¥çœ‹åšæ˜¯ state çš„è®¡ç®—å™¨ã€‚å®ƒçš„ä½œç”¨æ˜¯æ ¹æ® Actionï¼Œä»ä¸Šä¸€ä¸ª State ç®—å‡ºå½“å‰ Stateã€‚</p> <p>ä¸€äº›ä¾‹å­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// count +1</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">// å¾€ [] é‡Œæ·»åŠ ä¸€ä¸ªæ–° todo</span>
<span class="token keyword">function</span> <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">// å¾€ { todos: [], loading: true } é‡Œæ·»åŠ ä¸€ä¸ªæ–° todoï¼Œå¹¶æ ‡è®° loading ä¸º false</span>
<span class="token keyword">function</span> <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>state<span class="token punctuation">,</span>
    todos<span class="token punctuation">:</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">,</span>
    loading<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="effect"><a href="#effect" aria-hidden="true" class="header-anchor">#</a> Effect</h2> <p>Action å¤„ç†å™¨ï¼Œå¤„ç†å¼‚æ­¥åŠ¨ä½œï¼ŒåŸºäº Redux-saga å®ç°ã€‚Effect æŒ‡çš„æ˜¯å‰¯ä½œç”¨ã€‚æ ¹æ®å‡½æ•°å¼ç¼–ç¨‹ï¼Œè®¡ç®—ä»¥å¤–çš„æ“ä½œéƒ½å±äº Effectï¼Œå…¸å‹çš„å°±æ˜¯ I/O æ“ä½œã€æ•°æ®åº“è¯»å†™ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">addAfter1Second</span><span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> <span class="token punctuation">{</span> put<span class="token punctuation">,</span> call <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'add'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="generator-å‡½æ•°"><a href="#generator-å‡½æ•°" aria-hidden="true" class="header-anchor">#</a> Generator å‡½æ•°</h2> <p>Effect æ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼Œå†…éƒ¨ä½¿ç”¨ yield å…³é”®å­—ï¼Œæ ‡è¯†æ¯ä¸€æ­¥çš„æ“ä½œï¼ˆä¸ç®¡æ˜¯å¼‚æ­¥æˆ–åŒæ­¥ï¼‰ã€‚</p> <h2 id="call-å’Œ-put"><a href="#call-å’Œ-put" aria-hidden="true" class="header-anchor">#</a> call å’Œ put</h2> <p>dva æä¾›å¤šä¸ª effect å‡½æ•°å†…éƒ¨çš„å¤„ç†å‡½æ•°ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ <code>call</code> å’Œ <code>put</code>ã€‚</p> <ul><li>callï¼šæ‰§è¡Œå¼‚æ­¥å‡½æ•°</li> <li>putï¼šå‘å‡ºä¸€ä¸ª Actionï¼Œç±»ä¼¼äº dispatch</li></ul> <h2 id="è¯¾å ‚å®æˆ˜"><a href="#è¯¾å ‚å®æˆ˜" aria-hidden="true" class="header-anchor">#</a> è¯¾å ‚å®æˆ˜</h2> <p>å†™ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«åˆ é™¤æŒ‰é’®ï¼Œç‚¹åˆ é™¤æŒ‰é’®åå»¶è¿Ÿ 1 ç§’æ‰§è¡Œåˆ é™¤ã€‚</p> <img src="../../zos.alipayobjects.com/rmsportal/qEVcuGVcKMGjlUNghHel.gif" tppabs="https://zos.alipayobjects.com/rmsportal/qEVcuGVcKMGjlUNghHel.gif"></div> <div class="page-edit"><div class="edit-link"><a href="javascript:if(confirm('https://github.com/dvajs/dva/edit/master/docs/guide/introduce-class.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/edit/master/docs/guide/introduce-class.md'" tppabs="https://github.com/dvajs/dva/edit/master/docs/guide/introduce-class.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/5/2018, 1:47:03 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="concepts.html" tppabs="https://dvajs.com/guide/concepts.html" class="prev">
          Dva æ¦‚å¿µ
        </a></span> <span class="next"><a href="fig-show.html" tppabs="https://dvajs.com/guide/fig-show.html">
          Dva å›¾è§£
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="../assets/js/app.0350af5f.js" tppabs="https://dvajs.com/assets/js/app.0350af5f.js" defer></script><script src="../assets/js/14.660b7dd5.js" tppabs="https://dvajs.com/assets/js/14.660b7dd5.js" defer></script>
  </body>
</html>
