<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset=utf-8"utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>çŸ¥è¯†åœ°å›¾ | DvaJS</title>
    <meta name="description" content="React and redux based, lightweight and elm-style framework.">
    
    
    <link rel="preload" href="/assets/css/0.styles.56052c7b.css" as="style"><link rel="preload" href="/assets/js/app.0350af5f.js" as="script"><link rel="preload" href="/assets/js/16.190e2547.js" as="script"><link rel="prefetch" href="/assets/js/10.c92e8561.js"><link rel="prefetch" href="/assets/js/11.bf005912.js"><link rel="prefetch" href="/assets/js/12.ac9cbdcf.js"><link rel="prefetch" href="/assets/js/13.630bf05d.js"><link rel="prefetch" href="/assets/js/14.660b7dd5.js"><link rel="prefetch" href="/assets/js/15.d6e76d28.js"><link rel="prefetch" href="/assets/js/17.1bf4a649.js"><link rel="prefetch" href="/assets/js/2.b37273cf.js"><link rel="prefetch" href="/assets/js/3.f73926c2.js"><link rel="prefetch" href="/assets/js/4.25c1c6c7.js"><link rel="prefetch" href="/assets/js/5.bacd05e6.js"><link rel="prefetch" href="/assets/js/6.35edbabf.js"><link rel="prefetch" href="/assets/js/7.19a2461b.js"><link rel="prefetch" href="/assets/js/8.3fbf0504.js"><link rel="prefetch" href="/assets/js/9.2c969215.js">
    <link rel="stylesheet" href="../assets/css/0.styles.56052c7b.css" tppabs="https://dvajs.com/assets/css/0.styles.56052c7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="../index.htm" tppabs="https://dvajs.com/" class="home-link router-link-active"><!----> <span class="site-name">DvaJS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="../guide/index.htm" tppabs="https://dvajs.com/guide/" class="nav-link">æŒ‡å—</a></div><div class="nav-item"><a href="../api/index.htm" tppabs="https://dvajs.com/api/" class="nav-link">API</a></div><div class="nav-item"><a href="index.htm" tppabs="https://dvajs.com/knowledgemap/" class="nav-link router-link-exact-active router-link-active">çŸ¥è¯†åœ°å›¾</a></div><div class="nav-item"><a href="javascript:if(confirm('https://github.com/dvajs/dva/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/releases'" tppabs="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å‘å¸ƒæ—¥å¿—
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="javascript:if(confirm('https://github.com/dvajs/dva  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva'" tppabs="https://github.com/dvajs/dva" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="../guide/index.htm" tppabs="https://dvajs.com/guide/" class="nav-link">æŒ‡å—</a></div><div class="nav-item"><a href="../api/index.htm" tppabs="https://dvajs.com/api/" class="nav-link">API</a></div><div class="nav-item"><a href="index.htm" tppabs="https://dvajs.com/knowledgemap/" class="nav-link router-link-exact-active router-link-active">çŸ¥è¯†åœ°å›¾</a></div><div class="nav-item"><a href="javascript:if(confirm('https://github.com/dvajs/dva/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/releases'" tppabs="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å‘å¸ƒæ—¥å¿—
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="javascript:if(confirm('https://github.com/dvajs/dva  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva'" tppabs="https://github.com/dvajs/dva" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="index.htm" tppabs="https://dvajs.com/knowledgemap/" class="active sidebar-link">çŸ¥è¯†åœ°å›¾</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#javascript-è¯­è¨€" tppabs="https://dvajs.com/knowledgemap/#javascript-è¯­è¨€" class="sidebar-link">JavaScript è¯­è¨€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#å˜é‡å£°æ˜" tppabs="https://dvajs.com/knowledgemap/#å˜é‡å£°æ˜" class="sidebar-link">å˜é‡å£°æ˜</a></li><li class="sidebar-sub-header"><a href="index.htm#ç®­å¤´å‡½æ•°" tppabs="https://dvajs.com/knowledgemap/#ç®­å¤´å‡½æ•°" class="sidebar-link">ç®­å¤´å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="index.htm#æ¨¡å—çš„-import-å’Œ-export" tppabs="https://dvajs.com/knowledgemap/#æ¨¡å—çš„-import-å’Œ-export" class="sidebar-link">æ¨¡å—çš„ Import å’Œ Export</a></li><li class="sidebar-sub-header"><a href="index.htm#es6-å¯¹è±¡å’Œæ•°ç»„" tppabs="https://dvajs.com/knowledgemap/#es6-å¯¹è±¡å’Œæ•°ç»„" class="sidebar-link">ES6 å¯¹è±¡å’Œæ•°ç»„</a></li><li class="sidebar-sub-header"><a href="index.htm#promises" tppabs="https://dvajs.com/knowledgemap/#promises" class="sidebar-link">Promises</a></li><li class="sidebar-sub-header"><a href="index.htm#generators" tppabs="https://dvajs.com/knowledgemap/#generators" class="sidebar-link">Generators</a></li></ul></li><li class="sidebar-sub-header"><a href="index.htm#react-component" tppabs="https://dvajs.com/knowledgemap/#react-component" class="sidebar-link">React Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#stateless-functional-components" tppabs="https://dvajs.com/knowledgemap/#stateless-functional-components" class="sidebar-link">Stateless Functional Components</a></li><li class="sidebar-sub-header"><a href="index.htm#jsx" tppabs="https://dvajs.com/knowledgemap/#jsx" class="sidebar-link">JSX</a></li><li class="sidebar-sub-header"><a href="index.htm#props" tppabs="https://dvajs.com/knowledgemap/#props" class="sidebar-link">Props</a></li><li class="sidebar-sub-header"><a href="index.htm#css-modules" tppabs="https://dvajs.com/knowledgemap/#css-modules" class="sidebar-link">CSS Modules</a></li></ul></li><li class="sidebar-sub-header"><a href="index.htm#reducer" tppabs="https://dvajs.com/knowledgemap/#reducer" class="sidebar-link">Reducer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#å¢åˆ æ”¹" tppabs="https://dvajs.com/knowledgemap/#å¢åˆ æ”¹" class="sidebar-link">å¢åˆ æ”¹</a></li><li class="sidebar-sub-header"><a href="index.htm#åµŒå¥—æ•°æ®çš„å¢åˆ æ”¹" tppabs="https://dvajs.com/knowledgemap/#åµŒå¥—æ•°æ®çš„å¢åˆ æ”¹" class="sidebar-link">åµŒå¥—æ•°æ®çš„å¢åˆ æ”¹</a></li></ul></li><li class="sidebar-sub-header"><a href="index.htm#effect" tppabs="https://dvajs.com/knowledgemap/#effect" class="sidebar-link">Effect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#effects" tppabs="https://dvajs.com/knowledgemap/#effects" class="sidebar-link">Effects</a></li><li class="sidebar-sub-header"><a href="index.htm#é”™è¯¯å¤„ç†" tppabs="https://dvajs.com/knowledgemap/#é”™è¯¯å¤„ç†" class="sidebar-link">é”™è¯¯å¤„ç†</a></li><li class="sidebar-sub-header"><a href="index.htm#å¼‚æ­¥è¯·æ±‚" tppabs="https://dvajs.com/knowledgemap/#å¼‚æ­¥è¯·æ±‚" class="sidebar-link">å¼‚æ­¥è¯·æ±‚</a></li></ul></li><li class="sidebar-sub-header"><a href="index.htm#subscription" tppabs="https://dvajs.com/knowledgemap/#subscription" class="sidebar-link">Subscription</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#å¼‚æ­¥æ•°æ®åˆå§‹åŒ–" tppabs="https://dvajs.com/knowledgemap/#å¼‚æ­¥æ•°æ®åˆå§‹åŒ–" class="sidebar-link">å¼‚æ­¥æ•°æ®åˆå§‹åŒ–</a></li></ul></li><li class="sidebar-sub-header"><a href="index.htm#router" tppabs="https://dvajs.com/knowledgemap/#router" class="sidebar-link">Router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#route-components" tppabs="https://dvajs.com/knowledgemap/#route-components" class="sidebar-link">Route Components</a></li><li class="sidebar-sub-header"><a href="index.htm#åŸºäº-action-è¿›è¡Œé¡µé¢è·³è½¬" tppabs="https://dvajs.com/knowledgemap/#åŸºäº-action-è¿›è¡Œé¡µé¢è·³è½¬" class="sidebar-link">åŸºäº action è¿›è¡Œé¡µé¢è·³è½¬</a></li></ul></li><li class="sidebar-sub-header"><a href="index.htm#dva-é…ç½®" tppabs="https://dvajs.com/knowledgemap/#dva-é…ç½®" class="sidebar-link">dva é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#redux-middleware" tppabs="https://dvajs.com/knowledgemap/#redux-middleware" class="sidebar-link">Redux Middleware</a></li><li class="sidebar-sub-header"><a href="index.htm#åˆ‡æ¢-history-ä¸º-browserhistory" tppabs="https://dvajs.com/knowledgemap/#åˆ‡æ¢-history-ä¸º-browserhistory" class="sidebar-link">åˆ‡æ¢ history ä¸º browserHistory</a></li></ul></li><li class="sidebar-sub-header"><a href="index.htm#å·¥å…·" tppabs="https://dvajs.com/knowledgemap/#å·¥å…·" class="sidebar-link">å·¥å…·</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.htm#é€šè¿‡-dva-cli-åˆ›å»ºé¡¹ç›®" tppabs="https://dvajs.com/knowledgemap/#é€šè¿‡-dva-cli-åˆ›å»ºé¡¹ç›®" class="sidebar-link">é€šè¿‡ dva-cli åˆ›å»ºé¡¹ç›®</a></li><li class="sidebar-sub-header"><a href="index.htm#é€šè¿‡-umi-ä½¿ç”¨-dva" tppabs="https://dvajs.com/knowledgemap/#é€šè¿‡-umi-ä½¿ç”¨-dva" class="sidebar-link">é€šè¿‡ umi ä½¿ç”¨ dva</a></li></ul></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="çŸ¥è¯†åœ°å›¾"><a href="#çŸ¥è¯†åœ°å›¾" aria-hidden="true" class="header-anchor">#</a> çŸ¥è¯†åœ°å›¾</h1> <ul><li><a href="javascript:if(confirm('https://github.com/dvajs/dva-knowledgemap/blob/master/README_en.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva-knowledgemap/blob/master/README_en.md'" tppabs="https://github.com/dvajs/dva-knowledgemap/blob/master/README_en.md" target="_blank" rel="noopener noreferrer">Read &quot;the dva.js Knowledgemap&quot; in English<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="javascript:if(confirm('https://github.com/dvajs/dva-knowledgemap/blob/master/README_ja.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva-knowledgemap/blob/master/README_ja.md'" tppabs="https://github.com/dvajs/dva-knowledgemap/blob/master/README_ja.md" target="_blank" rel="noopener noreferrer">&quot;the dva.js Knowledgemap&quot; æ—¥æœ¬èªç‰ˆ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <p>ä¸çŸ¥å¤§å®¶å­¦ react æˆ– dva æ—¶ä¼šä¸ä¼šæœ‰è¿™æ ·çš„ç–‘æƒ‘ï¼š</p> <ul><li>es6 ç‰¹æ€§é‚£ä¹ˆå¤šï¼Œæˆ‘éœ€è¦å…¨éƒ¨å­¦ä¼šå—?</li> <li>react component æœ‰ 3 ç§å†™æ³•ï¼Œæˆ‘éœ€è¦å…¨éƒ¨å­¦ä¼šå—?</li> <li>reducer çš„å¢åˆ æ”¹åº”è¯¥æ€ä¹ˆå†™?</li> <li>æ€ä¹ˆåšå…¨å±€/å±€éƒ¨çš„é”™è¯¯å¤„ç†?</li> <li>æ€ä¹ˆå‘å¼‚æ­¥è¯·æ±‚?</li> <li>æ€ä¹ˆå¤„ç†å¤æ‚çš„å¼‚æ­¥ä¸šåŠ¡é€»è¾‘?</li> <li>æ€ä¹ˆé…ç½®è·¯ç”±?</li> <li>...</li></ul> <p>è¿™ç¯‡æ–‡æ¡£æ¢³ç†äº†åŸºäº <a href="javascript:if(confirm('https://github.com/dvajs/dva-cli  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva-cli'" tppabs="https://github.com/dvajs/dva-cli" target="_blank" rel="noopener noreferrer">dva-cli<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä½¿ç”¨ <a href="javascript:if(confirm('https://github.com/dvajs/dva  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva'" tppabs="https://github.com/dvajs/dva" target="_blank" rel="noopener noreferrer">dva<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„æœ€å°çŸ¥è¯†é›†ï¼Œè®©ä½ å¯ä»¥ç”¨æœ€å°‘çš„æ—¶é—´æŒæ¡åˆ›å»ºç±»ä¼¼ <a href="javascript:if(confirm('https://github.com/dvajs/dva-hackernews  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva-hackernews'" tppabs="https://github.com/dvajs/dva-hackernews" target="_blank" rel="noopener noreferrer">dva-hackernews<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> åº”ç”¨çš„å…¨éƒ¨çŸ¥è¯†ï¼Œå¹¶ä¸”ä¸éœ€è¦æŒæ¡é¢å¤–çš„å†—ä½™çŸ¥è¯†ã€‚</p> <h2 id="javascript-è¯­è¨€"><a href="#javascript-è¯­è¨€" aria-hidden="true" class="header-anchor">#</a> JavaScript è¯­è¨€</h2> <h3 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" aria-hidden="true" class="header-anchor">#</a> å˜é‡å£°æ˜</h3> <h4 id="const-å’Œ-let"><a href="#const-å’Œ-let" aria-hidden="true" class="header-anchor">#</a> const å’Œ let</h4> <p>ä¸è¦ç”¨ <code>var</code>ï¼Œè€Œæ˜¯ç”¨ <code>const</code> å’Œ <code>let</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºå¸¸é‡å’Œå˜é‡ã€‚ä¸åŒäº <code>var</code> çš„å‡½æ•°ä½œç”¨åŸŸï¼Œ<code>const</code> å’Œ <code>let</code> éƒ½æ˜¯å—çº§ä½œç”¨åŸŸã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">DELAY</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
count <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" aria-hidden="true" class="header-anchor">#</a> æ¨¡æ¿å­—ç¬¦ä¸²</h4> <p>æ¨¡æ¿å­—ç¬¦ä¸²æä¾›äº†å¦ä¸€ç§åšå­—ç¬¦ä¸²ç»„åˆçš„æ–¹æ³•ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// hello world</span>

<span class="token comment">// å¤šè¡Œ</span>
<span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token template-string"><span class="token string">`
  Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,
  Thanks for ordering </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>qty<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> tickets to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>event<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.
`</span></span><span class="token punctuation">;</span>
</code></pre></div><h4 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" aria-hidden="true" class="header-anchor">#</a> é»˜è®¤å‚æ•°</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">logActivity</span><span class="token punctuation">(</span>activity <span class="token operator">=</span> <span class="token string">'skiing'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">logActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// skiing</span>
</code></pre></div><h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" aria-hidden="true" class="header-anchor">#</a> ç®­å¤´å‡½æ•°</h3> <p>å‡½æ•°çš„å¿«æ·å†™æ³•ï¼Œä¸éœ€è¦é€šè¿‡ <code>function</code> å…³é”®å­—åˆ›å»ºå‡½æ•°ï¼Œå¹¶ä¸”è¿˜å¯ä»¥çœç•¥ <code>return</code> å…³é”®å­—ã€‚</p> <p>åŒæ—¶ï¼Œç®­å¤´å‡½æ•°è¿˜ä¼šç»§æ‰¿å½“å‰ä¸Šä¸‹æ–‡çš„ <code>this</code> å…³é”®å­—ã€‚</p> <p>æ¯”å¦‚ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [2, 3, 4]</span>
</code></pre></div><p>ç­‰åŒäºï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="æ¨¡å—çš„-import-å’Œ-export"><a href="#æ¨¡å—çš„-import-å’Œ-export" aria-hidden="true" class="header-anchor">#</a> æ¨¡å—çš„ Import å’Œ Export</h3> <p><code>import</code> ç”¨äºå¼•å…¥æ¨¡å—ï¼Œ<code>export</code> ç”¨äºå¯¼å‡ºæ¨¡å—ã€‚</p> <p>æ¯”å¦‚ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥å…¨éƒ¨</span>
<span class="token keyword">import</span> dva <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>

<span class="token comment">// å¼•å…¥éƒ¨åˆ†</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva/router'</span><span class="token punctuation">;</span>

<span class="token comment">// å¼•å…¥å…¨éƒ¨å¹¶ä½œä¸º github å¯¹è±¡</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> github <span class="token keyword">from</span> <span class="token string">'./services/github'</span><span class="token punctuation">;</span>

<span class="token comment">// å¯¼å‡ºé»˜è®¤</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
<span class="token comment">// éƒ¨åˆ†å¯¼å‡ºï¼Œéœ€ import { App } from './file'; å¼•å…¥</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> extend Component <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="es6-å¯¹è±¡å’Œæ•°ç»„"><a href="#es6-å¯¹è±¡å’Œæ•°ç»„" aria-hidden="true" class="header-anchor">#</a> ES6 å¯¹è±¡å’Œæ•°ç»„</h3> <h4 id="ææ„èµ‹å€¼"><a href="#ææ„èµ‹å€¼" aria-hidden="true" class="header-anchor">#</a> ææ„èµ‹å€¼</h4> <p>ææ„èµ‹å€¼è®©æˆ‘ä»¬ä» Object æˆ– Array é‡Œå–éƒ¨åˆ†æ•°æ®å­˜ä¸ºå˜é‡ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// å¯¹è±¡</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'guanguan'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> user<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// guanguan : 2</span>

<span class="token comment">// æ•°ç»„</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
</code></pre></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ææ„ä¼ å…¥çš„å‡½æ•°å‚æ•°ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ææ„æ—¶è¿˜å¯ä»¥é… aliasï¼Œè®©ä»£ç æ›´å…·æœ‰è¯­ä¹‰ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å¯¹è±¡å­—é¢é‡æ”¹è¿›"><a href="#å¯¹è±¡å­—é¢é‡æ”¹è¿›" aria-hidden="true" class="header-anchor">#</a> å¯¹è±¡å­—é¢é‡æ”¹è¿›</h4> <p>è¿™æ˜¯ææ„çš„åå‘æ“ä½œï¼Œç”¨äºé‡æ–°ç»„ç»‡ä¸€ä¸ª Object ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'duoduo'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// { name: 'duoduo', age: 8 }</span>
</code></pre></div><p>å®šä¹‰å¯¹è±¡æ–¹æ³•æ—¶ï¼Œè¿˜å¯ä»¥çœå» <code>function</code> å…³é”®å­—ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// ç­‰åŒäº add: function() {}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token function">addRemote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// ç­‰åŒäº addRemote: function*() {}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="spread-operator"><a href="#spread-operator" aria-hidden="true" class="header-anchor">#</a> Spread Operator</h4> <p>Spread Operator å³ 3 ä¸ªç‚¹ <code>...</code>ï¼Œæœ‰å‡ ç§ä¸åŒçš„ä½¿ç”¨æ–¹æ³•ã€‚</p> <p>å¯ç”¨äºç»„è£…æ•°ç»„ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Learn dva'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>todos<span class="token punctuation">,</span> <span class="token string">'Learn antd'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// ['Learn dva', 'Learn antd']</span>
</code></pre></div><p>ä¹Ÿå¯ç”¨äºè·å–æ•°ç»„çš„éƒ¨åˆ†é¡¹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>
rest<span class="token punctuation">;</span>  <span class="token comment">// ['b', 'c']</span>

<span class="token comment">// With ignore</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>
rest<span class="token punctuation">;</span>  <span class="token comment">// ['c']</span>
</code></pre></div><p>è¿˜å¯æ”¶é›†å‡½æ•°å‚æ•°ä¸ºæ•°ç»„ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">directions</span><span class="token punctuation">(</span><span class="token parameter">first<span class="token punctuation">,</span> <span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">directions</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ['b', 'c'];</span>
</code></pre></div><p>ä»£æ›¿ applyã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ä¸‹é¢ä¸¤å¥æ•ˆæœç›¸åŒ</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¯¹äº Object è€Œè¨€ï¼Œç”¨äºç»„åˆæˆæ–°çš„ Object ã€‚(ES2017 stage-2 proposal)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
  b<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  c<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>foo<span class="token punctuation">,</span> <span class="token operator">...</span>bar<span class="token punctuation">,</span> d <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// { a:1, b:3, c:2, d:4 }</span>
</code></pre></div><p>æ­¤å¤–ï¼Œåœ¨ JSX ä¸­ Spread Operator è¿˜å¯ç”¨äºæ‰©å±• propsï¼Œè¯¦è§ <a href="#spread-attributes">Spread Attributes</a>ã€‚</p> <h3 id="promises"><a href="#promises" aria-hidden="true" class="header-anchor">#</a> Promises</h3> <p>Promise ç”¨äºæ›´ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥è¯·æ±‚ã€‚æ¯”å¦‚å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/todos'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> err <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å®šä¹‰ Promise ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">timeout</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'executed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="generators"><a href="#generators" aria-hidden="true" class="header-anchor">#</a> Generators</h3> <p>dva çš„ effects æ˜¯é€šè¿‡ generator ç»„ç»‡çš„ã€‚Generator è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œé€šè¿‡ <code>yield</code> å…³é”®å­—å®ç°æš‚åœåŠŸèƒ½ã€‚</p> <p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ dva effectï¼Œé€šè¿‡ <code>yield</code> æŠŠå¼‚æ­¥é€»è¾‘é€šè¿‡åŒæ­¥çš„æ–¹å¼ç»„ç»‡èµ·æ¥ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'todos'</span><span class="token punctuation">,</span>
  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token function">addRemote</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> put<span class="token punctuation">,</span> call <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>addTodo<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'add'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="react-component"><a href="#react-component" aria-hidden="true" class="header-anchor">#</a> React Component</h2> <h3 id="stateless-functional-components"><a href="#stateless-functional-components" aria-hidden="true" class="header-anchor">#</a> Stateless Functional Components</h3> <p>React Component æœ‰ 3 ç§å®šä¹‰æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ <code>React.createClass</code>, <code>class</code> å’Œ <code>Stateless Functional Component</code>ã€‚æ¨èå°½é‡ä½¿ç”¨æœ€åä¸€ç§ï¼Œä¿æŒç®€æ´å’Œæ— çŠ¶æ€ã€‚è¿™æ˜¯å‡½æ•°ï¼Œä¸æ˜¯ Objectï¼Œæ²¡æœ‰ <code>this</code> ä½œç”¨åŸŸï¼Œæ˜¯ pure functionã€‚</p> <p>æ¯”å¦‚å®šä¹‰ App Component ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'app/create'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>$<span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç­‰åŒäºï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'app/create'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>$<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="jsx"><a href="#jsx" aria-hidden="true" class="header-anchor">#</a> JSX</h3> <h4 id="component-åµŒå¥—"><a href="#component-åµŒå¥—" aria-hidden="true" class="header-anchor">#</a> Component åµŒå¥—</h4> <p>ç±»ä¼¼ HTMLï¼ŒJSX é‡Œå¯ä»¥ç»™ç»„ä»¶æ·»åŠ å­ç»„ä»¶ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MainContent</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Footer</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>App</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="classname"><a href="#classname" aria-hidden="true" class="header-anchor">#</a> className</h4> <p><code>class</code> æ˜¯ä¿ç•™è¯ï¼Œæ‰€ä»¥æ·»åŠ æ ·å¼æ—¶ï¼Œéœ€ç”¨ <code>className</code> ä»£æ›¿ <code>class</code> ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fancy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Hello dva<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="javascript-è¡¨è¾¾å¼"><a href="#javascript-è¡¨è¾¾å¼" aria-hidden="true" class="header-anchor">#</a> JavaScript è¡¨è¾¾å¼</h4> <p>JavaScript è¡¨è¾¾å¼éœ€è¦ç”¨ <code>{}</code> æ‹¬èµ·æ¥ï¼Œä¼šæ‰§è¡Œå¹¶è¿”å›ç»“æœã€‚</p> <p>æ¯”å¦‚ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre></div><h4 id="mapping-arrays-to-jsx"><a href="#mapping-arrays-to-jsx" aria-hidden="true" class="header-anchor">#</a> Mapping Arrays to JSX</h4> <p>å¯ä»¥æŠŠæ•°ç»„æ˜ å°„ä¸º JSX å…ƒç´ åˆ—è¡¨ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>todo<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre></div><h4 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" aria-hidden="true" class="header-anchor">#</a> æ³¨é‡Š</h4> <p>å°½é‡åˆ«ç”¨ <code>//</code> åšå•è¡Œæ³¨é‡Šã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token comment">/* multiline comment */</span><span class="token punctuation">}</span>
  <span class="token punctuation">{</span><span class="token comment">/*
    multi
    line
    comment
    */</span><span class="token punctuation">}</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// single line</span>
  <span class="token punctuation">}</span>
  Hello
<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre></div><h4 id="spread-attributes"><a href="#spread-attributes" aria-hidden="true" class="header-anchor">#</a> Spread Attributes</h4> <p>è¿™æ˜¯ JSX ä» ECMAScript6 å€Ÿé‰´è¿‡æ¥çš„å¾ˆæœ‰ç”¨çš„ç‰¹æ€§ï¼Œç”¨äºæ‰©å……ç»„ä»¶ props ã€‚</p> <p>æ¯”å¦‚ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span>
  href<span class="token punctuation">:</span> <span class="token string">'http://example.org'</span><span class="token punctuation">,</span>
  target<span class="token punctuation">:</span> <span class="token string">'_blank'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>a <span class="token punctuation">{</span><span class="token operator">...</span>attrs<span class="token punctuation">}</span><span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
</code></pre></div><p>ç­‰åŒäº</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span>
  href<span class="token punctuation">:</span> <span class="token string">'http://example.org'</span><span class="token punctuation">,</span>
  target<span class="token punctuation">:</span> <span class="token string">'_blank'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>attrs<span class="token punctuation">.</span>href<span class="token punctuation">}</span> target<span class="token operator">=</span><span class="token punctuation">{</span>attrs<span class="token punctuation">.</span>target<span class="token punctuation">}</span><span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
</code></pre></div><h3 id="props"><a href="#props" aria-hidden="true" class="header-anchor">#</a> Props</h3> <p>æ•°æ®å¤„ç†åœ¨ React ä¸­æ˜¯éå¸¸é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼Œåˆ†åˆ«å¯ä»¥é€šè¿‡ props, state å’Œ context æ¥å¤„ç†æ•°æ®ã€‚è€Œåœ¨ dva åº”ç”¨é‡Œï¼Œä½ åªéœ€å…³å¿ƒ props ã€‚</p> <h4 id="proptypes"><a href="#proptypes" aria-hidden="true" class="header-anchor">#</a> propTypes</h4> <p>JavaScript æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œæ‰€ä»¥è¯·å°½é‡å£°æ˜ propTypes å¯¹ props è¿›è¡Œæ ¡éªŒï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„é—®é¢˜ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
App<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å†…ç½®çš„ prop type æœ‰ï¼š</p> <ul><li>PropTypes.array</li> <li>PropTypes.bool</li> <li>PropTypes.func</li> <li>PropTypes.number</li> <li>PropTypes.object</li> <li>PropTypes.string</li></ul> <h4 id="å¾€ä¸‹ä¼ æ•°æ®"><a href="#å¾€ä¸‹ä¼ æ•°æ®" aria-hidden="true" class="header-anchor">#</a> å¾€ä¸‹ä¼ æ•°æ®</h4> <p><img src="../../zos.alipayobjects.com/rmsportal/NAzeMyUoPMqxfRv.png" tppabs="https://zos.alipayobjects.com/rmsportal/NAzeMyUoPMqxfRv.png" alt></p> <h4 id="å¾€ä¸Šä¼ æ•°æ®"><a href="#å¾€ä¸Šä¼ æ•°æ®" aria-hidden="true" class="header-anchor">#</a> å¾€ä¸Šä¼ æ•°æ®</h4> <p><img src="../../zos.alipayobjects.com/rmsportal/fiKKgDGuEJfSvxv.png" tppabs="https://zos.alipayobjects.com/rmsportal/fiKKgDGuEJfSvxv.png" alt></p> <h3 id="css-modules"><a href="#css-modules" aria-hidden="true" class="header-anchor">#</a> CSS Modules</h3> <img src="../../zos.alipayobjects.com/rmsportal/mHVRpjNYhVuFdsS.png" tppabs="https://zos.alipayobjects.com/rmsportal/mHVRpjNYhVuFdsS.png" width="150" style="background:#fff;"> <h4 id="ç†è§£-css-modules"><a href="#ç†è§£-css-modules" aria-hidden="true" class="header-anchor">#</a> ç†è§£ CSS Modules</h4> <p>ä¸€å¼ å›¾ç†è§£ CSS Modules çš„å·¥ä½œåŸç†ï¼š</p> <p><img src="../../zos.alipayobjects.com/rmsportal/SWBwWTbZKqxwEPq.png" tppabs="https://zos.alipayobjects.com/rmsportal/SWBwWTbZKqxwEPq.png" alt></p> <p><code>button</code> class åœ¨æ„å»ºä¹‹åä¼šè¢«é‡å‘½åä¸º <code>ProductList_button_1FU0u</code> ã€‚<code>button</code> æ˜¯ local nameï¼Œè€Œ <code>ProductList_button_1FU0u</code> æ˜¯ global name ã€‚<strong>ä½ å¯ä»¥ç”¨ç®€çŸ­çš„æè¿°æ€§åå­—ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå‘½åå†²çªé—®é¢˜ã€‚</strong></p> <p>ç„¶åä½ è¦åšçš„å…¨éƒ¨äº‹æƒ…å°±æ˜¯åœ¨ css/less æ–‡ä»¶é‡Œå†™ <code>.button {...}</code>ï¼Œå¹¶åœ¨ç»„ä»¶é‡Œé€šè¿‡ <code>styles.button</code> æ¥å¼•ç”¨ä»–ã€‚</p> <h4 id="å®šä¹‰å…¨å±€-css"><a href="#å®šä¹‰å…¨å±€-css" aria-hidden="true" class="header-anchor">#</a> å®šä¹‰å…¨å±€ CSS</h4> <p>CSS Modules é»˜è®¤æ˜¯å±€éƒ¨ä½œç”¨åŸŸçš„ï¼Œæƒ³è¦å£°æ˜ä¸€ä¸ªå…¨å±€è§„åˆ™ï¼Œå¯ç”¨ <code>:global</code> è¯­æ³•ã€‚</p> <p>æ¯”å¦‚ï¼š</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.title</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">:global(.title)</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶ååœ¨å¼•ç”¨çš„æ—¶å€™ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>App className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// red</span>
<span class="token operator">&lt;</span>App className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>        <span class="token comment">// green</span>
</code></pre></div><h4 id="classnames-package"><a href="#classnames-package" aria-hidden="true" class="header-anchor">#</a> <code>classnames</code> Package</h4> <p>åœ¨ä¸€äº›å¤æ‚çš„åœºæ™¯ä¸­ï¼Œä¸€ä¸ªå…ƒç´ å¯èƒ½å¯¹åº”å¤šä¸ª classNameï¼Œè€Œæ¯ä¸ª className åˆåŸºäºä¸€äº›æ¡ä»¶æ¥å†³å®šæ˜¯å¦å‡ºç°ã€‚è¿™æ—¶ï¼Œ<a href="javascript:if(confirm('https://github.com/JedWatson/classnames  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/JedWatson/classnames'" tppabs="https://github.com/JedWatson/classnames" target="_blank" rel="noopener noreferrer">classnames<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> è¿™ä¸ªåº“å°±éå¸¸æœ‰ç”¨ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">'classnames'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cls <span class="token operator">=</span> <span class="token function">classnames</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    btn<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    btnLarge<span class="token punctuation">:</span> props<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'submit'</span><span class="token punctuation">,</span>
    btnSmall<span class="token punctuation">:</span> props<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'edit'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span> cls <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·ï¼Œä¼ å…¥ä¸åŒçš„ type ç»™ App ç»„ä»¶ï¼Œå°±ä¼šè¿”å›ä¸åŒçš„ className ç»„åˆï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>App type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// btn btnLarge</span>
<span class="token operator">&lt;</span>App type<span class="token operator">=</span><span class="token string">&quot;edit&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>   <span class="token comment">// btn btnSmall</span>
</code></pre></div><h2 id="reducer"><a href="#reducer" aria-hidden="true" class="header-anchor">#</a> Reducer</h2> <p>reducer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å— state å’Œ actionï¼Œè¿”å›è€çš„æˆ–æ–°çš„ state ã€‚å³ï¼š<code>(state, action) =&gt; state</code></p> <h3 id="å¢åˆ æ”¹"><a href="#å¢åˆ æ”¹" aria-hidden="true" class="header-anchor">#</a> å¢åˆ æ”¹</h3> <p>ä»¥ todos ä¸ºä¾‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'todos'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> updatedTodo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id <span class="token operator">===</span> updatedTodo<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>todo<span class="token punctuation">,</span> <span class="token operator">...</span>updatedTodo <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> todo<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åµŒå¥—æ•°æ®çš„å¢åˆ æ”¹"><a href="#åµŒå¥—æ•°æ®çš„å¢åˆ æ”¹" aria-hidden="true" class="header-anchor">#</a> åµŒå¥—æ•°æ®çš„å¢åˆ æ”¹</h3> <p>å»ºè®®æœ€å¤šä¸€å±‚åµŒå¥—ï¼Œä»¥ä¿æŒ state çš„æ‰å¹³åŒ–ï¼Œæ·±å±‚åµŒå¥—ä¼šè®© reducer å¾ˆéš¾å†™å’Œéš¾ä»¥ç»´æŠ¤ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    todos<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> todos <span class="token operator">=</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> todos <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸‹é¢æ˜¯æ·±å±‚åµŒå¥—çš„ä¾‹å­ï¼Œåº”å°½é‡é¿å…ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        todos<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> todos <span class="token operator">=</span> state<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">,</span> todos <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>a<span class="token punctuation">,</span> b <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> a <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="effect"><a href="#effect" aria-hidden="true" class="header-anchor">#</a> Effect</h2> <p>ç¤ºä¾‹ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  namespace<span class="token punctuation">:</span> <span class="token string">'todos'</span><span class="token punctuation">,</span>
  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token function">addRemote</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> put<span class="token punctuation">,</span> call <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>addTodo<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'add'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> todo <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="effects"><a href="#effects" aria-hidden="true" class="header-anchor">#</a> Effects</h3> <h4 id="put"><a href="#put" aria-hidden="true" class="header-anchor">#</a> put</h4> <p>ç”¨äºè§¦å‘ action ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'todos/add'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token string">'Learn Dva'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="call"><a href="#call" aria-hidden="true" class="header-anchor">#</a> call</h4> <p>ç”¨äºè°ƒç”¨å¼‚æ­¥é€»è¾‘ï¼Œæ”¯æŒ promise ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>fetch<span class="token punctuation">,</span> <span class="token string">'/todos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="select"><a href="#select" aria-hidden="true" class="header-anchor">#</a> select</h4> <p>ç”¨äºä» state é‡Œè·å–æ•°æ®ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" aria-hidden="true" class="header-anchor">#</a> é”™è¯¯å¤„ç†</h3> <h4 id="å…¨å±€é”™è¯¯å¤„ç†"><a href="#å…¨å±€é”™è¯¯å¤„ç†" aria-hidden="true" class="header-anchor">#</a> å…¨å±€é”™è¯¯å¤„ç†</h4> <p>dva é‡Œï¼Œeffects å’Œ subscriptions çš„æŠ›é”™å…¨éƒ¨ä¼šèµ° <code>onError</code> hookï¼Œæ‰€ä»¥å¯ä»¥åœ¨ <code>onError</code> é‡Œç»Ÿä¸€å¤„ç†é”™è¯¯ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> dispatch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç„¶å effects é‡Œçš„æŠ›é”™å’Œ reject çš„ promise å°±éƒ½ä¼šè¢«æ•è·åˆ°äº†ã€‚</p> <h4 id="æœ¬åœ°é”™è¯¯å¤„ç†"><a href="#æœ¬åœ°é”™è¯¯å¤„ç†" aria-hidden="true" class="header-anchor">#</a> æœ¬åœ°é”™è¯¯å¤„ç†</h4> <p>å¦‚æœéœ€è¦å¯¹æŸäº› effects çš„é”™è¯¯è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œéœ€è¦åœ¨ effect å†…éƒ¨åŠ  <code>try catch</code> ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token function">addRemote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// Your Code Here</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å¼‚æ­¥è¯·æ±‚"><a href="#å¼‚æ­¥è¯·æ±‚" aria-hidden="true" class="header-anchor">#</a> å¼‚æ­¥è¯·æ±‚</h3> <p>å¼‚æ­¥è¯·æ±‚åŸºäº whatwg-fetchï¼ŒAPI è¯¦è§ï¼šhttps://github.com/github/fetch</p> <h4 id="get-å’Œ-post"><a href="#get-å’Œ-post" aria-hidden="true" class="header-anchor">#</a> GET å’Œ POST</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../util/request'</span><span class="token punctuation">;</span>

<span class="token comment">// GET</span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/api/todos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// POST</span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/api/todos'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  body<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ç»Ÿä¸€é”™è¯¯å¤„ç†"><a href="#ç»Ÿä¸€é”™è¯¯å¤„ç†" aria-hidden="true" class="header-anchor">#</a> ç»Ÿä¸€é”™è¯¯å¤„ç†</h4> <p>å‡å¦‚çº¦å®šåå°è¿”å›ä»¥ä¸‹æ ¼å¼æ—¶ï¼Œåšç»Ÿä¸€çš„é”™è¯¯å¤„ç†ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
  message<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç¼–è¾‘ <code>utils/request.js</code>ï¼ŒåŠ å…¥ä»¥ä¸‹ä¸­é—´ä»¶ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">parseErrorMessage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> status<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åï¼Œè¿™ç±»é”™è¯¯å°±ä¼šèµ°åˆ° <code>onError</code> hook é‡Œã€‚</p> <h2 id="subscription"><a href="#subscription" aria-hidden="true" class="header-anchor">#</a> Subscription</h2> <p><code>subscriptions</code> æ˜¯è®¢é˜…ï¼Œç”¨äºè®¢é˜…ä¸€ä¸ªæ•°æ®æºï¼Œç„¶åæ ¹æ®éœ€è¦ dispatch ç›¸åº”çš„ actionã€‚æ•°æ®æºå¯ä»¥æ˜¯å½“å‰çš„æ—¶é—´ã€æœåŠ¡å™¨çš„ websocket è¿æ¥ã€keyboard è¾“å…¥ã€geolocation å˜åŒ–ã€history è·¯ç”±å˜åŒ–ç­‰ç­‰ã€‚æ ¼å¼ä¸º <code>({ dispatch, history }) =&gt; unsubscribe</code> ã€‚</p> <h3 id="å¼‚æ­¥æ•°æ®åˆå§‹åŒ–"><a href="#å¼‚æ­¥æ•°æ®åˆå§‹åŒ–" aria-hidden="true" class="header-anchor">#</a> å¼‚æ­¥æ•°æ®åˆå§‹åŒ–</h3> <p>æ¯”å¦‚ï¼šå½“ç”¨æˆ·è¿›å…¥ <code>/users</code> é¡µé¢æ—¶ï¼Œè§¦å‘ action <code>users/fetch</code> åŠ è½½ç”¨æˆ·æ•°æ®ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  subscriptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> history <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      history<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> pathname <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">'/users'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'users/fetch'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="path-to-regexp-package"><a href="#path-to-regexp-package" aria-hidden="true" class="header-anchor">#</a> <code>path-to-regexp</code> Package</h4> <p>å¦‚æœ url è§„åˆ™æ¯”è¾ƒå¤æ‚ï¼Œæ¯”å¦‚ <code>/users/:userId/search</code>ï¼Œé‚£ä¹ˆåŒ¹é…å’Œ userId çš„è·å–éƒ½ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚è¿™æ—¶æ¨èç”¨ <a href="javascript:if(confirm('https://github.com/pillarjs/path-to-regexp  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/pillarjs/path-to-regexp'" tppabs="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener noreferrer">path-to-regexp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ç®€åŒ–è¿™éƒ¨åˆ†é€»è¾‘ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> pathToRegexp <span class="token keyword">from</span> <span class="token string">'path-to-regexp'</span><span class="token punctuation">;</span>

<span class="token comment">// in subscription</span>
<span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token function">pathToRegexp</span><span class="token punctuation">(</span><span class="token string">'/users/:userId/search'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userId <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// dispatch action with userId</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="router"><a href="#router" aria-hidden="true" class="header-anchor">#</a> Router</h2> <h3 id="route-components"><a href="#route-components" aria-hidden="true" class="header-anchor">#</a> Route Components</h3> <p>Route Components æ˜¯æŒ‡ <code>./src/routes/</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä»–ä»¬æ˜¯ <code>./src/router.js</code> é‡ŒåŒ¹é…çš„ Componentã€‚</p> <h4 id="é€šè¿‡-connect-ç»‘å®šæ•°æ®"><a href="#é€šè¿‡-connect-ç»‘å®šæ•°æ®" aria-hidden="true" class="header-anchor">#</a> é€šè¿‡ connect ç»‘å®šæ•°æ®</h4> <p>æ¯”å¦‚ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> ownProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    users<span class="token punctuation">:</span> state<span class="token punctuation">.</span>users<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç„¶ååœ¨ App é‡Œå°±æœ‰äº† <code>dispatch</code> å’Œ <code>users</code> ä¸¤ä¸ªå±æ€§ã€‚</p> <h4 id="injected-props-e-g-location"><a href="#injected-props-e-g-location" aria-hidden="true" class="header-anchor">#</a> Injected Props (e.g. location)</h4> <p>Route Component ä¼šæœ‰é¢å¤–çš„ props ç”¨ä»¥è·å–è·¯ç”±ä¿¡æ¯ã€‚</p> <ul><li>location</li> <li>params</li> <li>children</li></ul> <p>æ›´å¤šè¯¦è§ï¼š<a href="javascript:if(confirm('https://github.com/reactjs/react-router/blob/master/docs/API.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/reactjs/react-router/blob/master/docs/API.md#injected-props'" tppabs="https://github.com/reactjs/react-router/blob/master/docs/API.md#injected-props" target="_blank" rel="noopener noreferrer">react-router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="åŸºäº-action-è¿›è¡Œé¡µé¢è·³è½¬"><a href="#åŸºäº-action-è¿›è¡Œé¡µé¢è·³è½¬" aria-hidden="true" class="header-anchor">#</a> åŸºäº action è¿›è¡Œé¡µé¢è·³è½¬</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> routerRedux <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva/router'</span><span class="token punctuation">;</span>

<span class="token comment">// Inside Effects</span>
<span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span>routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/logout'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Outside Effects</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span>routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/logout'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// With query</span>
routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  pathname<span class="token punctuation">:</span> <span class="token string">'/logout'</span><span class="token punctuation">,</span>
  query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    page<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é™¤ <code>push(location)</code> å¤–è¿˜æœ‰æ›´å¤šæ–¹æ³•ï¼Œè¯¦è§ <a href="javascript:if(confirm('https://github.com/reactjs/react-router-redux  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/reactjs/react-router-redux#pushlocation-replacelocation-gonumber-goback-goforward'" tppabs="https://github.com/reactjs/react-router-redux#pushlocation-replacelocation-gonumber-goback-goforward" target="_blank" rel="noopener noreferrer">react-router-redux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="dva-é…ç½®"><a href="#dva-é…ç½®" aria-hidden="true" class="header-anchor">#</a> dva é…ç½®</h2> <h3 id="redux-middleware"><a href="#redux-middleware" aria-hidden="true" class="header-anchor">#</a> Redux Middleware</h3> <p>æ¯”å¦‚è¦æ·»åŠ  redux-logger ä¸­é—´ä»¶ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> createLogger <span class="token keyword">from</span> <span class="token string">'redux-logger'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  onAction<span class="token punctuation">:</span> <span class="token function">createLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ³¨ï¼šonAction æ”¯æŒæ•°ç»„ï¼Œå¯åŒæ—¶ä¼ å…¥å¤šä¸ªä¸­é—´ä»¶ã€‚</p> <h3 id="åˆ‡æ¢-history-ä¸º-browserhistory"><a href="#åˆ‡æ¢-history-ä¸º-browserhistory" aria-hidden="true" class="header-anchor">#</a> åˆ‡æ¢ history ä¸º browserHistory</h3> <p>å…ˆå®‰è£… history ä¾èµ–ï¼Œ</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> --save <span class="token function">history</span>
</code></pre></div><p>ç„¶åä¿®æ”¹å…¥å£æ–‡ä»¶ï¼Œ</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> createHistory <span class="token keyword">from</span> <span class="token string">'history/createBrowserHistory'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token punctuation">:</span> <span class="token function">createHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å·¥å…·"><a href="#å·¥å…·" aria-hidden="true" class="header-anchor">#</a> å·¥å…·</h2> <h3 id="é€šè¿‡-dva-cli-åˆ›å»ºé¡¹ç›®"><a href="#é€šè¿‡-dva-cli-åˆ›å»ºé¡¹ç›®" aria-hidden="true" class="header-anchor">#</a> é€šè¿‡ dva-cli åˆ›å»ºé¡¹ç›®</h3> <p>å…ˆå®‰è£… dva-cli ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> dva-cli -g
</code></pre></div><p>ç„¶ååˆ›å»ºé¡¹ç›®ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ dva new myapp
</code></pre></div><p>æœ€åï¼Œè¿›å…¥ç›®å½•å¹¶å¯åŠ¨ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cd</span> myapp
$ <span class="token function">npm</span> start
</code></pre></div><h3 id="é€šè¿‡-umi-ä½¿ç”¨-dva"><a href="#é€šè¿‡-umi-ä½¿ç”¨-dva" aria-hidden="true" class="header-anchor">#</a> é€šè¿‡ umi ä½¿ç”¨ dva</h3> <p>å…ˆå®‰è£… dva-cli@next ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> dva-cli@next -g
</code></pre></div><p>ç„¶ååˆ›å»ºé¡¹ç›®ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ dva new myapp
</code></pre></div><p>æœ€åï¼Œè¿›å…¥ç›®å½•å¹¶å¯åŠ¨ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cd</span> myapp
$ <span class="token function">npm</span> start
</code></pre></div><p>è¯¦è§<a href="javascript:if(confirm('https://umijs.org/guide/with-dva.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://umijs.org/guide/with-dva.html'" tppabs="https://umijs.org/guide/with-dva.html" target="_blank" rel="noopener noreferrer">å’Œ dva ä¸€èµ·ç”¨@umijs.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p></div> <div class="page-edit"><div class="edit-link"><a href="javascript:if(confirm('https://github.com/dvajs/dva/edit/master/docs/knowledgemap/README.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/dvajs/dva/edit/master/docs/knowledgemap/README.md'" tppabs="https://github.com/dvajs/dva/edit/master/docs/knowledgemap/README.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/13/2018, 9:10:30 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="../assets/js/app.0350af5f.js" tppabs="https://dvajs.com/assets/js/app.0350af5f.js" defer></script><script src="../assets/js/16.190e2547.js" tppabs="https://dvajs.com/assets/js/16.190e2547.js" defer></script>
  </body>
</html>
